{"ast":null,"code":"import React,{useState,useEffect,useRef}from'react';import{FaUtensils,FaBars,FaTimes,FaCalculator,FaShoppingCart,FaBoxes,FaPalette,FaPlus,FaSearch,FaCog,FaUsers,FaTachometerAlt,FaTrash,FaList,FaTh,FaSort,FaPencilAlt,FaGlobe,FaTimes as FaClose,FaSave,FaArrowLeft,FaEuroSign,FaCheck,FaImage}from'react-icons/fa';// Design Templates\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const designTemplates={modern:{name:\"Modern & Minimal\",description:\"Clean, viel Weißraum, moderne Typografie\",colors:{primary:\"#2c3e50\",secondary:\"#ecf0f1\",accent:\"#3498db\",background:\"#ffffff\",sidebar:\"#f8f9fa\",text:\"#2c3e50\",card:\"#ffffff\",cardBorder:\"#e9ecef\",paper:\"#ffffff\",paperShadow:\"0 4px 12px rgba(44, 62, 80, 0.1)\"}},dark:{name:\"Dark Theme\",description:\"Dunkles Design mit Akzentfarben\",colors:{primary:\"#1a1a1a\",secondary:\"#2d2d2d\",accent:\"#00d4aa\",background:\"#121212\",sidebar:\"#1e1e1e\",text:\"#ffffff\",card:\"#2d2d2d\",cardBorder:\"#404040\",paper:\"#2d2d2d\",paperShadow:\"0 4px 12px rgba(0, 0, 0, 0.3)\"}},warm:{name:\"Warm & Gastronomisch\",description:\"Braun/Beige Töne, gemütlich\",colors:{primary:\"#8B4513\",secondary:\"#F5DEB3\",accent:\"#D2691E\",background:\"#FFF8DC\",sidebar:\"#DEB887\",text:\"#654321\",card:\"#FDF5E6\",cardBorder:\"#D2B48C\",paper:\"#FFFFFF\",paperShadow:\"0 4px 12px rgba(139, 69, 19, 0.15)\"}},professional:{name:\"Professional Blue\",description:\"Business-Look mit Blau\",colors:{primary:\"#1e3a8a\",secondary:\"#dbeafe\",accent:\"#3b82f6\",background:\"#f8fafc\",sidebar:\"#1e40af\",text:\"#1e293b\",card:\"#ffffff\",cardBorder:\"#e2e8f0\",paper:\"#ffffff\",paperShadow:\"0 4px 12px rgba(30, 58, 138, 0.1)\"}}};function App(){const[sidebarOpen,setSidebarOpen]=useState(true);const[isMobile,setIsMobile]=useState(false);const[currentPage,setCurrentPage]=useState('dashboard');// Debug: Log currentPage changes\nuseEffect(()=>{console.log('Current page changed to:',currentPage);},[currentPage]);const[currentDesign,setCurrentDesign]=useState('warm');const[showDesignSelector,setShowDesignSelector]=useState(false);// Artikelverwaltung State\nconst[articles,setArticles]=useState([{id:'1',name:'Tomaten',supplierId:'1',category:'Gemüse & Obst',supplierArticleNumber:'TOM-001',bundlePrice:12.50,bundleUnit:'Kiste',content:5,contentUnit:'kg',pricePerUnit:2.50,isGrossPrice:true,ingredients:['Tomaten'],allergens:[],nutritionInfo:{calories:18,kilojoules:75.3,protein:0.9,fat:0.2,carbohydrates:3.9,fiber:1.2,sugar:2.6,salt:0.005}},{id:'2',name:'Olivenöl',supplierId:'2',category:'Öle & Fette',supplierArticleNumber:'OLI-002',bundlePrice:45.00,bundleUnit:'Flasche',content:1,contentUnit:'L',pricePerUnit:45.00,isGrossPrice:false,ingredients:['Olivenöl'],allergens:[],nutritionInfo:{calories:884,kilojoules:3698.7,protein:0,fat:100,carbohydrates:0,fiber:0,sugar:0,salt:0}},{id:'3',name:'Parmesan',supplierId:'3',category:'Milchprodukte',supplierArticleNumber:'PAR-003',bundlePrice:28.80,bundleUnit:'Stück',content:0.5,contentUnit:'kg',pricePerUnit:57.60,isGrossPrice:true,ingredients:['Milch','Salz','Lab'],allergens:['Milch (einschließlich Laktose)'],nutritionInfo:{calories:431,kilojoules:1803.3,protein:38.5,fat:29,carbohydrates:4.1,fiber:0,sugar:0.1,salt:1.5}}]);const[searchTerm,setSearchTerm]=useState('');const[viewMode,setViewMode]=useState('list');// 'list' oder 'grid'\nconst[selectedCategory,setSelectedCategory]=useState('');const[selectedSupplier,setSelectedSupplier]=useState('');const[sortField,setSortField]=useState('name');const[sortDirection,setSortDirection]=useState('asc');const[selectedArticles,setSelectedArticles]=useState([]);// Lieferantenverwaltung State\nconst[supplierViewMode,setSupplierViewMode]=useState('list');// 'list' oder 'grid'\nconst[supplierSortField,setSupplierSortField]=useState('name');const[supplierSortDirection,setSupplierSortDirection]=useState('asc');const[selectedSuppliers,setSelectedSuppliers]=useState([]);// Lieferanten State\nconst[suppliers,setSuppliers]=useState([{id:'1',name:'Gemüsehof Müller',contactPerson:'Hans Müller',email:'hans.mueller@gemuesehof.de',phoneNumbers:[{type:'Geschäft',number:'040-12345678'},{type:'Mobil',number:'0170-1234567'}],address:{street:'Gemüsestraße 123',zipCode:'20095',city:'Hamburg',country:'Deutschland'},website:'www.gemuesehof-mueller.de',notes:'Bio-Gemüse, Lieferung dienstags und freitags'},{id:'2',name:'Ölmühle Schmidt',contactPerson:'Maria Schmidt',email:'info@oelmuehle-schmidt.de',phoneNumbers:[{type:'Geschäft',number:'040-87654321'}],address:{street:'Ölweg 456',zipCode:'20144',city:'Hamburg',country:'Deutschland'},website:'www.oelmuehle-schmidt.de',notes:'Kaltgepresste Öle, Mindestbestellmenge 50€'},{id:'3',name:'Käserei Weber',contactPerson:'Peter Weber',email:'peter.weber@kaeserei-weber.de',phoneNumbers:[{type:'Geschäft',number:'040-11223344'},{type:'Fax',number:'040-11223345'}],address:{street:'Käseallee 789',zipCode:'20249',city:'Hamburg',country:'Deutschland'},website:'www.kaeserei-weber.de',notes:'Traditionelle Käsesorten, Lieferung montags'}]);// Artikelformular State\nconst[showArticleForm,setShowArticleForm]=useState(false);const[editingArticle,setEditingArticle]=useState(null);const[showCategoryDropdown,setShowCategoryDropdown]=useState(false);const[categorySearchTerm,setCategorySearchTerm]=useState('');const[selectedCategoryIndex,setSelectedCategoryIndex]=useState(-1);const[showSupplierDropdown,setShowSupplierDropdown]=useState(false);const[supplierSearchTerm,setSupplierSearchTerm]=useState('');const[selectedSupplierIndex,setSelectedSupplierIndex]=useState(-1);const[showSupplierForm,setShowSupplierForm]=useState(false);const[showPriceConverter,setShowPriceConverter]=useState(false);const[selectedVatRate,setSelectedVatRate]=useState(19);const[showBundleUnitDropdown,setShowBundleUnitDropdown]=useState(false);const[bundleUnitSearchTerm,setBundleUnitSearchTerm]=useState('');const[selectedBundleUnitIndex,setSelectedBundleUnitIndex]=useState(-1);const[showContentUnitDropdown,setShowContentUnitDropdown]=useState(false);const[contentUnitSearchTerm,setContentUnitSearchTerm]=useState('');const[selectedContentUnitIndex,setSelectedContentUnitIndex]=useState(-1);const[supplierForm,setSupplierForm]=useState({name:'',contactPerson:'',email:'',phoneNumbers:[{type:'Geschäft',number:''}],address:{street:'',zipCode:'',city:'',country:'Deutschland'},website:'',notes:''});const[articleForm,setArticleForm]=useState({name:'',category:'',supplierId:'',supplierArticleNumber:'',bundlePrice:0,bundleUnit:'',content:0,contentUnit:'',pricePerUnit:0,isGrossPrice:true,ingredients:[],allergens:[],nutrition:{calories:0,kilojoules:0,protein:0,fat:0,carbohydrates:0,fiber:0,sugar:0,salt:0}});// Check screen size on mount and resize\nuseEffect(()=>{const checkScreenSize=()=>{setIsMobile(window.innerWidth<768);if(window.innerWidth<768){setSidebarOpen(false);}else{setSidebarOpen(true);}};checkScreenSize();window.addEventListener('resize',checkScreenSize);return()=>window.removeEventListener('resize',checkScreenSize);},[]);const toggleSidebar=()=>{setSidebarOpen(!sidebarOpen);};const getCurrentColors=()=>designTemplates[currentDesign].colors;// Artikelverwaltung Hilfsfunktionen\nconst getUniqueCategories=()=>{const articleCategories=articles.map(article=>article.category).filter(cat=>cat);const allCategories=Array.from(new Set([...CATEGORIES,...articleCategories]));return allCategories.sort();};// Nur Kategorien anzeigen, die tatsächlich in Artikeln verwendet werden\nconst getUsedCategories=()=>{const usedCategories=articles.map(article=>article.category).filter(cat=>cat);return Array.from(new Set(usedCategories)).sort();};const getSupplierName=supplierId=>{const supplier=suppliers.find(s=>s.id===supplierId);return supplier?supplier.name:'Unbekannt';};const getUniqueSuppliers=()=>{const supplierNames=suppliers.map(supplier=>supplier.name);return supplierNames.sort();};const filteredAndSortedArticles=()=>{let filtered=articles.filter(article=>article.name.toLowerCase().includes(searchTerm.toLowerCase())&&(selectedCategory===''||article.category===selectedCategory)&&(selectedSupplier===''||getSupplierName(article.supplierId)===selectedSupplier));// Sortierung\nfiltered.sort((a,b)=>{let aValue=a[sortField];let bValue=b[sortField];if(typeof aValue==='string'&&typeof bValue==='string'){aValue=aValue.toLowerCase();bValue=bValue.toLowerCase();}if(aValue<bValue)return sortDirection==='asc'?-1:1;if(aValue>bValue)return sortDirection==='asc'?1:-1;return 0;});return filtered;};const filteredAndSortedSuppliers=()=>{let filtered=suppliers.filter(supplier=>{const matchesSearch=supplier.name.toLowerCase().includes(supplierSearchTerm.toLowerCase())||supplier.contactPerson.toLowerCase().includes(supplierSearchTerm.toLowerCase())||supplier.email.toLowerCase().includes(supplierSearchTerm.toLowerCase())||supplier.address.city.toLowerCase().includes(supplierSearchTerm.toLowerCase());return matchesSearch;});return filtered.sort((a,b)=>{let aValue=a[supplierSortField];let bValue=b[supplierSortField];if(typeof aValue==='string')aValue=aValue.toLowerCase();if(typeof bValue==='string')bValue=bValue.toLowerCase();if(aValue<bValue)return supplierSortDirection==='asc'?-1:1;if(aValue>bValue)return supplierSortDirection==='asc'?1:-1;return 0;});};const handleSelectArticle=articleId=>{setSelectedArticles(prev=>prev.includes(articleId)?prev.filter(id=>id!==articleId):[...prev,articleId]);};const handleSelectAll=()=>{const filteredArticles=filteredAndSortedArticles();if(selectedArticles.length===filteredArticles.length){setSelectedArticles([]);}else{setSelectedArticles(filteredArticles.map(article=>article.id));}};const handleDeleteArticles=()=>{if(selectedArticles.length>0){// Sicherheitsabfrage bei mehr als 2 Artikeln\nif(selectedArticles.length>2){setDeleteDialogData({type:'bulk',count:selectedArticles.length});setShowDeleteDialog(true);}else{// Direkte Löschung bei 1-2 Artikeln\nsetArticles(prev=>prev.filter(article=>!selectedArticles.includes(article.id)));setSelectedArticles([]);}}};const handleDeleteSingleArticle=(articleId,articleName)=>{// Direkte Löschung ohne Sicherheitsabfrage\nsetArticles(prev=>prev.filter(article=>article.id!==articleId));setSelectedArticles(prev=>prev.filter(id=>id!==articleId));};const handleConfirmDelete=()=>{if(deleteDialogData){if(deleteDialogData.type==='bulk'&&deleteDialogData.count){// Prüfe, ob Artikel oder Lieferanten gelöscht werden sollen\nif(selectedArticles.length>0){setArticles(prev=>prev.filter(article=>!selectedArticles.includes(article.id)));setSelectedArticles([]);}else if(selectedSuppliers.length>0){setSuppliers(prev=>prev.filter(supplier=>!selectedSuppliers.includes(supplier.id)));setSelectedSuppliers([]);}}}setShowDeleteDialog(false);setDeleteDialogData(null);};const handleCancelDelete=()=>{setShowDeleteDialog(false);setDeleteDialogData(null);};// Lieferanten-Auswahlfunktionen\nconst handleSelectSupplier=supplierId=>{setSelectedSuppliers(prev=>prev.includes(supplierId)?prev.filter(id=>id!==supplierId):[...prev,supplierId]);};const handleSelectAllSuppliers=()=>{const filteredSuppliers=filteredAndSortedSuppliers();if(selectedSuppliers.length===filteredSuppliers.length){setSelectedSuppliers([]);}else{setSelectedSuppliers(filteredSuppliers.map(supplier=>supplier.id));}};const handleDeleteSuppliers=()=>{if(selectedSuppliers.length>0){// Sicherheitsabfrage bei mehr als 2 Lieferanten\nif(selectedSuppliers.length>2){setDeleteDialogData({type:'bulk',count:selectedSuppliers.length});setShowDeleteDialog(true);}else{// Direkte Löschung bei 1-2 Lieferanten\nsetSuppliers(prev=>prev.filter(supplier=>!selectedSuppliers.includes(supplier.id)));setSelectedSuppliers([]);}}};const handleDeleteSingleSupplier=(supplierId,supplierName)=>{// Direkte Löschung ohne Sicherheitsabfrage\nsetSuppliers(prev=>prev.filter(supplier=>supplier.id!==supplierId));setSelectedSuppliers(prev=>prev.filter(id=>id!==supplierId));};// Import/Export-System Hilfsfunktionen\nconst appFields=[{key:'name',label:'Artikelname'},{key:'category',label:'Kategorie'},{key:'supplier',label:'Lieferant'},{key:'supplierArticleNumber',label:'Lieferanten-Artikelnummer'},{key:'bundleUnit',label:'Gebindeeinheit'},{key:'bundlePrice',label:'Gebindepreis'},{key:'content',label:'Inhalt'},{key:'contentUnit',label:'Inhaltseinheit'},{key:'pricePerUnit',label:'Preis pro Einheit'},{key:'ingredients',label:'Inhaltsstoffe'},{key:'allergens',label:'Allergene'},{key:'calories',label:'Kalorien (kcal)'},{key:'kilojoules',label:'Kilojoule (kJ)'},{key:'protein',label:'Protein (g)'},{key:'fat',label:'Fett (g)'},{key:'carbohydrates',label:'Kohlenhydrate (g)'},{key:'fiber',label:'Ballaststoffe (g)'},{key:'sugar',label:'Zucker (g)'},{key:'salt',label:'Salz (g)'}];const getDefaultFieldMapping=headers=>{const mapping={};headers.forEach(header=>{const lowerHeader=header.toLowerCase();// Automatische Zuordnung basierend auf Schlüsselwörtern\nif(lowerHeader.includes('name')||lowerHeader.includes('artikel')){mapping[header]='name';}else if(lowerHeader.includes('kategorie')||lowerHeader.includes('category')){mapping[header]='category';}else if(lowerHeader.includes('lieferant')||lowerHeader.includes('supplier')){mapping[header]='supplier';}else if(lowerHeader.includes('nummer')||lowerHeader.includes('number')){mapping[header]='supplierArticleNumber';}else if(lowerHeader.includes('gebinde')||lowerHeader.includes('bundle')){mapping[header]='bundleUnit';}else if(lowerHeader.includes('preis')||lowerHeader.includes('price')){mapping[header]='bundlePrice';}else if(lowerHeader.includes('inhalt')||lowerHeader.includes('content')){mapping[header]='content';}else if(lowerHeader.includes('einheit')||lowerHeader.includes('unit')){mapping[header]='contentUnit';}else if(lowerHeader.includes('kalorien')||lowerHeader.includes('calories')){mapping[header]='calories';}else if(lowerHeader.includes('protein')){mapping[header]='protein';}else if(lowerHeader.includes('fett')||lowerHeader.includes('fat')){mapping[header]='fat';}else if(lowerHeader.includes('kohlenhydrate')||lowerHeader.includes('carbohydrates')){mapping[header]='carbohydrates';}});return mapping;};const handleFileUpload=event=>{var _event$target$files;const file=(_event$target$files=event.target.files)===null||_event$target$files===void 0?void 0:_event$target$files[0];if(!file)return;// Automatische Zeichenkodierung-Erkennung\nconst detectEncoding=async file=>{try{// Lese die ersten Bytes der Datei\nconst buffer=await file.slice(0,4).arrayBuffer();const bytes=new Uint8Array(buffer);// BOM (Byte Order Mark) Erkennung\nif(bytes.length>=3&&bytes[0]===0xEF&&bytes[1]===0xBB&&bytes[2]===0xBF){console.log('Detected encoding: UTF-8 with BOM');return'utf-8';}if(bytes.length>=2&&bytes[0]===0xFF&&bytes[1]===0xFE){console.log('Detected encoding: UTF-16 LE');return'utf-16le';}if(bytes.length>=2&&bytes[0]===0xFE&&bytes[1]===0xFF){console.log('Detected encoding: UTF-16 BE');return'utf-16be';}// Kein BOM gefunden, versuche verschiedene Kodierungen\nconst encodings=['utf-8','iso-8859-1','windows-1252','latin1'];for(const encoding of encodings){try{const text=await file.slice(0,1024).text();// Prüfe auf deutsche Umlaute\nif(/[äöüßÄÖÜ]/.test(text)){console.log(`Detected encoding: ${encoding} (contains German umlauts)`);return encoding;}}catch(error){continue;}}// Wenn keine Umlaute gefunden wurden, versuche eine alternative Erkennung\n// Lese die ersten Bytes und prüfe auf typische Windows-1252 Zeichen\nconst sampleBuffer=await file.slice(0,512).arrayBuffer();const sampleBytes=new Uint8Array(sampleBuffer);// Prüfe auf typische Windows-1252 Zeichen für deutsche Umlaute\nconst hasGermanChars=sampleBytes.some(byte=>byte===0xE4||byte===0xF6||byte===0xFC||byte===0xDF||// äöüß\nbyte===0xC4||byte===0xD6||byte===0xDC// ÄÖÜ\n);if(hasGermanChars){console.log('Detected encoding: windows-1252 (contains German character bytes)');return'windows-1252';}console.log('Using default encoding: UTF-8');return'utf-8';}catch(error){console.log('Error detecting encoding, using UTF-8');return'utf-8';}};// Verbesserte Kodierung-Erkennung mit manueller Byte-Konvertierung\nconst decodeWithEncoding=async(file,encoding)=>{try{const arrayBuffer=await file.arrayBuffer();const bytes=new Uint8Array(arrayBuffer);// Entferne BOM falls vorhanden\nlet startIndex=0;if(encoding==='utf-8'&&bytes.length>=3&&bytes[0]===0xEF&&bytes[1]===0xBB&&bytes[2]===0xBF){startIndex=3;}else if(encoding==='utf-16le'&&bytes.length>=2&&bytes[0]===0xFF&&bytes[1]===0xFE){startIndex=2;}else if(encoding==='utf-16be'&&bytes.length>=2&&bytes[0]===0xFE&&bytes[1]===0xFF){startIndex=2;}if(encoding==='utf-8'){// UTF-8 Dekodierung\nreturn new TextDecoder('utf-8').decode(bytes.slice(startIndex));}else if(encoding==='iso-8859-1'||encoding==='latin1'){// ISO-8859-1/Latin1 Dekodierung\nreturn new TextDecoder('iso-8859-1').decode(bytes.slice(startIndex));}else if(encoding==='windows-1252'){// Windows-1252 Dekodierung - vereinfachte Version\nlet result='';for(let i=startIndex;i<bytes.length;i++){const byte=bytes[i];if(byte<0x80){result+=String.fromCharCode(byte);}else{// Windows-1252 zu UTF-8 Konvertierung für deutsche Umlaute\nif(byte===0xE4)result+='ä';// ä\nelse if(byte===0xF6)result+='ö';// ö\nelse if(byte===0xFC)result+='ü';// ü\nelse if(byte===0xDF)result+='ß';// ß\nelse if(byte===0xC4)result+='Ä';// Ä\nelse if(byte===0xD6)result+='Ö';// Ö\nelse if(byte===0xDC)result+='Ü';// Ü\nelse if(byte===0xE1)result+='á';// á\nelse if(byte===0xE9)result+='é';// é\nelse if(byte===0xED)result+='í';// í\nelse if(byte===0xF3)result+='ó';// ó\nelse if(byte===0xFA)result+='ú';// ú\nelse if(byte===0xF1)result+='ñ';// ñ\nelse if(byte===0xE7)result+='ç';// ç\nelse if(byte===0xE0)result+='à';// à\nelse if(byte===0xE8)result+='è';// è\nelse if(byte===0xEC)result+='ì';// ì\nelse if(byte===0xF2)result+='ò';// ò\nelse if(byte===0xF9)result+='ù';// ù\nelse if(byte===0xE2)result+='â';// â\nelse if(byte===0xEA)result+='ê';// ê\nelse if(byte===0xEE)result+='î';// î\nelse if(byte===0xF4)result+='ô';// ô\nelse if(byte===0xFB)result+='û';// û\nelse if(byte===0xE3)result+='ã';// ã\nelse if(byte===0xF5)result+='õ';// õ\nelse if(byte===0xE5)result+='å';// å\nelse if(byte===0xC5)result+='Å';// Å\nelse if(byte===0xE6)result+='æ';// æ\nelse if(byte===0xC6)result+='Æ';// Æ\nelse if(byte===0xF8)result+='ø';// ø\nelse if(byte===0xD8)result+='Ø';// Ø\nelse if(byte===0xC1)result+='Á';// Á\nelse if(byte===0xC9)result+='É';// É\nelse if(byte===0xCD)result+='Í';// Í\nelse if(byte===0xD3)result+='Ó';// Ó\nelse if(byte===0xDA)result+='Ú';// Ú\nelse if(byte===0xD1)result+='Ñ';// Ñ\nelse if(byte===0xC7)result+='Ç';// Ç\nelse if(byte===0xC0)result+='À';// À\nelse if(byte===0xC8)result+='È';// È\nelse if(byte===0xCC)result+='Ì';// Ì\nelse if(byte===0xD2)result+='Ò';// Ò\nelse if(byte===0xD9)result+='Ù';// Ù\nelse if(byte===0xC2)result+='Â';// Â\nelse if(byte===0xCA)result+='Ê';// Ê\nelse if(byte===0xCE)result+='Î';// Î\nelse if(byte===0xD4)result+='Ô';// Ô\nelse if(byte===0xDB)result+='Û';// Û\nelse if(byte===0xC3)result+='Ã';// Ã\nelse if(byte===0xD5)result+='Õ';// Õ\nelse result+=String.fromCharCode(byte);}}return result;}// Fallback auf UTF-8\nreturn new TextDecoder('utf-8').decode(bytes.slice(startIndex));}catch(error){console.error('Error decoding with encoding:',encoding,error);throw error;}};const processFile=async()=>{try{const encoding=await detectEncoding(file);console.log('Processing file with encoding:',encoding);setDetectedEncoding(encoding);// Verwende die verbesserte Dekodierung\nconst content=await decodeWithEncoding(file,encoding);// Debug: Zeige die ersten 200 Zeichen des Inhalts\nconsole.log('Decoded content preview:',content.substring(0,200));console.log('Contains German umlauts:',/[äöüßÄÖÜ]/.test(content));// Automatische Erkennung des Dateiformats basierend auf Dateiendung\nif(file.name.toLowerCase().endsWith('.csv')){parseCSV(content);}else if(file.name.toLowerCase().endsWith('.json')){parseJSON(content);}else{// Fallback: Versuche CSV zu parsen, wenn es nicht funktioniert, versuche JSON\ntry{parseCSV(content);}catch(error){parseJSON(content);}}}catch(error){console.error('Error processing file:',error);setImportErrors(['Fehler beim Lesen der Datei']);}};processFile();};const parseCSV=content=>{const lines=content.split('\\n').filter(line=>line.trim());if(lines.length===0)return;// Automatische Erkennung des Trennzeichens\nconst detectDelimiter=firstLine=>{const commaCount=(firstLine.match(/,/g)||[]).length;const semicolonCount=(firstLine.match(/;/g)||[]).length;const tabCount=(firstLine.match(/\\t/g)||[]).length;console.log('Delimiter detection:',{commaCount,semicolonCount,tabCount});// Wähle das häufigste Trennzeichen\nif(semicolonCount>commaCount&&semicolonCount>tabCount){return';';}else if(tabCount>commaCount&&tabCount>semicolonCount){return'\\t';}else{return',';// Standard ist Komma\n}};const delimiter=detectDelimiter(lines[0]);console.log('Detected delimiter:',delimiter);// Verbesserte CSV-Parsing mit automatischer Trennzeichen-Erkennung\nconst parseCSVLine=(line,delim)=>{const result=[];let current='';let inQuotes=false;for(let i=0;i<line.length;i++){const char=line[i];if(char==='\"'){inQuotes=!inQuotes;}else if(char===delim&&!inQuotes){result.push(current.trim());current='';}else{current+=char;}}result.push(current.trim());return result;};const headers=parseCSVLine(lines[0],delimiter).map(h=>h.replace(/\"/g,''));const data=lines.slice(1).map(line=>{const values=parseCSVLine(line,delimiter).map(v=>v.replace(/\"/g,''));const row={};headers.forEach((header,index)=>{row[header]=values[index]||'';});return row;}).filter(row=>Object.values(row).some(val=>val!==''));// Filtere leere Zeilen\nconsole.log('CSV Headers:',headers);// Debug-Ausgabe\nconsole.log('Detected delimiter:',delimiter);setImportHeaders(headers);setImportData(data);setFieldMappings(getDefaultFieldMapping(headers));generatePreview(data,getDefaultFieldMapping(headers));};const parseJSON=content=>{try{const data=JSON.parse(content);if(Array.isArray(data)&&data.length>0){const headers=Object.keys(data[0]);console.log('JSON Headers:',headers);// Debug-Ausgabe\nsetImportHeaders(headers);setImportData(data);setFieldMappings(getDefaultFieldMapping(headers));generatePreview(data,getDefaultFieldMapping(headers));}else{setImportErrors(['JSON-Datei enthält keine gültigen Daten']);}}catch(error){console.error('JSON Parse Error:',error);setImportErrors(['Ungültiges JSON-Format']);}};const generatePreview=(data,mappings)=>{// Sammle bestehende Artikelnamen für Duplikatsprüfung\nconst existingArticleNames=articles.map(article=>article.name.toLowerCase().trim());// Sammle bestehende Lieferantennamen für Duplikatsprüfung\nconst existingSupplierNames=suppliers.map(supplier=>supplier.name.toLowerCase().trim());const preview=data.slice(0,5).map(row=>{const mappedRow={};// Sammle alle Werte\nObject.entries(mappings).forEach(_ref=>{let[fileHeader,appField]=_ref;if(row[fileHeader]!==undefined&&row[fileHeader]!==''){if(appField==='bundlePrice'||appField==='pricePerUnit'||appField==='content'){// Verwende die Hilfsfunktion für korrekte Zahlenformatierung\nmappedRow[appField]=parseNumberValue(row[fileHeader]);}else{mappedRow[appField]=row[fileHeader];}}});// Duplikatsprüfung für Vorschau\nconst articleName=mappedRow.name?mappedRow.name.toLowerCase().trim():'';if(articleName&&existingArticleNames.includes(articleName)){mappedRow.duplicateWarning='⚠️ Artikel existiert bereits';}else if(articleName===''){mappedRow.duplicateWarning='⚠️ Kein Artikelname';}// Lieferanten-Prüfung für Vorschau\nconst supplierName=mappedRow.supplier?mappedRow.supplier.toLowerCase().trim():'';if(supplierName&&!existingSupplierNames.includes(supplierName)){mappedRow.supplierWarning='🆕 Neuer Lieferant wird erstellt';}// Berechne fehlende Preise für Vorschau\nconst bundlePrice=mappedRow.bundlePrice||0;const pricePerUnit=mappedRow.pricePerUnit||0;const content=mappedRow.content||0;if(bundlePrice>0&&content>0&&pricePerUnit===0){mappedRow.calculatedPricePerUnit=bundlePrice/content;mappedRow.priceCalculationNote='Preis pro Einheit wird berechnet';}else if(bundlePrice>0&&pricePerUnit>0&&content===0){mappedRow.calculatedContent=bundlePrice/pricePerUnit;mappedRow.priceCalculationNote='Inhalt wird berechnet';}else if(pricePerUnit>0&&content>0&&bundlePrice===0){mappedRow.calculatedBundlePrice=pricePerUnit*content;mappedRow.priceCalculationNote='Gebindepreis wird berechnet';}else if(bundlePrice>0&&content>0&&pricePerUnit>0){const calculatedPricePerUnit=bundlePrice/content;const priceDifference=Math.abs(calculatedPricePerUnit-pricePerUnit);const priceDifferencePercent=priceDifference/pricePerUnit*100;if(priceDifferencePercent>5){mappedRow.priceCalculationNote=`Preisabweichung: ${priceDifferencePercent.toFixed(1)}% - Gebindepreis wird als Basis verwendet`;mappedRow.calculatedPricePerUnit=calculatedPricePerUnit;}else{mappedRow.priceCalculationNote='Preise sind konsistent';}}return mappedRow;});setImportPreview(preview);};const handleFieldMappingChange=(fileHeader,appField)=>{const newMappings={...fieldMappings};if(appField){newMappings[fileHeader]=appField;}else{delete newMappings[fileHeader];}setFieldMappings(newMappings);generatePreview(importData,newMappings);};const handleImport=()=>{// Sammle alle Artikelnamen aus bestehenden Artikeln für Duplikatsprüfung\nconst existingArticleNames=articles.map(article=>article.name.toLowerCase().trim());// Sammle alle Lieferantennamen aus bestehenden Lieferanten für Duplikatsprüfung\nconst existingSupplierNames=suppliers.map(supplier=>supplier.name.toLowerCase().trim());console.log('Existing article names for duplicate check:',existingArticleNames);console.log('Existing supplier names for duplicate check:',existingSupplierNames);// Sammle alle neuen Lieferanten, die während des Imports erstellt werden\nconst newSuppliersToAdd=[];const supplierNameToIdMap={};console.log('Starting import with existing suppliers:',suppliers.map(s=>s.name));const newArticles=importData.map((row,index)=>{const article={id:Date.now().toString()+index,name:'',category:'',supplier:'',supplierArticleNumber:'',bundleUnit:'',bundlePrice:0,bundlePriceType:'brutto',content:0,contentUnit:'',pricePerUnit:0,ingredients:[],allergens:[],nutritionInfo:{calories:0,kilojoules:0,protein:0,fat:0,carbohydrates:0,fiber:0,sugar:0,salt:0}};// Sammle alle Werte aus der Zeile\nObject.entries(fieldMappings).forEach(_ref2=>{let[fileHeader,appField]=_ref2;const value=row[fileHeader];if(value!==undefined&&value!==''){if(appField==='calories'||appField==='kilojoules'||appField==='protein'||appField==='fat'||appField==='carbohydrates'||appField==='fiber'||appField==='sugar'||appField==='salt'){article.nutritionInfo[appField]=isNaN(Number(value))?0:Number(value);}else if(appField==='ingredients'||appField==='allergens'){article[appField]=value.split(';').map(item=>item.trim()).filter(item=>item!=='');}else if(appField==='bundlePrice'||appField==='pricePerUnit'||appField==='content'){// Verwende die Hilfsfunktion für korrekte Zahlenformatierung\narticle[appField]=parseNumberValue(value);}else{article[appField]=isNaN(Number(value))?value:Number(value);}}});// Intelligente Preisberechnung\nconst bundlePrice=article.bundlePrice||0;const pricePerUnit=article.pricePerUnit||0;const content=article.content||0;console.log(`Importing article \"${article.name}\":`,{bundlePrice,pricePerUnit,content,hasBundlePrice:bundlePrice>0,hasPricePerUnit:pricePerUnit>0,hasContent:content>0});// Preisberechnung basierend auf verfügbaren Daten\nif(bundlePrice>0&&content>0){// Beide Werte vorhanden - prüfe Konsistenz\nconst calculatedPricePerUnit=bundlePrice/content;const priceDifference=Math.abs(calculatedPricePerUnit-pricePerUnit);const priceDifferencePercent=pricePerUnit>0?priceDifference/pricePerUnit*100:0;console.log(`Price calculation for \"${article.name}\":`,{calculatedPricePerUnit,importedPricePerUnit:pricePerUnit,priceDifference,priceDifferencePercent:priceDifferencePercent.toFixed(2)+'%'});if(pricePerUnit>0&&priceDifferencePercent>5){// Preis pro Einheit stimmt nicht mit Berechnung überein (>5% Abweichung)\n// Verwende Gebindepreis als Basis und berechne neu\nconsole.log(`Price mismatch detected for \"${article.name}\". Using bundle price as base.`);article.pricePerUnit=calculatedPricePerUnit;}else if(pricePerUnit===0){// Preis pro Einheit fehlt - berechne aus Gebindepreis\nconsole.log(`Missing price per unit for \"${article.name}\". Calculating from bundle price.`);article.pricePerUnit=calculatedPricePerUnit;}// Wenn beide Werte konsistent sind, behalte sie bei\n}else if(bundlePrice>0&&pricePerUnit>0&&content===0){// Gebindepreis und Preis pro Einheit vorhanden, aber Inhalt fehlt\nconst calculatedContent=bundlePrice/pricePerUnit;console.log(`Missing content for \"${article.name}\". Calculating: ${calculatedContent}`);article.content=calculatedContent;}else if(pricePerUnit>0&&content>0&&bundlePrice===0){// Preis pro Einheit und Inhalt vorhanden, aber Gebindepreis fehlt\nconst calculatedBundlePrice=pricePerUnit*content;console.log(`Missing bundle price for \"${article.name}\". Calculating: ${calculatedBundlePrice}`);article.bundlePrice=calculatedBundlePrice;}else if(bundlePrice>0&&pricePerUnit===0&&content===0){// Nur Gebindepreis vorhanden - setze Standardwerte\nconsole.log(`Only bundle price available for \"${article.name}\". Setting default content to 1.`);article.content=1;article.pricePerUnit=bundlePrice;}else if(pricePerUnit>0&&bundlePrice===0&&content===0){// Nur Preis pro Einheit vorhanden - setze Standardwerte\nconsole.log(`Only price per unit available for \"${article.name}\". Setting default content to 1.`);article.content=1;article.bundlePrice=pricePerUnit;}// Stelle sicher, dass alle Preise positive Zahlen sind\narticle.bundlePrice=Math.max(0,article.bundlePrice);article.pricePerUnit=Math.max(0,article.pricePerUnit);article.content=Math.max(0,article.content);// Lieferanten-Erstellung und -Zuordnung\nif(article.supplier&&article.supplier.trim()!==''){const supplierName=article.supplier.trim();const supplierNameLower=supplierName.toLowerCase();// Prüfe, ob Lieferant bereits in bestehenden Lieferanten existiert\nconst existingSupplier=suppliers.find(s=>s.name.toLowerCase().trim()===supplierNameLower);if(existingSupplier){// Verwende bestehenden Lieferanten\narticle.supplierId=existingSupplier.id;console.log(`Using existing supplier \"${supplierName}\" (ID: ${existingSupplier.id})`);}else{// Prüfe, ob Lieferant bereits in den neuen Lieferanten existiert\nconst existingNewSupplier=newSuppliersToAdd.find(s=>s.name.toLowerCase().trim()===supplierNameLower);if(existingNewSupplier){// Verwende bereits erstellten neuen Lieferanten\narticle.supplierId=existingNewSupplier.id;console.log(`Using already created new supplier \"${supplierName}\" (ID: ${existingNewSupplier.id})`);}else{// Erstelle neuen Lieferanten\nconst newSupplier={id:Date.now().toString()+'_supplier_'+index,name:supplierName,contactPerson:'',email:'',phoneNumbers:[],address:{street:'',zipCode:'',city:'',country:''},website:'',notes:''};console.log(`Creating new supplier \"${supplierName}\" (ID: ${newSupplier.id})`);// Füge neuen Lieferanten zur temporären Liste hinzu\nnewSuppliersToAdd.push(newSupplier);// Setze Lieferanten-ID für Artikel\narticle.supplierId=newSupplier.id;}}}console.log(`Final values for \"${article.name}\":`,{bundlePrice:article.bundlePrice,pricePerUnit:article.pricePerUnit,content:article.content,supplierId:article.supplierId});return article;});// Duplikatsprüfung und Filterung\nconst filteredArticles=newArticles.filter(article=>{const articleName=article.name.toLowerCase().trim();if(articleName===''){console.log(`Skipping article with empty name`);return false;}if(existingArticleNames.includes(articleName)){console.log(`Skipping duplicate article: \"${article.name}\" (already exists)`);return false;}console.log(`Article \"${article.name}\" is unique, will be imported`);return true;});const skippedCount=newArticles.length-filteredArticles.length;// Füge alle neuen Lieferanten auf einmal hinzu\nif(newSuppliersToAdd.length>0){setSuppliers(prev=>[...prev,...newSuppliersToAdd]);console.log(`Added ${newSuppliersToAdd.length} new suppliers:`,newSuppliersToAdd.map(s=>s.name));}if(skippedCount>0){console.log(`Import completed: ${filteredArticles.length} new articles imported, ${skippedCount} duplicates skipped, ${newSuppliersToAdd.length} new suppliers created`);}else{console.log(`Import completed: ${filteredArticles.length} new articles imported, ${newSuppliersToAdd.length} new suppliers created`);}setArticles(prev=>[...prev,...filteredArticles]);setImportResult({imported:filteredArticles.length,skipped:skippedCount,suppliersCreated:newSuppliersToAdd.length});setShowImportExportModal(false);resetImportExport();};const handleExport=()=>{const exportData=articles.map(article=>{var _article$nutritionInf,_article$nutritionInf2,_article$nutritionInf3,_article$nutritionInf4,_article$nutritionInf5,_article$nutritionInf6,_article$nutritionInf7,_article$nutritionInf8;return{'Artikelname':article.name,'Kategorie':article.category,'Lieferant':getSupplierName(article.supplierId),'Lieferanten-Artikelnummer':article.supplierArticleNumber||'','Gebindeeinheit':article.bundleUnit,'Gebindepreis':article.bundlePrice,'Inhalt':article.content,'Inhaltseinheit':article.contentUnit,'Preis pro Einheit':article.pricePerUnit,'Inhaltsstoffe':(article.ingredients||[]).join('; '),'Allergene':(article.allergens||[]).join('; '),'Kalorien (kcal)':((_article$nutritionInf=article.nutritionInfo)===null||_article$nutritionInf===void 0?void 0:_article$nutritionInf.calories)||0,'Kilojoule (kJ)':((_article$nutritionInf2=article.nutritionInfo)===null||_article$nutritionInf2===void 0?void 0:_article$nutritionInf2.kilojoules)||0,'Protein (g)':((_article$nutritionInf3=article.nutritionInfo)===null||_article$nutritionInf3===void 0?void 0:_article$nutritionInf3.protein)||0,'Fett (g)':((_article$nutritionInf4=article.nutritionInfo)===null||_article$nutritionInf4===void 0?void 0:_article$nutritionInf4.fat)||0,'Kohlenhydrate (g)':((_article$nutritionInf5=article.nutritionInfo)===null||_article$nutritionInf5===void 0?void 0:_article$nutritionInf5.carbohydrates)||0,'Ballaststoffe (g)':((_article$nutritionInf6=article.nutritionInfo)===null||_article$nutritionInf6===void 0?void 0:_article$nutritionInf6.fiber)||0,'Zucker (g)':((_article$nutritionInf7=article.nutritionInfo)===null||_article$nutritionInf7===void 0?void 0:_article$nutritionInf7.sugar)||0,'Salz (g)':((_article$nutritionInf8=article.nutritionInfo)===null||_article$nutritionInf8===void 0?void 0:_article$nutritionInf8.salt)||0};});const csvContent=[Object.keys(exportData[0]).join(','),...exportData.map(row=>Object.values(row).map(val=>`\"${val}\"`).join(','))].join('\\n');const blob=new Blob([csvContent],{type:'text/csv;charset=utf-8;'});const link=document.createElement('a');link.href=URL.createObjectURL(blob);link.download=`artikel_export_${new Date().toISOString().split('T')[0]}.csv`;link.click();};// Hilfsfunktion für Zahlenformatierung\nconst parseNumberValue=value=>{let cleanValue=String(value).replace(/[€$£¥]/g,'').trim();console.log(`Parsing number value: \"${value}\" -> \"${cleanValue}\"`);// Behandle deutsche Zahlenformatierung (Komma als Dezimaltrennzeichen)\nif(cleanValue.includes(',')&&cleanValue.includes('.')){// Sowohl Komma als auch Punkt vorhanden - Punkt ist Tausendertrennzeichen\nconst processedValue=cleanValue.replace(/\\./g,'').replace(/,/g,'.');console.log(`  Both comma and dot found: \"${cleanValue}\" -> \"${processedValue}\"`);cleanValue=processedValue;}else if(cleanValue.includes(',')){// Nur Komma vorhanden - ist Dezimaltrennzeichen\nconst processedValue=cleanValue.replace(/,/g,'.');console.log(`  Only comma found: \"${cleanValue}\" -> \"${processedValue}\"`);cleanValue=processedValue;}else{console.log(`  No comma found, keeping as is: \"${cleanValue}\"`);}const result=isNaN(Number(cleanValue))?0:Number(cleanValue);console.log(`  Final result: ${result}`);return result;};const resetImportExport=()=>{setImportData([]);setImportHeaders([]);setFieldMappings({});setImportPreview([]);setImportErrors([]);setDetectedEncoding('');setImportResult(null);};// Website-Öffnen Funktion\nconst isValidUrl=url=>{try{new URL(url);return true;}catch{return false;}};const openWebsite=url=>{if(isValidUrl(url)){window.open(url,'_blank','noopener,noreferrer');}};const formatPrice=price=>{if(price===undefined||price===null||isNaN(price)){return'€0,00';}return`€${Number(price).toFixed(2)}`;};// Konstanten für Artikelformular\nconst UNITS=['kg','g','l','ml','Stück','Packung','Kiste','Karton','Flasche','Dose','Beutel','Schachtel','Tube','Glas','Becher','Tüte','Rolle','Meter','cm','mm'];const INGREDIENTS=['Glutenhaltige Getreide (Weizen, Roggen, Gerste, Hafer, Dinkel)','Krebstiere','Eier','Fische','Erdnüsse','Sojabohnen','Milch (einschließlich Laktose)','Schalenfrüchte (Mandeln, Haselnüsse, Walnüsse, Cashewnüsse, Pistazien, Macadamianüsse, Pekannüsse)','Sellerie','Senf','Sesamsamen','Schwefeldioxid und Sulfite','Lupinen','Weichtiere'];const ALLERGENS=['A - Glutenhaltige Getreide','B - Krebstiere','C - Eier','D - Fische','E - Erdnüsse','F - Sojabohnen','G - Milch','H - Schalenfrüchte','I - Sellerie','J - Senf','K - Sesamsamen','L - Schwefeldioxid/Sulfite','M - Lupinen','N - Weichtiere'];// Umfangreicher Kategorien-Datenbestand\nconst CATEGORIES=[// Gemüse & Salate\n'Gemüse','Blattgemüse','Wurzelgemüse','Kohlgemüse','Zwiebelgemüse','Hülsenfrüchte','Tomaten','Paprika','Gurken','Auberginen','Zucchini','Kürbis','Kartoffeln','Karotten','Rote Bete','Sellerie','Pastinaken','Steckrüben','Brokkoli','Blumenkohl','Rosenkohl','Grünkohl','Weißkohl','Rotkohl','Zwiebeln','Knoblauch','Lauch','Schalotten','Frühlingszwiebeln','Salate','Kopfsalat','Eisbergsalat','Rucola','Feldsalat','Endivien','Erbsen','Bohnen','Linsen','Kichererbsen','Sojabohnen',// Obst\n'Obst','Kernobst','Steinobst','Beerenobst','Zitrusfrüchte','Exotische Früchte','Äpfel','Birnen','Quitten','Aprikosen','Pfirsiche','Nektarinen','Kirschen','Pflaumen','Zwetschgen','Mirabellen','Erdbeeren','Himbeeren','Brombeeren','Heidelbeeren','Johannisbeeren','Stachelbeeren','Orangen','Mandarinen','Zitronen','Limetten','Grapefruits','Pampelmusen','Bananen','Ananas','Mangos','Papayas','Kiwi','Passionsfrüchte',// Fleisch & Wurst\n'Fleisch','Rindfleisch','Schweinefleisch','Lammfleisch','Kalbfleisch','Geflügel','Rinderhack','Rindersteak','Rinderbraten','Rinderfilet','Rinderhüfte','Schweinehack','Schweinekotelett','Schweinebraten','Schweinefilet','Schweinebauch','Lammkotelett','Lammbraten','Lammfilet','Lammhack','Kalbskotelett','Kalbsbraten','Kalbsfilet','Kalbshack','Hähnchenbrust','Hähnchenkeule','Hähnchenflügel','Hähnchenhack','Putenbrust','Putenkeule','Entenbrust','Entenkeule','Gänsebrust','Wurst','Brühwurst','Kochwurst','Rohwurst','Kochmettwurst','Salami','Schinken','Speck','Bacon','Mortadella','Lyoner',// Fisch & Meeresfrüchte\n'Fisch','Süßwasserfisch','Salzwasserfisch','Meeresfrüchte','Lachs','Forelle','Karpfen','Zander','Hecht','Barsch','Kabeljau','Seelachs','Scholle','Heilbutt','Thunfisch','Makrele','Hering','Sardinen','Anchovis','Sardellen','Garnelen','Krabben','Hummer','Langusten','Muscheln','Austern','Miesmuscheln','Jakobsmuscheln','Tintenfisch','Kalamari',// Milchprodukte & Käse\n'Milchprodukte','Milch','Sahne','Joghurt','Quark','Butter','Vollmilch','Fettarme Milch','Magermilch','Buttermilch','Kefir','Schlagsahne','Sauerrahm','Crème fraîche','Schmand','Naturjoghurt','Fruchtjoghurt','Griechischer Joghurt','Skyr','Magerquark','Speisequark','Hüttenkäse','Ricotta','Käse','Hartkäse','Weichkäse','Schnittkäse','Frischkäse','Blauschimmelkäse','Parmesan','Pecorino','Grana Padano','Emmentaler','Gouda','Edamer','Camembert','Brie','Mozzarella','Burrata','Feta','Halloumi','Gorgonzola','Roquefort','Stilton','Gorgonzola',// Eier\n'Eier','Hühnereier','Wachteleier','Enteneier','Gänseeier','Eiklar','Eigelb','Vollei',// Getreide & Backwaren\n'Getreide','Weizen','Roggen','Dinkel','Hafer','Gerste','Reis','Weizenmehl','Roggenmehl','Dinkelmehl','Haferflocken','Hafermehl','Vollkornmehl','Type 405','Type 550','Type 1050','Type 1600','Backwaren','Brot','Brötchen','Croissants','Baguette','Ciabatta','Vollkornbrot','Roggenbrot','Dinkelbrot','Sauerteigbrot','Kuchen','Torten','Kekse','Plätzchen','Gebäck',// Nudeln & Reis\n'Nudeln','Spaghetti','Penne','Fusilli','Tagliatelle','Lasagne','Vollkornnudeln','Eiernudeln','Glutenfreie Nudeln','Reis','Basmatireis','Jasminreis','Arborioreis','Risottoreis','Vollkornreis','Wildreis','Parboiled Reis',// Öle & Fette\n'Öle & Fette','Olivenöl','Rapsöl','Sonnenblumenöl','Kokosöl','Natives Olivenöl','Olivenöl extra vergine','Kaltgepresstes Öl','Butter','Margarine','Schmalz','Gänseschmalz','Entenschmalz',// Gewürze & Kräuter\n'Gewürze','Salz','Pfeffer','Paprika','Chili','Kurkuma','Kümmel','Zimt','Muskat','Ingwer','Knoblauch','Zwiebeln','Lorbeer','Kräuter','Basilikum','Oregano','Thymian','Rosmarin','Salbei','Petersilie','Dill','Schnittlauch','Koriander','Minze','Gewürzmischungen','Curry','Garam Masala','Ras el Hanout','Za\\'atar',// Nüsse & Samen\n'Nüsse & Samen','Mandeln','Haselnüsse','Walnüsse','Cashewnüsse','Pistazien','Macadamianüsse','Pekannüsse','Paranüsse','Erdnüsse','Pinienkerne','Sonnenblumenkerne','Kürbiskerne','Sesam','Chiasamen','Leinsamen','Hanfsamen',// Konserven & Trockenprodukte\n'Konserven','Tomatenkonserven','Gemüsekonserven','Obstkonserven','Fischkonserven','Fleischkonserven','Hülsenfrüchte-Konserven','Trockenprodukte','Trockenfrüchte','Trockengemüse','Trockenpilze','Nudeln','Reis','Hülsenfrüchte','Müsli','Cerealien',// Getränke\n'Getränke','Wein','Rotwein','Weißwein','Roséwein','Sekt','Champagner','Bier','Pils','Weizenbier','Altbier','Kölsch','Stout','Spirituosen','Whisky','Wodka','Gin','Rum','Tequila','Säfte','Obstsäfte','Gemüsesäfte','Smoothies','Softdrinks','Limonaden','Cola','Fanta','Sprite',// Süßwaren & Desserts\n'Süßwaren','Schokolade','Bitterschokolade','Milchschokolade','Weiße Schokolade','Pralinen','Bonbons','Gummibärchen','Lakritz','Desserts','Eis','Pudding','Mousse','Tiramisu','Crème brûlée','Zucker','Haushaltszucker','Puderzucker','Brauner Zucker','Rohrzucker',// Backzutaten\n'Backzutaten','Hefe','Backpulver','Natron','Vanille','Vanillezucker','Kakao','Schokodrops','Rosinen','Cranberries','Nüsse','Mehl','Stärke','Gelatine','Agar-Agar','Pektin',// Fertigprodukte\n'Fertigprodukte','Fertiggerichte','Tiefkühlkost','Convenience Food','Suppen','Soßen','Dressings','Mayonnaise','Ketchup','Senf','Pestos','Hummus','Tapenade','Pâté',// Bio & Spezialitäten\n'Bio-Produkte','Vegan','Vegetarisch','Glutenfrei','Laktosefrei','Spezialitäten','Regionale Produkte','Fair Trade','Nachhaltig',// Sonstiges\n'Sonstiges','Zubehör','Verpackungen','Hygieneartikel','Reinigung'];// Artikelformular Hilfsfunktionen\nconst calculatePricePerUnit=(bundlePrice,content,isGross)=>{if(content<=0)return 0;const netPrice=isGross?bundlePrice/1.19:bundlePrice;// 19% MwSt\nreturn netPrice/content;};const handlePriceChange=(newBundlePrice,isGross)=>{const newPricePerUnit=calculatePricePerUnit(newBundlePrice,articleForm.content,isGross);setArticleForm(prev=>({...prev,bundlePrice:newBundlePrice,isGrossPrice:isGross,pricePerUnit:newPricePerUnit}));};const handleContentChange=newContent=>{const newPricePerUnit=calculatePricePerUnit(articleForm.bundlePrice,newContent,articleForm.isGrossPrice);setArticleForm(prev=>({...prev,content:newContent,pricePerUnit:newPricePerUnit}));};const handleIngredientToggle=ingredient=>{setArticleForm(prev=>({...prev,ingredients:prev.ingredients.includes(ingredient)?prev.ingredients.filter(i=>i!==ingredient):[...prev.ingredients,ingredient]}));};const handleAllergenToggle=allergen=>{setArticleForm(prev=>({...prev,allergens:prev.allergens.includes(allergen)?prev.allergens.filter(a=>a!==allergen):[...prev.allergens,allergen]}));};const resetArticleForm=()=>{setArticleForm({name:'',category:'',supplierId:'',supplierArticleNumber:'',bundlePrice:0,bundleUnit:'',content:0,contentUnit:'',pricePerUnit:0,isGrossPrice:true,ingredients:[],allergens:[],nutrition:{calories:0,kilojoules:0,protein:0,fat:0,carbohydrates:0,fiber:0,sugar:0,salt:0}});setEditingArticle(null);};const resetSupplierForm=()=>{setSupplierForm({name:'',contactPerson:'',email:'',phoneNumbers:[{type:'Geschäft',number:''}],address:{street:'',zipCode:'',city:'',country:'Deutschland'},website:'',notes:''});};const handleSaveArticle=()=>{if(editingArticle){// Artikel bearbeiten\nsetArticles(prev=>prev.map(article=>article.id===editingArticle.id?{...articleForm,id:article.id,nutritionInfo:articleForm.nutrition}:article));}else{// Neuen Artikel erstellen\nconst newArticle={...articleForm,id:Date.now().toString(),nutritionInfo:articleForm.nutrition};setArticles(prev=>[...prev,newArticle]);// Wenn das Rezept-Formular vorher geöffnet war, öffne es wieder\nif(!showRecipeForm){setTimeout(()=>{setShowRecipeForm(true);},100);}}setShowArticleForm(false);resetArticleForm();};const handleEditArticle=article=>{setEditingArticle(article);setArticleForm({name:article.name,category:article.category,supplierId:article.supplierId,supplierArticleNumber:article.supplierArticleNumber||'',bundlePrice:article.bundlePrice,bundleUnit:article.bundleUnit,content:article.content,contentUnit:article.contentUnit,pricePerUnit:article.pricePerUnit,isGrossPrice:article.isGrossPrice,ingredients:article.ingredients||[],allergens:article.allergens||[],nutrition:article.nutritionInfo||{calories:0,kilojoules:0,protein:0,fat:0,carbohydrates:0,fiber:0,sugar:0,salt:0}});setShowArticleForm(true);};// Kategorie-Autovervollständigung Hilfsfunktionen\nconst getFilteredCategories=()=>{if(!categorySearchTerm)return CATEGORIES.slice(0,10);// Zeige nur die ersten 10 wenn leer\nreturn CATEGORIES.filter(category=>category.toLowerCase().includes(categorySearchTerm.toLowerCase())).slice(0,10);// Maximal 10 Vorschläge\n};const handleCategorySelect=category=>{setArticleForm(prev=>({...prev,category}));setCategorySearchTerm('');setShowCategoryDropdown(false);};const handleCategoryInputChange=value=>{setCategorySearchTerm(value);setArticleForm(prev=>({...prev,category:value}));setShowCategoryDropdown(true);setSelectedCategoryIndex(-1);// Reset selection when typing\n};const handleCategoryInputBlur=()=>{// Verzögerung um das Klicken auf Dropdown-Items zu ermöglichen\nsetTimeout(()=>{setShowCategoryDropdown(false);setSelectedCategoryIndex(-1);},200);};const handleCategoryKeyDown=e=>{const filteredCategories=getFilteredCategories();const maxIndex=filteredCategories.length-1;const hasNewCategoryOption=categorySearchTerm&&!CATEGORIES.includes(categorySearchTerm);const totalOptions=filteredCategories.length+(hasNewCategoryOption?1:0);switch(e.key){case'ArrowDown':e.preventDefault();setSelectedCategoryIndex(prev=>{if(prev<totalOptions-1)return prev+1;return 0;// Zurück zum Anfang\n});break;case'ArrowUp':e.preventDefault();setSelectedCategoryIndex(prev=>{if(prev>0)return prev-1;return totalOptions-1;// Zum Ende\n});break;case'Enter':e.preventDefault();if(selectedCategoryIndex>=0&&selectedCategoryIndex<filteredCategories.length){handleCategorySelect(filteredCategories[selectedCategoryIndex]);}else if(selectedCategoryIndex===filteredCategories.length&&hasNewCategoryOption){handleCategorySelect(categorySearchTerm);}else if(categorySearchTerm){// Wenn nichts ausgewählt ist, aber Text eingegeben wurde, verwende den Text\nhandleCategorySelect(categorySearchTerm);}break;case'Escape':e.preventDefault();setShowCategoryDropdown(false);setSelectedCategoryIndex(-1);break;case'Tab':// Tab schließt das Dropdown\nsetShowCategoryDropdown(false);setSelectedCategoryIndex(-1);break;}};const resetCategorySelection=()=>{setSelectedCategoryIndex(-1);};// Lieferanten-Autovervollständigung Hilfsfunktionen\nconst getFilteredSuppliers=()=>{if(!supplierSearchTerm)return suppliers.slice(0,10);return suppliers.filter(supplier=>supplier.name.toLowerCase().includes(supplierSearchTerm.toLowerCase())||supplier.contactPerson.toLowerCase().includes(supplierSearchTerm.toLowerCase())).slice(0,10);};const handleSupplierSelect=supplier=>{setArticleForm(prev=>({...prev,supplierId:supplier.id}));setSupplierSearchTerm('');setShowSupplierDropdown(false);setSelectedSupplierIndex(-1);};const handleSupplierInputChange=value=>{setSupplierSearchTerm(value);setShowSupplierDropdown(true);setSelectedSupplierIndex(-1);};const handleSupplierInputBlur=()=>{setTimeout(()=>{setShowSupplierDropdown(false);setSelectedSupplierIndex(-1);},200);};const handleSupplierKeyDown=e=>{const filteredSuppliers=getFilteredSuppliers();const hasNewSupplierOption=supplierSearchTerm&&!suppliers.some(s=>s.name.toLowerCase()===supplierSearchTerm.toLowerCase());const totalOptions=filteredSuppliers.length+(hasNewSupplierOption?1:0);switch(e.key){case'ArrowDown':e.preventDefault();setSelectedSupplierIndex(prev=>{if(prev<totalOptions-1)return prev+1;return 0;});break;case'ArrowUp':e.preventDefault();setSelectedSupplierIndex(prev=>{if(prev>0)return prev-1;return totalOptions-1;});break;case'Enter':e.preventDefault();if(selectedSupplierIndex>=0&&selectedSupplierIndex<filteredSuppliers.length){handleSupplierSelect(filteredSuppliers[selectedSupplierIndex]);}else if(selectedSupplierIndex===filteredSuppliers.length&&hasNewSupplierOption){handleNewSupplier();}else if(supplierSearchTerm){handleNewSupplier();}break;case'Escape':e.preventDefault();setShowSupplierDropdown(false);setSelectedSupplierIndex(-1);break;case'Tab':setShowSupplierDropdown(false);setSelectedSupplierIndex(-1);break;}};const handleEditSupplier=supplier=>{setEditingSupplier(supplier);setSupplierForm({name:supplier.name,contactPerson:supplier.contactPerson||'',email:supplier.email||'',phoneNumbers:supplier.phoneNumbers||[{type:'Geschäft',number:''}],address:supplier.address||{street:'',zipCode:'',city:'',country:'Deutschland'},website:supplier.website||'',notes:supplier.notes||''});setShowSupplierForm(true);};const handleNewSupplier=()=>{setEditingSupplier(null);setSupplierForm(prev=>({...prev,name:supplierSearchTerm}));setShowSupplierForm(true);setShowSupplierDropdown(false);setSelectedSupplierIndex(-1);};// Rezept-Formular Hilfsfunktionen\nconst resetRecipeForm=()=>{setRecipeForm({name:'',description:'',image:null,portions:4,preparationTime:30,difficulty:3,energy:0,materialCosts:0,markupPercentage:300,vatRate:19,sellingPrice:0,ingredients:[{id:Date.now().toString(),name:'',amount:0,unit:'g',price:0}],preparationSteps:[{id:Date.now().toString(),order:1,description:''}]});};const calculateMaterialCosts=()=>{return recipeForm.ingredients.reduce((sum,ingredient)=>sum+ingredient.price,0);};const handleMarkupChange=newMarkup=>{// Bei Aufschlag-Änderung wird der Verkaufspreis neu berechnet\nconst materialCosts=calculateMaterialCosts();const costsPerPortion=materialCosts/recipeForm.portions;const netPrice=costsPerPortion*(newMarkup/100);const newSellingPrice=calculateGrossPrice(netPrice,recipeForm.vatRate);const roundedSellingPrice=Math.round(newSellingPrice*100)/100;setRecipeForm(prev=>({...prev,markupPercentage:newMarkup,sellingPrice:roundedSellingPrice}));// Aktualisiere auch sellingPriceInput sofort\nsetSellingPriceInput(roundedSellingPrice.toFixed(2));};const handleSellingPriceChange=newSellingPrice=>{// Bei Verkaufspreis-Änderung wird der Aufschlag neu berechnet\nsetRecipeForm(prev=>({...prev,sellingPrice:newSellingPrice}));// Aufschlag wird automatisch durch calculateAllValues() berechnet\nsetTimeout(()=>{const values=calculateAllValues();setRecipeForm(prev=>({...prev,markupPercentage:values.markup}));},0);};const calculateGrossProfit=()=>{const costsPerPortion=calculateMaterialCosts()/recipeForm.portions;const vatAmount=recipeForm.sellingPrice-calculateNetPrice(recipeForm.sellingPrice,recipeForm.vatRate);return recipeForm.sellingPrice-costsPerPortion-vatAmount;};// Zentrale Berechnungsroutine für alle Kalkulationswerte\n// Verkaufspreis ist die Basis, Aufschlag wird nur daraus berechnet\nconst calculateAllValues=()=>{const materialCosts=calculateMaterialCosts();const costsPerPortion=materialCosts/recipeForm.portions;const netSellingPrice=calculateNetPrice(recipeForm.sellingPrice,recipeForm.vatRate);const vatAmount=recipeForm.sellingPrice-netSellingPrice;const grossProfit=recipeForm.sellingPrice-costsPerPortion-vatAmount;// Aufschlag wird aus Verkaufspreis berechnet: (Nettopreis / Kosten/Portion) * 100\nconst markup=costsPerPortion>0?Math.round(netSellingPrice/costsPerPortion*100):0;return{materialCosts,costsPerPortion,netSellingPrice,vatAmount,grossProfit,markup,sellingPrice:Math.round(recipeForm.sellingPrice*100)/100// Auf 2 Stellen runden\n};};// Hilfsfunktionen für Inhaltsstoffe und Allergene\nconst getRecipeIngredients=()=>{const ingredients=new Set();recipeForm.ingredients.forEach(ingredient=>{if(ingredient.name&&ingredient.name.trim()!==''){const article=articles.find(a=>a.name===ingredient.name);if(article&&article.ingredients){article.ingredients.forEach(ing=>ingredients.add(ing));}}});return Array.from(ingredients).sort();};const getRecipeAllergens=()=>{const allergens=new Set();recipeForm.ingredients.forEach(ingredient=>{if(ingredient.name&&ingredient.name.trim()!==''){const article=articles.find(a=>a.name===ingredient.name);if(article&&article.allergens){article.allergens.forEach(allergen=>allergens.add(allergen));}}});return Array.from(allergens).sort();};// Hilfsfunktionen für Nährwerte\nconst calculateRecipeNutrition=()=>{let totalNutrition={calories:0,kilojoules:0,protein:0,fat:0,carbohydrates:0,fiber:0,sugar:0,salt:0};recipeForm.ingredients.forEach(ingredient=>{if(ingredient.name&&ingredient.name.trim()!==''&&ingredient.amount>0){const article=articles.find(a=>a.name===ingredient.name);if(article&&article.nutritionInfo){// Berechne Anteil basierend auf Menge (pro 100g)\nconst ratio=ingredient.amount/100;totalNutrition.calories+=(article.nutritionInfo.calories||0)*ratio;totalNutrition.kilojoules+=(article.nutritionInfo.kilojoules||0)*ratio;totalNutrition.protein+=(article.nutritionInfo.protein||0)*ratio;totalNutrition.fat+=(article.nutritionInfo.fat||0)*ratio;totalNutrition.carbohydrates+=(article.nutritionInfo.carbohydrates||0)*ratio;totalNutrition.fiber+=(article.nutritionInfo.fiber||0)*ratio;totalNutrition.sugar+=(article.nutritionInfo.sugar||0)*ratio;totalNutrition.salt+=(article.nutritionInfo.salt||0)*ratio;}}});return{calories:Math.round(totalNutrition.calories),kilojoules:Math.round(totalNutrition.kilojoules*10)/10,protein:Math.round(totalNutrition.protein*10)/10,fat:Math.round(totalNutrition.fat*10)/10,carbohydrates:Math.round(totalNutrition.carbohydrates*10)/10,fiber:Math.round(totalNutrition.fiber*10)/10,sugar:Math.round(totalNutrition.sugar*10)/10,salt:Math.round(totalNutrition.salt*100)/100};};const getFilteredIngredients=()=>{if(!ingredientSearchTerm)return articles.slice(0,10);return articles.filter(article=>article.name.toLowerCase().includes(ingredientSearchTerm.toLowerCase())).slice(0,10);};const handleIngredientSelect=(article,ingredientIndex)=>{setRecipeForm(prev=>{const updatedIngredients=prev.ingredients.map((ing,i)=>i===ingredientIndex?{...ing,name:article.name,unit:article.contentUnit,price:0}:ing);// Prüfen, ob eine neue leere Zeile hinzugefügt werden soll\nconst shouldAddNewLine=ingredientIndex===prev.ingredients.length-1&&prev.ingredients[prev.ingredients.length-1].name==='';if(shouldAddNewLine){updatedIngredients.push({id:Date.now().toString(),name:'',amount:0,unit:'g',price:0});}return{...prev,ingredients:updatedIngredients};});setIngredientSearchTerm('');setShowIngredientDropdown(false);setSelectedIngredientIndex(-1);setDropdownSelectionIndex(-1);setDropdownPosition({top:0,left:0});// Neuberechnung basierend auf aktuellem Verkaufspreis\nsetTimeout(()=>{const values=calculateAllValues();setRecipeForm(prev=>({...prev,markupPercentage:values.markup}));},0);};const calculateIngredientPrice=ingredient=>{const article=articles.find(a=>a.name===ingredient.name);if(article&&ingredient.amount>0){return article.pricePerUnit*ingredient.amount;}return ingredient.price||0;};const handleIngredientInputChange=(value,ingredientIndex)=>{setRecipeForm(prev=>({...prev,ingredients:prev.ingredients.map((ing,i)=>i===ingredientIndex?{...ing,name:value}:ing)}));setIngredientSearchTerm(value);setShowIngredientDropdown(true);setSelectedIngredientIndex(ingredientIndex);setDropdownSelectionIndex(-1);// Position des Dropdowns aktualisieren\nconst inputElement=document.querySelector(`input[data-ingredient-index=\"${ingredientIndex}\"]`);if(inputElement){const rect=inputElement.getBoundingClientRect();setDropdownPosition({top:rect.bottom,left:rect.left});}};const handleIngredientInputBlur=()=>{// Verzögerung erhöhen und prüfen, ob das Dropdown noch relevant ist\nsetTimeout(()=>{// Nur schließen, wenn kein Fokus mehr auf dem Input oder Dropdown ist\nconst activeElement=document.activeElement;const isDropdownActive=activeElement&&(activeElement.closest('.dropdown-item')||activeElement.closest('[data-ingredient-index]'));if(!isDropdownActive){setShowIngredientDropdown(false);setSelectedIngredientIndex(-1);setDropdownSelectionIndex(-1);setDropdownPosition({top:0,left:0});}},300);};const handleIngredientKeyDown=(e,ingredientIndex)=>{const filteredIngredients=getFilteredIngredients();const hasNewArticleOption=ingredientSearchTerm&&!articles.some(a=>a.name===ingredientSearchTerm);const totalOptions=filteredIngredients.length+(hasNewArticleOption?1:0);switch(e.key){case'ArrowDown':e.preventDefault();setDropdownSelectionIndex(prev=>{if(prev<totalOptions-1)return prev+1;return 0;});break;case'ArrowUp':e.preventDefault();setDropdownSelectionIndex(prev=>{if(prev>0)return prev-1;return totalOptions-1;});break;case'Enter':e.preventDefault();if(dropdownSelectionIndex>=0&&dropdownSelectionIndex<filteredIngredients.length){handleIngredientSelect(filteredIngredients[dropdownSelectionIndex],ingredientIndex);}else if(dropdownSelectionIndex===filteredIngredients.length&&hasNewArticleOption){handleCreateNewArticle(ingredientSearchTerm,ingredientIndex);}else if(ingredientSearchTerm){handleCreateNewArticle(ingredientSearchTerm,ingredientIndex);}break;case'Escape':e.preventDefault();setShowIngredientDropdown(false);setDropdownSelectionIndex(-1);setDropdownPosition({top:0,left:0});break;case'Tab':setShowIngredientDropdown(false);setDropdownSelectionIndex(-1);setDropdownPosition({top:0,left:0});break;}};const handleCreateNewArticle=(articleName,ingredientIndex)=>{setShowRecipeForm(false);resetArticleForm();setArticleForm(prev=>({...prev,name:articleName}));setShowArticleForm(true);setRecipeForm(prev=>({...prev,ingredients:prev.ingredients.map((ing,i)=>i===ingredientIndex?{...ing,name:articleName}:ing)}));setIngredientSearchTerm('');setShowIngredientDropdown(false);setSelectedIngredientIndex(-1);setDropdownSelectionIndex(-1);setDropdownPosition({top:0,left:0});// Neuberechnung basierend auf aktuellem Verkaufspreis\nsetTimeout(()=>{const values=calculateAllValues();setRecipeForm(prev=>({...prev,markupPercentage:values.markup}));},0);};const handleIngredientFocus=ingredientIndex=>{setSelectedIngredientIndex(ingredientIndex);setIngredientSearchTerm(recipeForm.ingredients[ingredientIndex].name);setShowIngredientDropdown(true);setDropdownSelectionIndex(-1);// Position des Dropdowns sofort berechnen\nconst inputElement=document.querySelector(`input[data-ingredient-index=\"${ingredientIndex}\"]`);if(inputElement){const rect=inputElement.getBoundingClientRect();setDropdownPosition({top:rect.bottom,left:rect.left});}};const handleEditIngredient=ingredientIndex=>{// Artikel zum Bearbeiten im Artikelformular öffnen\nconst ingredient=recipeForm.ingredients[ingredientIndex];// Finde den Artikel basierend auf dem Namen\nconst articleToEdit=articles.find(article=>article.name===ingredient.name);if(articleToEdit){// Artikelformular mit den Daten des zu bearbeitenden Artikels öffnen\nsetArticleForm({name:articleToEdit.name,category:articleToEdit.category,supplierId:articleToEdit.supplierId,supplierArticleNumber:articleToEdit.supplierArticleNumber,bundlePrice:articleToEdit.bundlePrice,bundleUnit:articleToEdit.bundleUnit,content:articleToEdit.content,contentUnit:articleToEdit.contentUnit,pricePerUnit:articleToEdit.pricePerUnit,isGrossPrice:articleToEdit.isGrossPrice,ingredients:articleToEdit.ingredients,allergens:articleToEdit.allergens,nutrition:articleToEdit.nutritionInfo});setEditingArticle(articleToEdit);setShowArticleForm(true);setShowRecipeForm(false);}else{// Falls kein Artikel gefunden wird, zeige eine Meldung\nalert('Artikel nicht gefunden. Bitte wählen Sie zuerst einen Artikel aus.');}};const addIngredient=()=>{setRecipeForm(prev=>({...prev,ingredients:[...prev.ingredients,{id:Date.now().toString(),name:'',amount:0,unit:'g',price:0}]}));// Fokus auf die neue Zutat setzen\nsetTimeout(()=>{const newIndex=recipeForm.ingredients.length;const inputElement=document.querySelector(`input[data-ingredient-index=\"${newIndex}\"]`);if(inputElement){inputElement.focus();}},100);};const removeIngredient=index=>{setRecipeForm(prev=>({...prev,ingredients:prev.ingredients.filter((_,i)=>i!==index)}));// Neuberechnung basierend auf aktuellem Verkaufspreis\nsetTimeout(()=>{const values=calculateAllValues();setRecipeForm(prev=>({...prev,markupPercentage:values.markup}));},0);};const addPreparationStep=()=>{setRecipeForm(prev=>({...prev,preparationSteps:[...prev.preparationSteps,{id:Date.now().toString(),order:prev.preparationSteps.length+1,description:''}]}));};const handlePreparationStepChange=(index,description)=>{setRecipeForm(prev=>{const updatedSteps=prev.preparationSteps.map((step,i)=>i===index?{...step,description}:step);// Wenn der letzte Schritt ausgefüllt wird, füge eine neue leere Zeile hinzu\nif(index===updatedSteps.length-1&&description.trim()!==''){updatedSteps.push({id:Date.now().toString(),order:updatedSteps.length+1,description:''});}return{...prev,preparationSteps:updatedSteps};});};const handleRecipeImageUpload=event=>{var _event$target$files2;const file=(_event$target$files2=event.target.files)===null||_event$target$files2===void 0?void 0:_event$target$files2[0];if(file){// Prüfe ob es ein Bild ist\nif(file.type.startsWith('image/')){setRecipeForm(prev=>({...prev,image:file}));}else{alert('Bitte wählen Sie eine Bilddatei aus.');}}};const removePreparationStep=index=>{setRecipeForm(prev=>{const updatedSteps=prev.preparationSteps.filter((_,i)=>i!==index);// Wenn nach dem Löschen keine leere Zeile am Ende ist, füge eine hinzu\nif(updatedSteps.length>0&&updatedSteps[updatedSteps.length-1].description.trim()!==''){updatedSteps.push({id:Date.now().toString(),order:updatedSteps.length+1,description:''});}return{...prev,preparationSteps:updatedSteps};});};const handleSaveRecipe=()=>{// Entferne leere Zubereitungsschritte vor dem Speichern\nconst cleanedPreparationSteps=recipeForm.preparationSteps.filter(step=>step.description.trim()!=='').map((step,index)=>({...step,order:index+1}));if(editingRecipe){// Rezept bearbeiten\n// Hier würde die Logik für das Bearbeiten implementiert\nsetEditingRecipe(null);}else{// Neues Rezept erstellen\nconst newRecipe={...recipeForm,preparationSteps:cleanedPreparationSteps,id:Date.now().toString(),materialCosts:calculateMaterialCosts(),createdAt:new Date(),updatedAt:new Date()};// Hier würde das Rezept gespeichert werden\nconsole.log('Neues Rezept:',newRecipe);}setShowRecipeForm(false);resetRecipeForm();};const handleSaveSupplier=()=>{if(editingSupplier){// Lieferant bearbeiten\nsetSuppliers(prev=>prev.map(supplier=>supplier.id===editingSupplier.id?{...supplierForm,id:supplier.id}:supplier));setEditingSupplier(null);}else{// Neuen Lieferanten erstellen\nconst newSupplier={...supplierForm,id:Date.now().toString()};setSuppliers(prev=>[...prev,newSupplier]);setArticleForm(prev=>({...prev,supplierId:newSupplier.id}));}setShowSupplierForm(false);resetSupplierForm();};const addPhoneNumber=()=>{setSupplierForm(prev=>({...prev,phoneNumbers:[...prev.phoneNumbers,{type:'Geschäft',number:''}]}));};const removePhoneNumber=index=>{setSupplierForm(prev=>({...prev,phoneNumbers:prev.phoneNumbers.filter((_,i)=>i!==index)}));};const updatePhoneNumber=(index,field,value)=>{setSupplierForm(prev=>({...prev,phoneNumbers:prev.phoneNumbers.map((phone,i)=>i===index?{...phone,[field]:value}:phone)}));};// Preisumrechnung Hilfsfunktionen\nconst calculateGrossPrice=(netPrice,vatRate)=>{return netPrice*(1+vatRate/100);};const calculateNetPrice=(grossPrice,vatRate)=>{return grossPrice/(1+vatRate/100);};const handleApplyGrossPrice=()=>{const grossPrice=calculateGrossPrice(articleForm.bundlePrice,selectedVatRate);setArticleForm(prev=>({...prev,bundlePrice:grossPrice}));setShowPriceConverter(false);};const handleApplyNetPrice=()=>{const netPrice=calculateNetPrice(articleForm.bundlePrice,selectedVatRate);setArticleForm(prev=>({...prev,bundlePrice:netPrice}));setShowPriceConverter(false);};// State für unformatierte Eingabewerte\nconst[bundlePriceInput,setBundlePriceInput]=useState('');const[contentInput,setContentInput]=useState('');// State für Inhaltsstoffe-Dropdown\nconst[showIngredientsDropdown,setShowIngredientsDropdown]=useState(false);// State für Allergene-Dropdown\nconst[showAllergensDropdown,setShowAllergensDropdown]=useState(false);// State für eigenen Sicherheits-Dialog\nconst[showDeleteDialog,setShowDeleteDialog]=useState(false);const[deleteDialogData,setDeleteDialogData]=useState(null);// State für Lieferanten-Bearbeitung\nconst[editingSupplier,setEditingSupplier]=useState(null);// State für Rezept-Formular\nconst[showRecipeForm,setShowRecipeForm]=useState(false);const[editingRecipe,setEditingRecipe]=useState(null);const[recipeForm,setRecipeForm]=useState({name:'',description:'',image:null,portions:4,preparationTime:30,difficulty:3,energy:0,materialCosts:0,markupPercentage:300,vatRate:19,sellingPrice:0,ingredients:[{id:Date.now().toString(),name:'',amount:0,unit:'g',price:0}],preparationSteps:[{id:Date.now().toString(),order:1,description:''}]});// Nach dem useState für recipeForm:\nconst[sellingPriceInput,setSellingPriceInput]=useState(recipeForm.sellingPrice.toFixed(2));const[activeTab,setActiveTab]=useState('kalkulation');// State für Zutat-Autovervollständigung\nconst[ingredientSearchTerm,setIngredientSearchTerm]=useState('');const[showIngredientDropdown,setShowIngredientDropdown]=useState(false);const[selectedIngredientIndex,setSelectedIngredientIndex]=useState(-1);const[dropdownSelectionIndex,setDropdownSelectionIndex]=useState(-1);const[dropdownPosition,setDropdownPosition]=useState({top:0,left:0});// State für Import/Export-System\nconst[showImportExportModal,setShowImportExportModal]=useState(false);const[importData,setImportData]=useState([]);const[importHeaders,setImportHeaders]=useState([]);const[fieldMappings,setFieldMappings]=useState({});const[importPreview,setImportPreview]=useState([]);const[importErrors,setImportErrors]=useState([]);const[detectedEncoding,setDetectedEncoding]=useState('');const[importResult,setImportResult]=useState(null);// Ref für automatischen Fokus auf Artikelname-Feld\nconst articleNameInputRef=useRef(null);// Automatischer Fokus auf Artikelname-Feld wenn Modal geöffnet wird\nuseEffect(()=>{if(showArticleForm&&articleNameInputRef.current){// Kurze Verzögerung um sicherzustellen, dass das Modal vollständig gerendert ist\nsetTimeout(()=>{var _articleNameInputRef$,_articleNameInputRef$2;(_articleNameInputRef$=articleNameInputRef.current)===null||_articleNameInputRef$===void 0?void 0:_articleNameInputRef$.focus();// Optional: Text markieren für einfache Überschreibung\n(_articleNameInputRef$2=articleNameInputRef.current)===null||_articleNameInputRef$2===void 0?void 0:_articleNameInputRef$2.select();},100);}},[showArticleForm]);// Einheiten-Autocomplete Hilfsfunktionen\nconst getFilteredBundleUnits=()=>{return UNITS.filter(unit=>unit.toLowerCase().includes(bundleUnitSearchTerm.toLowerCase()));};const handleBundleUnitSelect=unit=>{setArticleForm(prev=>({...prev,bundleUnit:unit}));setBundleUnitSearchTerm('');setShowBundleUnitDropdown(false);setSelectedBundleUnitIndex(-1);};const handleBundleUnitInputChange=value=>{setBundleUnitSearchTerm(value);setArticleForm(prev=>({...prev,bundleUnit:value}));setShowBundleUnitDropdown(true);setSelectedBundleUnitIndex(-1);};const handleBundleUnitInputBlur=()=>{setTimeout(()=>setShowBundleUnitDropdown(false),200);};const handleBundleUnitKeyDown=e=>{const filteredUnits=getFilteredBundleUnits();switch(e.key){case'ArrowDown':e.preventDefault();setSelectedBundleUnitIndex(prev=>prev<filteredUnits.length-1?prev+1:prev);break;case'ArrowUp':e.preventDefault();setSelectedBundleUnitIndex(prev=>prev>0?prev-1:-1);break;case'Enter':e.preventDefault();if(selectedBundleUnitIndex>=0&&selectedBundleUnitIndex<filteredUnits.length){handleBundleUnitSelect(filteredUnits[selectedBundleUnitIndex]);}else if(bundleUnitSearchTerm&&!UNITS.includes(bundleUnitSearchTerm)){handleBundleUnitSelect(bundleUnitSearchTerm);}break;case'Escape':setShowBundleUnitDropdown(false);setSelectedBundleUnitIndex(-1);break;case'Tab':if(selectedBundleUnitIndex>=0&&selectedBundleUnitIndex<filteredUnits.length){handleBundleUnitSelect(filteredUnits[selectedBundleUnitIndex]);}break;}};const getFilteredContentUnits=()=>{return UNITS.filter(unit=>unit.toLowerCase().includes(contentUnitSearchTerm.toLowerCase()));};const handleContentUnitSelect=unit=>{setArticleForm(prev=>({...prev,contentUnit:unit}));setContentUnitSearchTerm('');setShowContentUnitDropdown(false);setSelectedContentUnitIndex(-1);};const handleContentUnitInputChange=value=>{setContentUnitSearchTerm(value);setArticleForm(prev=>({...prev,contentUnit:value}));setShowContentUnitDropdown(true);setSelectedContentUnitIndex(-1);};const handleContentUnitInputBlur=()=>{setTimeout(()=>setShowContentUnitDropdown(false),200);};const handleContentUnitKeyDown=e=>{const filteredUnits=getFilteredContentUnits();switch(e.key){case'ArrowDown':e.preventDefault();setSelectedContentUnitIndex(prev=>prev<filteredUnits.length-1?prev+1:prev);break;case'ArrowUp':e.preventDefault();setSelectedContentUnitIndex(prev=>prev>0?prev-1:-1);break;case'Enter':e.preventDefault();if(selectedContentUnitIndex>=0&&selectedContentUnitIndex<filteredUnits.length){handleContentUnitSelect(filteredUnits[selectedContentUnitIndex]);}else if(contentUnitSearchTerm&&!UNITS.includes(contentUnitSearchTerm)){handleContentUnitSelect(contentUnitSearchTerm);}break;case'Escape':setShowContentUnitDropdown(false);setSelectedContentUnitIndex(-1);break;case'Tab':if(selectedContentUnitIndex>=0&&selectedContentUnitIndex<filteredUnits.length){handleContentUnitSelect(filteredUnits[selectedContentUnitIndex]);}break;}};// Hilfsfunktionen für Dropdowns\nconst formatIngredientsDisplay=ingredients=>{return ingredients.length>0?ingredients.join(', '):'Keine ausgewählt';};const formatAllergensDisplay=allergens=>{return allergens.length>0?allergens.join(', '):'Keine ausgewählt';};const handleIngredientsDropdownToggle=()=>{setShowIngredientsDropdown(!showIngredientsDropdown);};const handleAllergensDropdownToggle=()=>{setShowAllergensDropdown(!showAllergensDropdown);};// Hilfsfunktion für Kalorien-zu-kJoule Umrechnung\nconst calculateKilojoules=calories=>{return Math.round(calories*4.184*100)/100;// Auf 2 Nachkommastellen gerundet\n};// Click-Outside-Handler für Dropdowns\nuseEffect(()=>{const handleClickOutside=event=>{const target=event.target;if(!target.closest('.ingredients-dropdown-container')){setShowIngredientsDropdown(false);}if(!target.closest('.allergens-dropdown-container')){setShowAllergensDropdown(false);}};if(showIngredientsDropdown||showAllergensDropdown){document.addEventListener('mousedown',handleClickOutside);}return()=>{document.removeEventListener('mousedown',handleClickOutside);};},[showIngredientsDropdown,showAllergensDropdown]);const renderPage=()=>{const colors=getCurrentColors();switch(currentPage){case'dashboard':// Berechne den Gesamtwert aller Artikel\nconst totalValue=articles.reduce((sum,article)=>sum+article.bundlePrice,0);return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid p-4\",children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.paper||colors.card,borderRadius:'12px',boxShadow:colors.paperShadow||'0 4px 12px rgba(0,0,0,0.1)',padding:'2rem',minHeight:'calc(100vh - 120px)',border:`1px solid ${colors.cardBorder}`},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:colors.text,margin:0},children:\"Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary btn-sm\",onClick:()=>{resetArticleForm();setShowArticleForm(true);},style:{borderColor:colors.accent,color:colors.accent},children:[/*#__PURE__*/_jsx(FaPlus,{className:\"me-1\"}),\"Neuer Artikel\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary btn-sm\",onClick:()=>{resetRecipeForm();setShowRecipeForm(true);},style:{borderColor:colors.accent,color:colors.accent},children:[/*#__PURE__*/_jsx(FaPlus,{className:\"me-1\"}),\"Neues Rezept\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",style:{backgroundColor:colors.card,borderColor:colors.cardBorder,boxShadow:'0 2px 8px rgba(0,0,0,0.08)',borderRadius:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:60,height:60,backgroundColor:colors.accent,borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',margin:'0 auto 1rem',color:'white',fontSize:'1.5rem'},children:\"\\uD83D\\uDCE6\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",style:{color:colors.text},children:\"Artikel\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",style:{color:colors.accent,fontSize:'2.5rem',fontWeight:'bold',margin:0},children:articles.length}),/*#__PURE__*/_jsx(\"small\",{style:{color:colors.text},children:\"Verf\\xFCgbare Artikel\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",style:{backgroundColor:colors.card,borderColor:colors.cardBorder,boxShadow:'0 2px 8px rgba(0,0,0,0.08)',borderRadius:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:60,height:60,backgroundColor:colors.accent,borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',margin:'0 auto 1rem',color:'white',fontSize:'1.5rem'},children:\"\\uD83D\\uDC65\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",style:{color:colors.text},children:\"Lieferanten\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",style:{color:colors.accent,fontSize:'2.5rem',fontWeight:'bold',margin:0},children:\"3\"}),/*#__PURE__*/_jsx(\"small\",{style:{color:colors.text},children:\"Aktive Partner\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",style:{backgroundColor:colors.card,borderColor:colors.cardBorder,boxShadow:'0 2px 8px rgba(0,0,0,0.08)',borderRadius:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:60,height:60,backgroundColor:colors.accent,borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',margin:'0 auto 1rem',color:'white',fontSize:'1.5rem'},children:\"\\uD83C\\uDFF7\\uFE0F\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",style:{color:colors.text},children:\"Kategorien\"}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",style:{color:colors.accent,fontSize:'2.5rem',fontWeight:'bold',margin:0},children:getUsedCategories().length}),/*#__PURE__*/_jsx(\"small\",{style:{color:colors.text},children:\"Verwendete Kategorien\"})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3 mb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",style:{backgroundColor:colors.card,borderColor:colors.cardBorder,boxShadow:'0 2px 8px rgba(0,0,0,0.08)',borderRadius:'8px'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:60,height:60,backgroundColor:colors.accent,borderRadius:'50%',display:'flex',alignItems:'center',justifyContent:'center',margin:'0 auto 1rem',color:'white',fontSize:'1.5rem'},children:\"\\uD83D\\uDCB0\"}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",style:{color:colors.text},children:\"Gesamtwert\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text\",style:{color:colors.accent,fontSize:'2.5rem',fontWeight:'bold',margin:0},children:[\"\\u20AC\",totalValue.toFixed(2)]}),/*#__PURE__*/_jsx(\"small\",{style:{color:colors.text},children:\"Lagerwert\"})]})})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"row mt-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsx(\"h3\",{style:{color:colors.text,marginBottom:'1rem'},children:\"Schnellzugriff\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-3\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary w-100 p-3\",onClick:()=>{resetArticleForm();setShowArticleForm(true);},style:{borderColor:colors.accent,color:colors.accent,borderRadius:'8px'},children:[/*#__PURE__*/_jsx(FaPlus,{className:\"me-2\"}),\"Neuen Artikel anlegen\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-3\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary w-100 p-3\",onClick:()=>{resetRecipeForm();setShowRecipeForm(true);},style:{borderColor:colors.accent,color:colors.accent,borderRadius:'8px'},children:[/*#__PURE__*/_jsx(FaPlus,{className:\"me-2\"}),\"Neues Rezept erstellen\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-3\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary w-100 p-3\",onClick:()=>setCurrentPage('artikel'),style:{borderColor:colors.accent,color:colors.accent,borderRadius:'8px'},children:[/*#__PURE__*/_jsx(FaSearch,{className:\"me-2\"}),\"Artikel durchsuchen\"]})})]})]})})]})});case'kalkulation':return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid p-4\",children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.paper||colors.card,borderRadius:'12px',boxShadow:colors.paperShadow||'0 4px 12px rgba(0,0,0,0.1)',padding:'2rem',minHeight:'calc(100vh - 120px)',border:`1px solid ${colors.cardBorder}`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex mb-4\",style:{borderBottom:`2px solid ${colors.accent}`},children:[{key:'kalkulation',label:'Kalkulation'},{key:'inhaltsangaben',label:'Inhaltsangaben'},{key:'naehrwerte',label:'Nährwerte'}].map(tab=>/*#__PURE__*/_jsx(\"div\",{className:\"flex-fill text-center\",style:{cursor:'pointer',fontWeight:activeTab===tab.key?'bold':'normal',color:activeTab===tab.key?colors.accent:colors.text,borderBottom:activeTab===tab.key?`2px solid ${colors.accent}`:'none',padding:'0.5rem 0'},onClick:()=>setActiveTab(tab.key),children:tab.label},tab.key))}),activeTab==='kalkulation'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:colors.text},children:\"Kalkulation\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:colors.text},children:\"Hier k\\xF6nnen Sie zwischen Rezepten, Artikeln und Lieferanten wechseln.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mt-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-3\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary w-100 p-3\",onClick:()=>setCurrentPage('rezepte'),style:{borderColor:colors.accent,color:colors.accent,borderRadius:'8px'},children:[/*#__PURE__*/_jsx(FaUtensils,{className:\"me-2\"}),\"Rezepte verwalten\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-3\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary w-100 p-3\",onClick:()=>setCurrentPage('artikel'),style:{borderColor:colors.accent,color:colors.accent,borderRadius:'8px'},children:[/*#__PURE__*/_jsx(FaBoxes,{className:\"me-2\"}),\"Artikel verwalten\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 mb-3\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-primary w-100 p-3\",onClick:()=>setCurrentPage('lieferanten'),style:{borderColor:colors.accent,color:colors.accent,borderRadius:'8px'},children:[/*#__PURE__*/_jsx(FaUsers,{className:\"me-2\"}),\"Lieferanten verwalten\"]})})]})]}),activeTab==='inhaltsangaben'&&/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Inhaltsstoffe\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:getRecipeIngredients().join(', '),readOnly:true,rows:8,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card,resize:'none'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Allergene\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:getRecipeAllergens().join(', '),readOnly:true,rows:8,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card,resize:'none'}})]})]}),activeTab==='naehrwerte'&&/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Energie (kcal)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().calories,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Energie (kJ)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().kilojoules,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Fett (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().fat,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Kohlenhydrate (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().carbohydrates,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Eiwei\\xDF (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().protein,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Ballaststoffe (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().fiber,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Zucker (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().sugar,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Salz (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().salt,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]})]})]})})]})});case'artikel':const filteredArticles=filteredAndSortedArticles();const categories=getUsedCategories();const suppliers=getUniqueSuppliers();return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid p-4\",children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.paper||colors.card,borderRadius:'12px',boxShadow:colors.paperShadow||'0 4px 12px rgba(0,0,0,0.1)',padding:'2rem',minHeight:'calc(100vh - 120px)',border:`1px solid ${colors.cardBorder}`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:/*#__PURE__*/_jsx(\"h1\",{style:{color:colors.text,margin:0},children:\"Artikelverwaltung\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",style:{backgroundColor:colors.secondary,borderColor:colors.cardBorder,color:colors.text},children:/*#__PURE__*/_jsx(FaSearch,{})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Artikel suchen...\",value:searchTerm,onChange:e=>setSearchTerm(e.target.value),style:{borderColor:colors.cardBorder,color:colors.text}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",style:{backgroundColor:colors.accent,borderColor:colors.accent,color:'white'},title:\"Neuer Artikel\",onClick:()=>{resetArticleForm();setShowArticleForm(true);},children:/*#__PURE__*/_jsx(FaPlus,{})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group w-100\",role:\"group\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:`btn ${viewMode==='list'?'btn-primary':'btn-outline-secondary'}`,onClick:()=>setViewMode('list'),style:{backgroundColor:viewMode==='list'?colors.accent:'transparent',borderColor:colors.cardBorder,color:viewMode==='list'?'white':colors.text},children:[/*#__PURE__*/_jsx(FaList,{className:\"me-1\"}),\"Liste\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:`btn ${viewMode==='grid'?'btn-primary':'btn-outline-secondary'}`,onClick:()=>setViewMode('grid'),style:{backgroundColor:viewMode==='grid'?colors.accent:'transparent',borderColor:colors.cardBorder,color:viewMode==='grid'?'white':colors.text},children:[/*#__PURE__*/_jsx(FaTh,{className:\"me-1\"}),\"Kacheln\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-outline-primary w-100\",onClick:()=>setShowImportExportModal(true),style:{borderColor:colors.accent,color:colors.accent},children:[/*#__PURE__*/_jsx(FaSave,{className:\"me-1\"}),\"Import/Export\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:selectedCategory,onChange:e=>setSelectedCategory(e.target.value),style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Alle Kategorien\"}),categories.map(category=>/*#__PURE__*/_jsx(\"option\",{value:category,children:category},category))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:selectedSupplier,onChange:e=>setSelectedSupplier(e.target.value),style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Alle Lieferanten\"}),suppliers.map(supplier=>/*#__PURE__*/_jsx(\"option\",{value:supplier,children:supplier},supplier))]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:sortField,onChange:e=>setSortField(e.target.value),style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(\"option\",{value:\"name\",children:\"Artikel\"}),/*#__PURE__*/_jsx(\"option\",{value:\"supplier\",children:\"Lieferant\"}),/*#__PURE__*/_jsx(\"option\",{value:\"category\",children:\"Kategorie\"}),/*#__PURE__*/_jsx(\"option\",{value:\"bundlePrice\",children:\"Gebindepreis\"}),/*#__PURE__*/_jsx(\"option\",{value:\"pricePerUnit\",children:\"Preis/Einheit\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary w-100\",onClick:()=>setSortDirection(sortDirection==='asc'?'desc':'asc'),style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(FaSort,{className:\"me-1\"}),sortDirection==='asc'?'Aufsteigend':'Absteigend']})})]}),selectedArticles.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning mb-3\",style:{backgroundColor:colors.secondary,borderColor:colors.cardBorder,color:colors.text},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[selectedArticles.length,\" Artikel ausgew\\xE4hlt\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-danger btn-sm\",onClick:handleDeleteArticles,children:[/*#__PURE__*/_jsx(FaTrash,{className:\"me-1\"}),\"L\\xF6schen\"]})]})}),viewMode==='list'?/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover\",style:{backgroundColor:colors.card,borderColor:colors.cardBorder},children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:colors.secondary},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedArticles.length===filteredArticles.length&&filteredArticles.length>0,onChange:handleSelectAll,style:{accentColor:colors.accent}})}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Artikel\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Lieferant\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Gebindepreis\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Inhalt\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Preis/Einheit\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Aktionen\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredArticles.map(article=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderColor:colors.cardBorder,cursor:'pointer'},onDoubleClick:()=>handleEditArticle(article),title:\"Doppelklick zum Bearbeiten\",children:[/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder},children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedArticles.includes(article.id),onChange:()=>handleSelectArticle(article.id),style:{accentColor:colors.accent}})}),/*#__PURE__*/_jsxs(\"td\",{style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(\"strong\",{children:article.name}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{style:{color:colors.accent},children:article.category})]}),/*#__PURE__*/_jsxs(\"td\",{style:{borderColor:colors.cardBorder,color:colors.text},children:[getSupplierName(article.supplierId),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{style:{color:colors.accent},children:article.supplierArticleNumber||'Keine Artikelnummer'})]}),/*#__PURE__*/_jsxs(\"td\",{style:{borderColor:colors.cardBorder,color:colors.text},children:[formatPrice(article.bundlePrice),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{style:{color:colors.accent},children:[\"pro \",article.bundleUnit]})]}),/*#__PURE__*/_jsxs(\"td\",{style:{borderColor:colors.cardBorder,color:colors.text},children:[article.content,\" \",article.contentUnit]}),/*#__PURE__*/_jsxs(\"td\",{style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(\"strong\",{children:formatPrice(article.pricePerUnit)}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{style:{color:colors.accent},children:[\"pro \",article.contentUnit]})]}),/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",title:\"Bearbeiten\",style:{color:colors.accent,textDecoration:'none',fontSize:'14px'},onClick:()=>handleEditArticle(article),children:/*#__PURE__*/_jsx(FaPencilAlt,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",title:\"L\\xF6schen\",style:{color:'#dc3545',textDecoration:'none',fontSize:'14px'},onClick:()=>handleDeleteSingleArticle(article.id,article.name),children:/*#__PURE__*/_jsx(FaClose,{})})]})})]},article.id))})]})}):/*#__PURE__*//* Kachel-Ansicht */_jsx(\"div\",{className:\"row\",children:filteredArticles.map(article=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 col-lg-3 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",style:{backgroundColor:colors.card,borderColor:colors.cardBorder,boxShadow:'0 2px 8px rgba(0,0,0,0.08)',cursor:'pointer'},onDoubleClick:()=>handleEditArticle(article),title:\"Doppelklick zum Bearbeiten\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedArticles.includes(article.id),onChange:()=>handleSelectArticle(article.id),style:{accentColor:colors.accent}}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",title:\"Bearbeiten\",style:{color:colors.accent,textDecoration:'none',fontSize:'12px'},onClick:()=>handleEditArticle(article),children:/*#__PURE__*/_jsx(FaPencilAlt,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",title:\"L\\xF6schen\",style:{color:'#dc3545',textDecoration:'none',fontSize:'12px'},onClick:()=>handleDeleteSingleArticle(article.id,article.name),children:/*#__PURE__*/_jsx(FaClose,{})})]})]}),/*#__PURE__*/_jsx(\"h6\",{className:\"card-title\",style:{color:colors.text},children:article.name}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text small\",style:{color:colors.accent},children:article.category}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"small\",{style:{color:colors.text},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Lieferant:\"}),\" \",getSupplierName(article.supplierId)]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"small\",{style:{color:colors.accent},children:article.supplierArticleNumber||'Keine Artikelnummer'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-2\",children:[/*#__PURE__*/_jsxs(\"small\",{style:{color:colors.text},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Gebindepreis:\"}),\" \",formatPrice(article.bundlePrice)]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"small\",{style:{color:colors.accent},children:[\"pro \",article.bundleUnit]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-2\",children:/*#__PURE__*/_jsxs(\"small\",{style:{color:colors.text},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Inhalt:\"}),\" \",article.content,\" \",article.contentUnit]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"strong\",{style:{color:colors.accent},children:[formatPrice(article.pricePerUnit),\" pro \",article.contentUnit]})})]})})},article.id))}),filteredArticles.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(FaBoxes,{style:{fontSize:'3rem',color:colors.accent,marginBottom:'1rem'}}),/*#__PURE__*/_jsx(\"h5\",{style:{color:colors.text},children:\"Keine Artikel gefunden\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:colors.text},children:searchTerm||selectedCategory||selectedSupplier?'Versuchen Sie andere Suchkriterien oder Filter.':'Erstellen Sie Ihren ersten Artikel mit dem \"Neuer Artikel\" Button.'})]})]})});case'lieferanten':const filteredSuppliers=filteredAndSortedSuppliers();return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid p-4\",children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.paper||colors.card,borderRadius:'12px',boxShadow:colors.paperShadow||'0 4px 12px rgba(0,0,0,0.1)',padding:'2rem',minHeight:'calc(100vh - 120px)',border:`1px solid ${colors.cardBorder}`},children:[/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-between align-items-center mb-4\",children:/*#__PURE__*/_jsx(\"h1\",{style:{color:colors.text,margin:0},children:\"Lieferantenverwaltung\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",style:{backgroundColor:colors.secondary,borderColor:colors.cardBorder,color:colors.text},children:/*#__PURE__*/_jsx(FaSearch,{})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Lieferanten suchen...\",value:supplierSearchTerm,onChange:e=>setSupplierSearchTerm(e.target.value),style:{borderColor:colors.cardBorder,color:colors.text}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",style:{backgroundColor:colors.accent,borderColor:colors.accent,color:'white'},title:\"Neuer Lieferant\",onClick:()=>{resetSupplierForm();setShowSupplierForm(true);},children:/*#__PURE__*/_jsx(FaPlus,{})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group w-100\",role:\"group\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:`btn ${supplierViewMode==='list'?'btn-primary':'btn-outline-secondary'}`,onClick:()=>setSupplierViewMode('list'),style:{backgroundColor:supplierViewMode==='list'?colors.accent:'transparent',borderColor:colors.cardBorder,color:supplierViewMode==='list'?'white':colors.text},children:[/*#__PURE__*/_jsx(FaList,{className:\"me-1\"}),\"Liste\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:`btn ${supplierViewMode==='grid'?'btn-primary':'btn-outline-secondary'}`,onClick:()=>setSupplierViewMode('grid'),style:{backgroundColor:supplierViewMode==='grid'?colors.accent:'transparent',borderColor:colors.cardBorder,color:supplierViewMode==='grid'?'white':colors.text},children:[/*#__PURE__*/_jsx(FaTh,{className:\"me-1\"}),\"Kacheln\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:supplierSortField,onChange:e=>setSupplierSortField(e.target.value),style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(\"option\",{value:\"name\",children:\"Name\"}),/*#__PURE__*/_jsx(\"option\",{value:\"contactPerson\",children:\"Kontaktperson\"}),/*#__PURE__*/_jsx(\"option\",{value:\"email\",children:\"E-Mail\"}),/*#__PURE__*/_jsx(\"option\",{value:\"address.city\",children:\"Stadt\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-outline-secondary w-100\",onClick:()=>setSupplierSortDirection(supplierSortDirection==='asc'?'desc':'asc'),style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(FaSort,{className:\"me-1\"}),supplierSortDirection==='asc'?'Aufsteigend':'Absteigend']})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 text-end\",children:/*#__PURE__*/_jsxs(\"span\",{style:{color:colors.text},children:[filteredSuppliers.length,\" Lieferant\",filteredSuppliers.length!==1?'en':'',\" gefunden\"]})})]}),selectedSuppliers.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning mb-3\",style:{backgroundColor:colors.secondary,borderColor:colors.cardBorder,color:colors.text},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[selectedSuppliers.length,\" Lieferant\",selectedSuppliers.length!==1?'en':'',\" ausgew\\xE4hlt\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-danger btn-sm\",onClick:handleDeleteSuppliers,children:[/*#__PURE__*/_jsx(FaTrash,{className:\"me-1\"}),\"L\\xF6schen\"]})]})}),supplierViewMode==='list'?/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-hover\",style:{backgroundColor:colors.card,borderColor:colors.cardBorder},children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:colors.secondary},children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedSuppliers.length===filteredSuppliers.length&&filteredSuppliers.length>0,onChange:handleSelectAllSuppliers,style:{accentColor:colors.accent}})}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Kontaktperson\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"E-Mail\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Telefon\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Stadt\"}),/*#__PURE__*/_jsx(\"th\",{style:{borderColor:colors.cardBorder,color:colors.text},children:\"Aktionen\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:filteredSuppliers.map(supplier=>/*#__PURE__*/_jsxs(\"tr\",{onDoubleClick:()=>handleEditSupplier(supplier),style:{borderColor:colors.cardBorder,cursor:'pointer',backgroundColor:selectedSuppliers.includes(supplier.id)?colors.accent+'20':'transparent'},children:[/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder},children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedSuppliers.includes(supplier.id),onChange:()=>handleSelectSupplier(supplier.id),style:{accentColor:colors.accent}})}),/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder,fontWeight:'bold'},children:supplier.name}),/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder},children:supplier.contactPerson}),/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder},children:supplier.email}),/*#__PURE__*/_jsxs(\"td\",{style:{borderColor:colors.cardBorder},children:[supplier.phoneNumbers.length>0?supplier.phoneNumbers[0].number:'-',supplier.phoneNumbers.length>1&&/*#__PURE__*/_jsxs(\"span\",{style:{color:colors.accent},children:[\" (+\",supplier.phoneNumbers.length-1,\")\"]})]}),/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder},children:supplier.address.city}),/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",title:\"Bearbeiten\",style:{color:colors.accent,textDecoration:'none',fontSize:'12px'},onClick:e=>{e.stopPropagation();handleEditSupplier(supplier);},children:/*#__PURE__*/_jsx(FaPencilAlt,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",title:\"L\\xF6schen\",style:{color:'#dc3545',textDecoration:'none',fontSize:'12px'},onClick:e=>{e.stopPropagation();handleDeleteSingleSupplier(supplier.id,supplier.name);},children:/*#__PURE__*/_jsx(FaClose,{})})]})})]},supplier.id))})]})}):/*#__PURE__*//* Lieferanten-Kacheln */_jsx(\"div\",{className:\"row\",children:filteredSuppliers.map(supplier=>/*#__PURE__*/_jsx(\"div\",{className:\"col-md-4 col-lg-3 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card h-100\",onDoubleClick:()=>handleEditSupplier(supplier),style:{backgroundColor:colors.card,borderColor:colors.cardBorder,boxShadow:'0 2px 8px rgba(0,0,0,0.08)',cursor:'pointer'},title:\"Doppelklick zum Bearbeiten\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-start mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedSuppliers.includes(supplier.id),onChange:()=>handleSelectSupplier(supplier.id),style:{accentColor:colors.accent}}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",title:\"Bearbeiten\",style:{color:colors.accent,textDecoration:'none',fontSize:'12px'},onClick:e=>{e.stopPropagation();handleEditSupplier(supplier);},children:/*#__PURE__*/_jsx(FaPencilAlt,{})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",title:\"L\\xF6schen\",style:{color:'#dc3545',textDecoration:'none',fontSize:'12px'},onClick:e=>{e.stopPropagation();handleDeleteSingleSupplier(supplier.id,supplier.name);},children:/*#__PURE__*/_jsx(FaClose,{})})]})]}),/*#__PURE__*/_jsx(\"h6\",{className:\"card-title\",style:{color:colors.text,fontWeight:'bold'},children:supplier.name}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text mb-1\",style:{color:colors.text,fontSize:'0.9rem'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Kontakt:\"}),\" \",supplier.contactPerson]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text mb-1\",style:{color:colors.text,fontSize:'0.9rem'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"E-Mail:\"}),\" \",supplier.email]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text mb-1\",style:{color:colors.text,fontSize:'0.9rem'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Telefon:\"}),\" \",supplier.phoneNumbers.length>0?supplier.phoneNumbers[0].number:'-',supplier.phoneNumbers.length>1&&/*#__PURE__*/_jsxs(\"span\",{style:{color:colors.accent},children:[\" (+\",supplier.phoneNumbers.length-1,\")\"]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text mb-2\",style:{color:colors.text,fontSize:'0.9rem'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Stadt:\"}),\" \",supplier.address.city]}),supplier.notes&&/*#__PURE__*/_jsx(\"p\",{className:\"card-text\",style:{color:colors.text,fontSize:'0.8rem',fontStyle:'italic'},children:supplier.notes})]})})},supplier.id))}),filteredSuppliers.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-5\",children:[/*#__PURE__*/_jsx(FaUsers,{style:{fontSize:'3rem',color:colors.accent,marginBottom:'1rem'}}),/*#__PURE__*/_jsx(\"h5\",{style:{color:colors.text},children:\"Keine Lieferanten gefunden\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:colors.text},children:supplierSearchTerm?'Versuchen Sie andere Suchkriterien.':'Erstellen Sie Ihren ersten Lieferanten mit dem \"Neuer Lieferant\" Button.'})]})]})});case'rezepte':return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid p-4\",children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.paper||colors.card,borderRadius:'12px',boxShadow:colors.paperShadow||'0 4px 12px rgba(0,0,0,0.1)',padding:'2rem',minHeight:'calc(100vh - 120px)',border:`1px solid ${colors.cardBorder}`},children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:colors.text},children:\"Rezeptverwaltung\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:colors.text},children:\"Hier k\\xF6nnen sp\\xE4ter Rezepte verwaltet werden.\"})]})});case'einkauf':return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid p-4\",children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.paper||colors.card,borderRadius:'12px',boxShadow:colors.paperShadow||'0 4px 12px rgba(0,0,0,0.1)',padding:'2rem',minHeight:'calc(100vh - 120px)',border:`1px solid ${colors.cardBorder}`},children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:colors.text},children:\"Einkauf\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:colors.text},children:\"Hier k\\xF6nnen sp\\xE4ter Einkaufsfunktionen genutzt werden.\"})]})});case'inventur':return/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid p-4\",children:/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.paper||colors.card,borderRadius:'12px',boxShadow:colors.paperShadow||'0 4px 12px rgba(0,0,0,0.1)',padding:'2rem',minHeight:'calc(100vh - 120px)',border:`1px solid ${colors.cardBorder}`},children:[/*#__PURE__*/_jsx(\"h1\",{style:{color:colors.text},children:\"Inventur\"}),/*#__PURE__*/_jsx(\"p\",{style:{color:colors.text},children:\"Hier k\\xF6nnen sp\\xE4ter Inventurfunktionen genutzt werden.\"})]})});default:return null;}};const colors=getCurrentColors();return/*#__PURE__*/_jsxs(\"div\",{style:{backgroundColor:colors.background,minHeight:'100vh'},children:[/*#__PURE__*/_jsx(\"style\",{children:`\n          .sidebar-icon {\n            display: block !important;\n            visibility: visible !important;\n            opacity: 1 !important;\n            font-size: 18px !important;\n            font-weight: bold !important;\n          }\n          .sidebar-button {\n            display: flex !important;\n            align-items: center !important;\n            justify-content: flex-start !important;\n            min-height: 48px !important;\n            width: 100% !important;\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          .sidebar-button span {\n            display: block !important;\n            visibility: visible !important;\n            opacity: 1 !important;\n          }\n          .nav-link {\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          .btn-link {\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          .sidebar-sub-button {\n            display: flex !important;\n            align-items: center !important;\n            justify-content: flex-start !important;\n            width: 100% !important;\n            margin: 0 !important;\n            padding: 0 !important;\n            border: none !important;\n            background: none !important;\n            color: inherit !important;\n            text-decoration: none !important;\n          }\n        `}),/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-dark fixed-top\",style:{backgroundColor:colors.primary,boxShadow:'0 2px 8px rgba(0,0,0,0.1)',zIndex:1030},children:[/*#__PURE__*/_jsx(\"button\",{onClick:toggleSidebar,style:{color:'white',background:'none',border:'none',fontSize:'24px',cursor:'pointer',padding:'8px',borderRadius:'4px',display:'flex',alignItems:'center',justifyContent:'center',minWidth:'40px',minHeight:'40px'},children:/*#__PURE__*/_jsx(FaBars,{})}),/*#__PURE__*/_jsxs(\"span\",{className:\"navbar-brand mx-auto d-flex align-items-center\",children:[/*#__PURE__*/_jsx(FaUtensils,{className:\"me-2\",style:{fontSize:'20px'}}),\"The Chef's Numbers\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowDesignSelector(!showDesignSelector),title:\"Design \\xE4ndern\",style:{color:'white',background:'none',border:'none',fontSize:'20px',cursor:'pointer',padding:'8px',borderRadius:'4px',display:'flex',alignItems:'center',justifyContent:'center',minWidth:'40px',minHeight:'40px'},children:/*#__PURE__*/_jsx(FaPalette,{})})]}),showDesignSelector&&/*#__PURE__*/_jsx(\"div\",{className:\"position-fixed top-0 start-0 w-100 h-100\",style:{background:'rgba(0,0,0,0.5)',zIndex:3000,top:56},children:/*#__PURE__*/_jsx(\"div\",{className:\"container mt-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-md-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{backgroundColor:colors.card},children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header\",style:{backgroundColor:colors.secondary},children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",style:{color:colors.text},children:\"Design ausw\\xE4hlen\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:Object.entries(designTemplates).map(_ref3=>{let[key,template]=_ref3;return/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6 mb-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card cursor-pointer\",style:{backgroundColor:template.colors.card,border:currentDesign===key?`3px solid ${template.colors.accent}`:`1px solid ${template.colors.cardBorder}`,cursor:'pointer'},onClick:()=>{setCurrentDesign(key);setShowDesignSelector(false);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"card-title\",style:{color:template.colors.text},children:template.name}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text small\",style:{color:template.colors.text},children:template.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,backgroundColor:template.colors.primary,borderRadius:'50%'}}),/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,backgroundColor:template.colors.accent,borderRadius:'50%'}}),/*#__PURE__*/_jsx(\"div\",{style:{width:20,height:20,backgroundColor:template.colors.secondary,borderRadius:'50%'}})]})]})})},key);})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-3\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setShowDesignSelector(false),children:\"Schlie\\xDFen\"})})]})]})})})})}),showArticleForm&&/*#__PURE__*/_jsx(\"div\",{className:\"position-fixed top-0 start-0 w-100 h-100\",style:{background:'rgba(0,0,0,0.5)',zIndex:3000,top:56},children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid h-100 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-xl-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{backgroundColor:colors.card,maxHeight:'calc(100vh - 120px)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header d-flex justify-content-between align-items-center\",style:{backgroundColor:colors.secondary},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",style:{color:colors.text},children:editingArticle?'Artikel bearbeiten':'Neuer Artikel'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",onClick:()=>{setShowArticleForm(false);resetArticleForm();},style:{color:colors.text,textDecoration:'none'},children:/*#__PURE__*/_jsx(FaClose,{})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",style:{overflowY:'auto',maxHeight:'calc(100vh - 180px)',paddingBottom:'0',borderBottom:'none'},children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Grunddaten\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Artikelname *\"}),/*#__PURE__*/_jsx(\"input\",{ref:articleNameInputRef,type:\"text\",className:\"form-control\",value:articleForm.name,onChange:e=>setArticleForm(prev=>({...prev,name:e.target.value})),style:{borderColor:colors.cardBorder,color:colors.text},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Kategorie\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:articleForm.category,onChange:e=>handleCategoryInputChange(e.target.value),onFocus:()=>setShowCategoryDropdown(true),onBlur:handleCategoryInputBlur,onKeyDown:handleCategoryKeyDown,placeholder:\"Kategorie ausw\\xE4hlen oder eingeben...\",style:{borderColor:colors.cardBorder,color:colors.text}}),showCategoryDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"position-absolute w-100\",style:{top:'100%',left:0,zIndex:1000,maxHeight:'200px',overflowY:'auto',backgroundColor:colors.card,border:`1px solid ${colors.cardBorder}`,borderRadius:'0 0 0.375rem 0.375rem',boxShadow:'0 4px 12px rgba(0,0,0,0.15)'},children:[getFilteredCategories().length>0?getFilteredCategories().map((category,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2 cursor-pointer\",onClick:()=>handleCategorySelect(category),style:{color:colors.text,borderBottom:`1px solid ${colors.cardBorder}`,cursor:'pointer',backgroundColor:selectedCategoryIndex===index?colors.accent+'20':'transparent'},onMouseEnter:e=>{if(selectedCategoryIndex!==index){e.currentTarget.style.backgroundColor=colors.secondary;}setSelectedCategoryIndex(index);},onMouseLeave:e=>{if(selectedCategoryIndex!==index){e.currentTarget.style.backgroundColor='transparent';}},children:category},category)):/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2\",style:{color:colors.text,fontStyle:'italic'},children:\"Keine Kategorie gefunden\"}),categorySearchTerm&&!CATEGORIES.includes(categorySearchTerm)&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-2 cursor-pointer\",onClick:()=>handleCategorySelect(categorySearchTerm),style:{color:colors.accent,borderTop:`2px solid ${colors.accent}`,borderBottom:`1px solid ${colors.cardBorder}`,cursor:'pointer',fontWeight:'bold',backgroundColor:selectedCategoryIndex===getFilteredCategories().length?colors.accent+'20':'transparent'},onMouseEnter:e=>{if(selectedCategoryIndex!==getFilteredCategories().length){e.currentTarget.style.backgroundColor=colors.secondary;}setSelectedCategoryIndex(getFilteredCategories().length);},onMouseLeave:e=>{if(selectedCategoryIndex!==getFilteredCategories().length){e.currentTarget.style.backgroundColor='transparent';}},children:[\"\\\"\",categorySearchTerm,\"\\\" als neue Kategorie hinzuf\\xFCgen\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Lieferant\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:articleForm.supplierId?getSupplierName(articleForm.supplierId):'',onChange:e=>handleSupplierInputChange(e.target.value),onFocus:()=>setShowSupplierDropdown(true),onBlur:handleSupplierInputBlur,onKeyDown:handleSupplierKeyDown,placeholder:\"Lieferant ausw\\xE4hlen oder eingeben...\",style:{borderColor:colors.cardBorder,color:colors.text}}),showSupplierDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"position-absolute w-100\",style:{top:'100%',left:0,zIndex:1000,maxHeight:'200px',overflowY:'auto',backgroundColor:colors.card,border:`1px solid ${colors.cardBorder}`,borderRadius:'0 0 0.375rem 0.375rem',boxShadow:'0 4px 12px rgba(0,0,0,0.15)'},children:[getFilteredSuppliers().length>0?getFilteredSuppliers().map((supplier,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-2 cursor-pointer\",onClick:()=>handleSupplierSelect(supplier),style:{color:colors.text,borderBottom:`1px solid ${colors.cardBorder}`,cursor:'pointer',backgroundColor:selectedSupplierIndex===index?colors.accent+'20':'transparent'},onMouseEnter:e=>{if(selectedSupplierIndex!==index){e.currentTarget.style.backgroundColor=colors.secondary;}setSelectedSupplierIndex(index);},onMouseLeave:e=>{if(selectedSupplierIndex!==index){e.currentTarget.style.backgroundColor='transparent';}},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontWeight:'bold'},children:supplier.name}),/*#__PURE__*/_jsx(\"small\",{style:{color:colors.accent},children:supplier.contactPerson})]},supplier.id)):/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2\",style:{color:colors.text,fontStyle:'italic'},children:\"Kein Lieferant gefunden\"}),supplierSearchTerm&&!suppliers.some(s=>s.name.toLowerCase()===supplierSearchTerm.toLowerCase())&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-2 cursor-pointer\",onClick:()=>handleNewSupplier(),style:{color:colors.accent,borderTop:`2px solid ${colors.accent}`,borderBottom:`1px solid ${colors.cardBorder}`,cursor:'pointer',fontWeight:'bold',backgroundColor:selectedSupplierIndex===getFilteredSuppliers().length?colors.accent+'20':'transparent'},onMouseEnter:e=>{if(selectedSupplierIndex!==getFilteredSuppliers().length){e.currentTarget.style.backgroundColor=colors.secondary;}setSelectedSupplierIndex(getFilteredSuppliers().length);},onMouseLeave:e=>{if(selectedSupplierIndex!==getFilteredSuppliers().length){e.currentTarget.style.backgroundColor='transparent';}},children:[\"\\\"\",supplierSearchTerm,\"\\\" als neuen Lieferanten anlegen\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Lieferanten-Artikelnummer\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:articleForm.supplierArticleNumber,onChange:e=>setArticleForm(prev=>({...prev,supplierArticleNumber:e.target.value})),style:{borderColor:colors.cardBorder,color:colors.text}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Preise und Einheiten\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Gebindeeinheit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:articleForm.bundleUnit,onChange:e=>handleBundleUnitInputChange(e.target.value),onFocus:()=>setShowBundleUnitDropdown(true),onBlur:handleBundleUnitInputBlur,onKeyDown:handleBundleUnitKeyDown,placeholder:\"Einheit ausw\\xE4hlen oder eingeben...\",style:{borderColor:colors.cardBorder,color:colors.text}}),showBundleUnitDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"position-absolute w-100\",style:{top:'100%',left:0,zIndex:1000,maxHeight:'200px',overflowY:'auto',backgroundColor:colors.card,border:`1px solid ${colors.cardBorder}`,borderRadius:'0 0 0.375rem 0.375rem',boxShadow:'0 4px 12px rgba(0,0,0,0.15)'},children:[getFilteredBundleUnits().length>0?getFilteredBundleUnits().map((unit,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2 cursor-pointer\",onClick:()=>handleBundleUnitSelect(unit),style:{color:colors.text,borderBottom:`1px solid ${colors.cardBorder}`,cursor:'pointer',backgroundColor:selectedBundleUnitIndex===index?colors.accent+'20':'transparent'},onMouseEnter:e=>{if(selectedBundleUnitIndex!==index){e.currentTarget.style.backgroundColor=colors.secondary;}setSelectedBundleUnitIndex(index);},onMouseLeave:e=>{if(selectedBundleUnitIndex!==index){e.currentTarget.style.backgroundColor='transparent';}},children:unit},unit)):/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2\",style:{color:colors.text,fontStyle:'italic'},children:\"Keine Einheit gefunden\"}),bundleUnitSearchTerm&&!UNITS.includes(bundleUnitSearchTerm)&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-2 cursor-pointer\",onClick:()=>handleBundleUnitSelect(bundleUnitSearchTerm),style:{color:colors.accent,borderTop:`2px solid ${colors.accent}`,borderBottom:`1px solid ${colors.cardBorder}`,cursor:'pointer',fontWeight:'bold',backgroundColor:selectedBundleUnitIndex===getFilteredBundleUnits().length?colors.accent+'20':'transparent'},onMouseEnter:e=>{if(selectedBundleUnitIndex!==getFilteredBundleUnits().length){e.currentTarget.style.backgroundColor=colors.secondary;}setSelectedBundleUnitIndex(getFilteredBundleUnits().length);},onMouseLeave:e=>{if(selectedBundleUnitIndex!==getFilteredBundleUnits().length){e.currentTarget.style.backgroundColor='transparent';}},children:[\"\\\"\",bundleUnitSearchTerm,\"\\\" hinzuf\\xFCgen\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Gebindepreis *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",className:\"form-control\",value:bundlePriceInput||articleForm.bundlePrice,onChange:e=>{const value=parseFloat(e.target.value.replace(',','.'))||0;setBundlePriceInput(e.target.value);setArticleForm(prev=>({...prev,bundlePrice:value}));// Sofortige Berechnung bei Pfeiltasten\nsetArticleForm(prev=>({...prev,pricePerUnit:calculatePricePerUnit(value,prev.content,prev.isGrossPrice)}));},onFocus:e=>{e.target.select();setBundlePriceInput(articleForm.bundlePrice.toString());},onBlur:e=>{const value=parseFloat(e.target.value.replace(',','.'))||0;setBundlePriceInput('');setArticleForm(prev=>({...prev,bundlePrice:value,pricePerUnit:calculatePricePerUnit(value,prev.content,prev.isGrossPrice)}));},style:{borderColor:colors.cardBorder,color:colors.text},required:true}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",style:{backgroundColor:colors.secondary,borderColor:colors.cardBorder,color:colors.text},children:/*#__PURE__*/_jsx(FaEuroSign,{})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-secondary\",onClick:()=>setShowPriceConverter(true),style:{borderColor:colors.cardBorder,color:colors.text},title:\"Preis umrechnen\",children:/*#__PURE__*/_jsx(FaCalculator,{})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Inhalt *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",className:\"form-control\",value:contentInput||articleForm.content,onChange:e=>{const value=parseFloat(e.target.value.replace(',','.'))||0;setContentInput(e.target.value);setArticleForm(prev=>({...prev,content:value}));// Sofortige Berechnung bei Pfeiltasten\nsetArticleForm(prev=>({...prev,pricePerUnit:calculatePricePerUnit(prev.bundlePrice,value,prev.isGrossPrice)}));},onFocus:e=>{e.target.select();setContentInput(articleForm.content.toString());},onBlur:e=>{const value=parseFloat(e.target.value.replace(',','.'))||0;setContentInput('');setArticleForm(prev=>({...prev,content:value,pricePerUnit:calculatePricePerUnit(prev.bundlePrice,value,prev.isGrossPrice)}));},style:{borderColor:colors.cardBorder,color:colors.text},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Inhaltseinheit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:articleForm.contentUnit,onChange:e=>handleContentUnitInputChange(e.target.value),onFocus:()=>setShowContentUnitDropdown(true),onBlur:handleContentUnitInputBlur,onKeyDown:handleContentUnitKeyDown,placeholder:\"Einheit ausw\\xE4hlen oder eingeben...\",style:{borderColor:colors.cardBorder,color:colors.text}}),showContentUnitDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"position-absolute w-100\",style:{top:'100%',left:0,zIndex:1000,maxHeight:'200px',overflowY:'auto',backgroundColor:colors.card,border:`1px solid ${colors.cardBorder}`,borderRadius:'0 0 0.375rem 0.375rem',boxShadow:'0 4px 12px rgba(0,0,0,0.15)'},children:[getFilteredContentUnits().length>0?getFilteredContentUnits().map((unit,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2 cursor-pointer\",onClick:()=>handleContentUnitSelect(unit),style:{color:colors.text,borderBottom:`1px solid ${colors.cardBorder}`,cursor:'pointer',backgroundColor:selectedContentUnitIndex===index?colors.accent+'20':'transparent'},onMouseEnter:e=>{if(selectedContentUnitIndex!==index){e.currentTarget.style.backgroundColor=colors.secondary;}setSelectedContentUnitIndex(index);},onMouseLeave:e=>{if(selectedContentUnitIndex!==index){e.currentTarget.style.backgroundColor='transparent';}},children:unit},unit)):/*#__PURE__*/_jsx(\"div\",{className:\"px-3 py-2\",style:{color:colors.text,fontStyle:'italic'},children:\"Keine Einheit gefunden\"}),contentUnitSearchTerm&&!UNITS.includes(contentUnitSearchTerm)&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-2 cursor-pointer\",onClick:()=>handleContentUnitSelect(contentUnitSearchTerm),style:{color:colors.accent,borderTop:`2px solid ${colors.accent}`,borderBottom:`1px solid ${colors.cardBorder}`,cursor:'pointer',fontWeight:'bold',backgroundColor:selectedContentUnitIndex===getFilteredContentUnits().length?colors.accent+'20':'transparent'},onMouseEnter:e=>{if(selectedContentUnitIndex!==getFilteredContentUnits().length){e.currentTarget.style.backgroundColor=colors.secondary;}setSelectedContentUnitIndex(getFilteredContentUnits().length);},onMouseLeave:e=>{if(selectedContentUnitIndex!==getFilteredContentUnits().length){e.currentTarget.style.backgroundColor='transparent';}},children:[\"\\\"\",contentUnitSearchTerm,\"\\\" hinzuf\\xFCgen\"]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Preis pro Einheit\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",className:\"form-control\",value:articleForm.pricePerUnit.toFixed(2),readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.secondary}}),/*#__PURE__*/_jsxs(\"span\",{className:\"input-group-text\",style:{backgroundColor:colors.secondary,borderColor:colors.cardBorder,color:colors.text},children:[\"\\u20AC/\",articleForm.contentUnit||'Einheit']})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Inhaltsstoffe und Allergene\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Inhaltsstoffe\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative ingredients-dropdown-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",onClick:handleIngredientsDropdownToggle,style:{borderColor:colors.cardBorder,color:colors.text,cursor:'pointer',minHeight:'38px',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.9rem',color:articleForm.ingredients.length>0?colors.text:colors.text+'80'},children:formatIngredientsDisplay(articleForm.ingredients)}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'auto',color:colors.text+'60'},children:showIngredientsDropdown?'▲':'▼'})]}),showIngredientsDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute w-100\",style:{top:'100%',left:0,zIndex:1000,maxHeight:'300px',overflowY:'auto',backgroundColor:colors.card,border:`1px solid ${colors.cardBorder}`,borderRadius:'0 0 0.375rem 0.375rem',boxShadow:'0 4px 12px rgba(0,0,0,0.15)',padding:'0.5rem'},children:INGREDIENTS.map(ingredient=>/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:`ingredient-${ingredient}`,checked:articleForm.ingredients.includes(ingredient),onChange:()=>handleIngredientToggle(ingredient),style:{accentColor:colors.accent}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:`ingredient-${ingredient}`,style:{color:colors.text,fontSize:'0.9rem'},children:ingredient})]},ingredient))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Allergene\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative allergens-dropdown-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",onClick:handleAllergensDropdownToggle,style:{borderColor:colors.cardBorder,color:colors.text,cursor:'pointer',minHeight:'38px',display:'flex',alignItems:'center'},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'0.9rem',color:articleForm.allergens.length>0?colors.text:colors.text+'80'},children:formatAllergensDisplay(articleForm.allergens)}),/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:'auto',color:colors.text+'60'},children:showAllergensDropdown?'▲':'▼'})]}),showAllergensDropdown&&/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute w-100\",style:{top:'100%',left:0,zIndex:1000,maxHeight:'300px',overflowY:'auto',backgroundColor:colors.card,border:`1px solid ${colors.cardBorder}`,borderRadius:'0 0 0.375rem 0.375rem',boxShadow:'0 4px 12px rgba(0,0,0,0.15)',padding:'0.5rem'},children:ALLERGENS.map(allergen=>/*#__PURE__*/_jsxs(\"div\",{className:\"form-check\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"form-check-input\",type:\"checkbox\",id:`allergen-${allergen}`,checked:articleForm.allergens.includes(allergen),onChange:()=>handleAllergenToggle(allergen),style:{accentColor:colors.accent}}),/*#__PURE__*/_jsx(\"label\",{className:\"form-check-label\",htmlFor:`allergen-${allergen}`,style:{color:colors.text,fontSize:'0.9rem'},children:allergen})]},allergen))})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"N\\xE4hrwertangaben (pro 100g/100ml)\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Kalorien (kcal)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",className:\"form-control\",value:articleForm.nutrition.calories,onChange:e=>setArticleForm(prev=>({...prev,nutrition:{...prev.nutrition,calories:parseFloat(e.target.value)||0}})),onBlur:e=>{const calories=parseFloat(e.target.value)||0;setArticleForm(prev=>({...prev,nutrition:{...prev.nutrition,calories:calories,kilojoules:calculateKilojoules(calories)}}));},style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Kilojoule (kJ)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",className:\"form-control\",value:articleForm.nutrition.kilojoules,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.card+'40'}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Protein (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",className:\"form-control\",value:articleForm.nutrition.protein,onChange:e=>setArticleForm(prev=>({...prev,nutrition:{...prev.nutrition,protein:parseFloat(e.target.value)||0}})),style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Fett (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",className:\"form-control\",value:articleForm.nutrition.fat,onChange:e=>setArticleForm(prev=>({...prev,nutrition:{...prev.nutrition,fat:parseFloat(e.target.value)||0}})),style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Kohlenhydrate (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",className:\"form-control\",value:articleForm.nutrition.carbohydrates,onChange:e=>setArticleForm(prev=>({...prev,nutrition:{...prev.nutrition,carbohydrates:parseFloat(e.target.value)||0}})),style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Ballaststoffe (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",className:\"form-control\",value:articleForm.nutrition.fiber,onChange:e=>setArticleForm(prev=>({...prev,nutrition:{...prev.nutrition,fiber:parseFloat(e.target.value)||0}})),style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Zucker (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.1\",className:\"form-control\",value:articleForm.nutrition.sugar,onChange:e=>setArticleForm(prev=>({...prev,nutrition:{...prev.nutrition,sugar:parseFloat(e.target.value)||0}})),style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Salz (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",className:\"form-control\",value:articleForm.nutrition.salt,onChange:e=>setArticleForm(prev=>({...prev,nutrition:{...prev.nutrition,salt:parseFloat(e.target.value)||0}})),style:{borderColor:colors.cardBorder,color:colors.text}})]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer d-flex justify-content-between\",style:{backgroundColor:colors.secondary,borderTop:'none',position:'sticky',bottom:0,zIndex:10},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:()=>{setShowArticleForm(false);resetArticleForm();},style:{borderColor:colors.cardBorder},children:[/*#__PURE__*/_jsx(FaArrowLeft,{className:\"me-2\"}),\"Abbrechen\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleSaveArticle,disabled:!articleForm.name||!articleForm.bundlePrice||!articleForm.content,style:{backgroundColor:colors.accent,borderColor:colors.accent},children:[/*#__PURE__*/_jsx(FaSave,{className:\"me-2\"}),editingArticle?'Aktualisieren':'Speichern']})]})]})})})})}),showPriceConverter&&/*#__PURE__*/_jsx(\"div\",{className:\"position-fixed top-0 start-0 w-100 h-100\",style:{background:'rgba(0,0,0,0.5)',zIndex:3000,top:56},children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid h-100 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6 col-lg-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{backgroundColor:colors.card},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header d-flex justify-content-between align-items-center\",style:{backgroundColor:colors.secondary},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",style:{color:colors.text},children:\"Preis umrechnen\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",onClick:()=>setShowPriceConverter(false),style:{color:colors.text,textDecoration:'none'},children:/*#__PURE__*/_jsx(FaClose,{})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Aktueller Gebindepreis\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:articleForm.bundlePrice.toFixed(2),readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.secondary}}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",style:{backgroundColor:colors.secondary,borderColor:colors.cardBorder,color:colors.text},children:/*#__PURE__*/_jsx(FaEuroSign,{})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"MwSt-Satz\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:selectedVatRate,onChange:e=>setSelectedVatRate(parseFloat(e.target.value)),style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(\"option\",{value:7,children:\"7% (erm\\xE4\\xDFigt)\"}),/*#__PURE__*/_jsx(\"option\",{value:19,children:\"19% (regul\\xE4r)\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Bruttopreis\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",className:\"form-control\",value:calculateGrossPrice(articleForm.bundlePrice,selectedVatRate).toFixed(2),readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.secondary}}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",style:{backgroundColor:colors.secondary,borderColor:colors.cardBorder,color:colors.text},children:/*#__PURE__*/_jsx(FaEuroSign,{})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleApplyGrossPrice,style:{backgroundColor:colors.accent,borderColor:colors.accent},title:\"Bruttopreis \\xFCbernehmen\",children:/*#__PURE__*/_jsx(FaCheck,{})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Nettopreis\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",step:\"0.01\",className:\"form-control\",value:calculateNetPrice(articleForm.bundlePrice,selectedVatRate).toFixed(2),readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.secondary}}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",style:{backgroundColor:colors.secondary,borderColor:colors.cardBorder,color:colors.text},children:/*#__PURE__*/_jsx(FaEuroSign,{})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleApplyNetPrice,style:{backgroundColor:colors.accent,borderColor:colors.accent},title:\"Nettopreis \\xFCbernehmen\",children:/*#__PURE__*/_jsx(FaCheck,{})})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer d-flex justify-content-center\",style:{backgroundColor:colors.secondary,borderTop:`1px solid ${colors.cardBorder}`},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>setShowPriceConverter(false),style:{borderColor:colors.cardBorder},children:\"Abbrechen\"})})]})})})})}),showSupplierForm&&/*#__PURE__*/_jsx(\"div\",{className:\"position-fixed top-0 start-0 w-100 h-100\",style:{background:'rgba(0,0,0,0.5)',zIndex:3000,top:56},children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid h-100 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-xl-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{backgroundColor:colors.card,maxHeight:'calc(100vh - 120px)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header d-flex justify-content-between align-items-center\",style:{backgroundColor:colors.secondary},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",style:{color:colors.text},children:editingSupplier?'Lieferant bearbeiten':'Neuen Lieferanten anlegen'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",onClick:()=>setShowSupplierForm(false),style:{color:colors.text,textDecoration:'none'},children:/*#__PURE__*/_jsx(FaClose,{})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",style:{overflowY:'auto',maxHeight:'calc(100vh - 180px)',paddingBottom:'0',borderBottom:'none'},children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Grunddaten\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Firmenname *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:supplierForm.name,onChange:e=>setSupplierForm(prev=>({...prev,name:e.target.value})),style:{borderColor:colors.cardBorder,color:colors.text},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Ansprechpartner\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:supplierForm.contactPerson,onChange:e=>setSupplierForm(prev=>({...prev,contactPerson:e.target.value})),style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"E-Mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"form-control\",value:supplierForm.email,onChange:e=>setSupplierForm(prev=>({...prev,email:e.target.value})),style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Website\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"url\",className:\"form-control\",value:supplierForm.website,onChange:e=>setSupplierForm(prev=>({...prev,website:e.target.value})),style:{borderColor:colors.cardBorder,color:colors.text},placeholder:\"https://www.lieferant.de\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-primary\",onClick:()=>openWebsite(supplierForm.website),disabled:!isValidUrl(supplierForm.website),style:{borderColor:colors.cardBorder,color:colors.accent},title:\"Website in neuem Fenster \\xF6ffnen\",children:/*#__PURE__*/_jsx(FaGlobe,{})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Telefonnummern\"})}),supplierForm.phoneNumbers.map((phone,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-3\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:phone.type,onChange:e=>updatePhoneNumber(index,'type',e.target.value),style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Gesch\\xE4ft\",children:\"Gesch\\xE4ft\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Mobil\",children:\"Mobil\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Fax\",children:\"Fax\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Privat\",children:\"Privat\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Notfall\",children:\"Notfall\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7\",children:/*#__PURE__*/_jsx(\"input\",{type:\"tel\",className:\"form-control\",value:phone.number,onChange:e=>updatePhoneNumber(index,'number',e.target.value),placeholder:\"Telefonnummer\",style:{borderColor:colors.cardBorder,color:colors.text}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:supplierForm.phoneNumbers.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-outline-danger w-100\",onClick:()=>removePhoneNumber(index),style:{borderColor:'#dc3545',color:'#dc3545'},children:/*#__PURE__*/_jsx(FaClose,{})})})]})},index)),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"button\",{type:\"button\",className:\"btn btn-outline-secondary\",onClick:addPhoneNumber,style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(FaPlus,{className:\"me-2\"}),\"Telefonnummer hinzuf\\xFCgen\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Adresse\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Stra\\xDFe & Hausnummer\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:supplierForm.address.street,onChange:e=>setSupplierForm(prev=>({...prev,address:{...prev.address,street:e.target.value}})),style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"PLZ\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:supplierForm.address.zipCode,onChange:e=>setSupplierForm(prev=>({...prev,address:{...prev.address,zipCode:e.target.value}})),style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Stadt\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:supplierForm.address.city,onChange:e=>setSupplierForm(prev=>({...prev,address:{...prev.address,city:e.target.value}})),style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Land\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:supplierForm.address.country,onChange:e=>setSupplierForm(prev=>({...prev,address:{...prev.address,country:e.target.value}})),style:{borderColor:colors.cardBorder,color:colors.text}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Notizen\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",rows:3,value:supplierForm.notes,onChange:e=>setSupplierForm(prev=>({...prev,notes:e.target.value})),placeholder:\"Zus\\xE4tzliche Informationen, Lieferzeiten, Mindestbestellmengen, etc.\",style:{borderColor:colors.cardBorder,color:colors.text}})})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer d-flex justify-content-between\",style:{backgroundColor:colors.secondary,borderTop:'none',position:'sticky',bottom:0,zIndex:10},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:()=>setShowSupplierForm(false),style:{borderColor:colors.cardBorder},children:[/*#__PURE__*/_jsx(FaArrowLeft,{className:\"me-2\"}),\"Abbrechen\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleSaveSupplier,disabled:!supplierForm.name,style:{backgroundColor:colors.accent,borderColor:colors.accent},children:[/*#__PURE__*/_jsx(FaSave,{className:\"me-2\"}),editingSupplier?'Änderungen speichern':'Lieferant speichern']})]})]})})})})}),showRecipeForm&&/*#__PURE__*/_jsx(\"div\",{className:\"position-fixed top-0 start-0 w-100 h-100\",style:{background:'rgba(0,0,0,0.5)',zIndex:3000,top:56},children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid h-100 p-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center h-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-xl-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{backgroundColor:colors.card,maxHeight:'calc(100vh - 120px)'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header d-flex justify-content-between align-items-center\",style:{backgroundColor:colors.secondary},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",style:{color:colors.text},children:editingRecipe?'Rezept bearbeiten':'Neues Rezept erstellen'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link p-0\",onClick:()=>setShowRecipeForm(false),style:{color:colors.text,textDecoration:'none'},children:/*#__PURE__*/_jsx(FaClose,{})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",style:{overflowY:'auto',maxHeight:'calc(100vh - 180px)',paddingBottom:'0',borderBottom:'none'},children:/*#__PURE__*/_jsxs(\"form\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Grunddaten\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-7 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",style:{height:'200px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Rezeptname *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:recipeForm.name,onChange:e=>setRecipeForm(prev=>({...prev,name:e.target.value})),style:{borderColor:colors.cardBorder,color:colors.text},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",style:{flex:1},children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Beschreibung\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control h-100\",value:recipeForm.description,onChange:e=>setRecipeForm(prev=>({...prev,description:e.target.value})),placeholder:\"Kurze Beschreibung des Rezepts\",style:{borderColor:colors.cardBorder,color:colors.text,resize:'none'}})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-5 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Rezeptbild\"}),/*#__PURE__*/_jsx(\"div\",{className:\"border rounded d-flex align-items-center justify-content-center\",style:{borderColor:colors.cardBorder,backgroundColor:colors.background,height:'200px',width:'100%',cursor:'pointer',borderStyle:'dashed',overflow:'hidden'},onClick:()=>{var _document$getElementB;return(_document$getElementB=document.getElementById('recipe-image-input'))===null||_document$getElementB===void 0?void 0:_document$getElementB.click();},title:\"Klicken Sie, um ein Bild auszuw\\xE4hlen\",children:recipeForm.image?/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative w-100 h-100\",children:[/*#__PURE__*/_jsx(\"img\",{src:URL.createObjectURL(recipeForm.image),alt:\"Rezeptbild\",style:{width:'100%',height:'100%',objectFit:'contain',backgroundColor:colors.background}}),/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center\",style:{backgroundColor:'rgba(0,0,0,0.3)',opacity:0,transition:'opacity 0.2s'},onMouseEnter:e=>e.currentTarget.style.opacity='1',onMouseLeave:e=>e.currentTarget.style.opacity='0',children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-white\",children:[/*#__PURE__*/_jsx(FaImage,{style:{fontSize:'1.5rem',marginBottom:'0.25rem'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.7rem'},children:\"Bild \\xE4ndern\"})]})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(FaImage,{style:{fontSize:'2rem',color:colors.cardBorder,marginBottom:'0.5rem'}}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'0.8rem',color:colors.text},children:\"Bild ausw\\xE4hlen\"})]})}),/*#__PURE__*/_jsx(\"input\",{id:\"recipe-image-input\",type:\"file\",accept:\"image/*\",onChange:handleRecipeImageUpload,style:{display:'none'}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Details\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Portionen\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:recipeForm.portions,onChange:e=>{const newPortions=parseInt(e.target.value)||0;setRecipeForm(prev=>{const updatedForm={...prev,portions:newPortions};// Berechne den Aufschlag mit dem neuen Portionen-Wert\nconst materialCosts=calculateMaterialCosts();const costsPerPortion=materialCosts/newPortions;const netSellingPrice=calculateNetPrice(updatedForm.sellingPrice,updatedForm.vatRate);const markup=costsPerPortion>0?Math.round(netSellingPrice/costsPerPortion*100):0;return{...updatedForm,markupPercentage:markup};});},min:\"1\",style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Zeit (Minuten)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:recipeForm.preparationTime,onChange:e=>setRecipeForm(prev=>({...prev,preparationTime:parseInt(e.target.value)||0})),min:\"1\",style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Schwierigkeit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-control d-flex align-items-center justify-content-center\",style:{borderColor:colors.cardBorder,color:colors.text,height:'calc(1.5em + 0.75rem + 2px)',padding:'0'},children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex gap-1 align-items-center\",children:[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-link p-0\",onClick:()=>setRecipeForm(prev=>({...prev,difficulty:star})),style:{color:star<=recipeForm.difficulty?'#ffc107':colors.cardBorder,fontSize:'1.5rem',textDecoration:'none'},children:\"\\u2605\"},star))})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Energie (kWh)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:recipeForm.energy,onChange:e=>setRecipeForm(prev=>({...prev,energy:parseFloat(e.target.value)||0})),step:\"0.1\",min:\"0\",style:{borderColor:colors.cardBorder,color:colors.text}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",style:{minHeight:'fit-content'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-flex mb-4\",style:{borderBottom:`2px solid ${colors.accent}`},children:[{key:'kalkulation',label:'Kalkulation'},{key:'inhaltsangaben',label:'Inhaltsangaben'},{key:'naehrwerte',label:'Nährwerte'}].map(tab=>/*#__PURE__*/_jsx(\"div\",{className:\"flex-fill text-center\",style:{cursor:'pointer',fontWeight:activeTab===tab.key?'bold':'normal',color:activeTab===tab.key?colors.accent:colors.text,borderBottom:activeTab===tab.key?`2px solid ${colors.accent}`:'none',padding:'0.5rem 0'},onClick:()=>setActiveTab(tab.key),children:tab.label},tab.key))})}),activeTab==='kalkulation'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Aufschlag (%)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:recipeForm.markupPercentage,onChange:e=>handleMarkupChange(parseFloat(e.target.value)||0),onBlur:e=>{const roundedValue=Math.round(parseFloat(e.target.value)||0);setRecipeForm(prev=>({...prev,markupPercentage:roundedValue}));},min:\"0\",step:\"1\",style:{borderColor:colors.cardBorder,color:colors.text}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3 d-flex flex-column\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-end mb-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label mb-0\",style:{color:colors.text,fontSize:'0.875rem'},children:\"MwSt. (%)\"}),/*#__PURE__*/_jsx(\"small\",{style:{color:colors.accent,fontSize:'0.75rem'},children:(()=>{const values=calculateAllValues();return`${values.vatAmount.toFixed(2)} €`;})()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-auto\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",value:recipeForm.vatRate,onChange:e=>{const newVatRate=parseInt(e.target.value);setRecipeForm(prev=>{const updatedForm={...prev,vatRate:newVatRate};// Berechne den Aufschlag mit dem neuen MwSt-Satz\nconst materialCosts=calculateMaterialCosts();const costsPerPortion=materialCosts/updatedForm.portions;const netSellingPrice=calculateNetPrice(updatedForm.sellingPrice,newVatRate);const markup=costsPerPortion>0?Math.round(netSellingPrice/costsPerPortion*100):0;return{...updatedForm,markupPercentage:markup};});},style:{borderColor:colors.cardBorder,color:colors.text},children:[/*#__PURE__*/_jsx(\"option\",{value:0,children:\"0%\"}),/*#__PURE__*/_jsx(\"option\",{value:7,children:\"7%\"}),/*#__PURE__*/_jsx(\"option\",{value:19,children:\"19%\"})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Verkaufspreis\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:sellingPriceInput,onChange:e=>{setSellingPriceInput(e.target.value);const value=parseFloat(e.target.value.replace(',','.'));if(!isNaN(value)){setRecipeForm(prev=>({...prev,sellingPrice:value}));}},onBlur:()=>{setSellingPriceInput(recipeForm.sellingPrice.toFixed(2));const values=calculateAllValues();setRecipeForm(prev=>({...prev,markupPercentage:values.markup}));},onFocus:e=>{setSellingPriceInput(recipeForm.sellingPrice.toString());setTimeout(()=>e.target.select(),0);},min:\"0\",step:\"0.01\",style:{borderColor:colors.cardBorder,color:'#28a745',fontWeight:'bold'}}),/*#__PURE__*/_jsx(\"span\",{className:\"input-group-text\",style:{backgroundColor:colors.secondary,borderColor:colors.cardBorder,color:colors.text},children:\"\\u20AC\"})]})]}),(()=>{const values=calculateAllValues();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Materialkosten\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.secondary,display:'flex',alignItems:'center',height:'calc(1.5em + 0.75rem + 2px)'},children:[values.materialCosts.toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Kosten/Portion\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.secondary,display:'flex',alignItems:'center',height:'calc(1.5em + 0.75rem + 2px)'},children:[values.costsPerPortion.toFixed(2),\" \\u20AC\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-4 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Rohertrag\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-control\",style:{borderColor:colors.cardBorder,color:'#28a745',backgroundColor:colors.secondary,display:'flex',alignItems:'center',height:'calc(1.5em + 0.75rem + 2px)',fontWeight:'bold'},children:[values.grossProfit.toFixed(2),\" \\u20AC\"]})]})]});})()]}),activeTab==='inhaltsangaben'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Inhaltsstoffe\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:getRecipeIngredients().join(', '),readOnly:true,rows:4,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card,resize:'none'},placeholder:\"Keine Zutaten hinzugef\\xFCgt\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Allergene\"}),/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:getRecipeAllergens().join(', '),readOnly:true,rows:4,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card,resize:'none'},placeholder:\"Keine Allergene gefunden\"})]})]}),activeTab==='naehrwerte'&&/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-12\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Energie (kcal)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().calories,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Energie (kJ)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().kilojoules,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Fett (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().fat,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Kohlenhydrate (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().carbohydrates,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Eiwei\\xDF (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().protein,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Ballaststoffe (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().fiber,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Zucker (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().sugar,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-3 mb-3\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Salz (g)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",value:calculateRecipeNutrition().salt,readOnly:true,style:{borderColor:colors.cardBorder,color:colors.text,backgroundColor:colors.paper||colors.card}})]})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Zutaten\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"div\",{className:\"table-responsive\",children:/*#__PURE__*/_jsx(\"table\",{className:\"table table-hover\",style:{backgroundColor:colors.background,borderColor:colors.cardBorder,tableLayout:'fixed','--bs-table-hover-bg':colors.background,'--bs-table-hover-color':colors.text},children:/*#__PURE__*/_jsx(\"tbody\",{children:recipeForm.ingredients.map((ingredient,index)=>/*#__PURE__*/_jsxs(\"tr\",{style:{borderColor:colors.cardBorder,backgroundColor:selectedIngredientIndex===index?colors.accent+'20':colors.background},children:[/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder,padding:'8px',width:'45%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"position-relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control form-control-sm\",value:ingredient.name,onChange:e=>handleIngredientInputChange(e.target.value,index),onFocus:()=>handleIngredientFocus(index),onBlur:handleIngredientInputBlur,onKeyDown:e=>handleIngredientKeyDown(e,index),placeholder:\"Artikel ausw\\xE4hlen oder neuen erstellen\",\"data-ingredient-index\":index,style:{borderColor:colors.cardBorder,color:colors.text}}),showIngredientDropdown&&/*#__PURE__*/_jsxs(\"div\",{className:\"position-fixed\",style:{top:dropdownPosition.top,left:dropdownPosition.left,zIndex:99999,maxHeight:'200px',overflowY:'auto',backgroundColor:colors.card,border:`1px solid ${colors.cardBorder}`,borderRadius:'0.375rem',boxShadow:'0 4px 12px rgba(0,0,0,0.15)',minWidth:'300px'},children:[getFilteredIngredients().map((article,itemIndex)=>/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-2 cursor-pointer dropdown-item\",onClick:()=>handleIngredientSelect(article,index),style:{color:colors.text,borderBottom:`1px solid ${colors.cardBorder}`,cursor:'pointer',backgroundColor:dropdownSelectionIndex===itemIndex?colors.accent+'20':'transparent'},onMouseEnter:e=>{if(dropdownSelectionIndex!==itemIndex){e.currentTarget.style.backgroundColor=colors.secondary;}setDropdownSelectionIndex(itemIndex);},onMouseLeave:e=>{if(dropdownSelectionIndex!==itemIndex){e.currentTarget.style.backgroundColor='transparent';}},children:[/*#__PURE__*/_jsx(\"div\",{className:\"fw-bold\",children:article.name}),/*#__PURE__*/_jsxs(\"small\",{style:{color:colors.accent},children:[formatPrice(article.pricePerUnit),\" / \",article.contentUnit]})]},article.id)),ingredientSearchTerm&&!articles.some(a=>a.name===ingredientSearchTerm)&&/*#__PURE__*/_jsxs(\"div\",{className:\"px-3 py-2 cursor-pointer dropdown-item\",onClick:()=>handleCreateNewArticle(ingredientSearchTerm,index),style:{color:colors.accent,borderTop:`2px solid ${colors.accent}`,borderBottom:`1px solid ${colors.cardBorder}`,cursor:'pointer',fontWeight:'bold',backgroundColor:dropdownSelectionIndex===getFilteredIngredients().length?colors.accent+'20':'transparent'},onMouseEnter:e=>{if(dropdownSelectionIndex!==getFilteredIngredients().length){e.currentTarget.style.backgroundColor=colors.secondary;}setDropdownSelectionIndex(getFilteredIngredients().length);},onMouseLeave:e=>{if(dropdownSelectionIndex!==getFilteredIngredients().length){e.currentTarget.style.backgroundColor='transparent';}},children:[/*#__PURE__*/_jsx(FaPlus,{className:\"me-2\"}),\"\\\"\",ingredientSearchTerm,\"\\\" als neuen Artikel erstellen\"]})]})]})}),/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder,padding:'8px',verticalAlign:'middle',width:'20%'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control form-control-sm\",value:ingredient.amount,onChange:e=>{const newAmount=parseFloat(e.target.value)||0;const newPrice=calculateIngredientPrice({...ingredient,amount:newAmount});setRecipeForm(prev=>({...prev,ingredients:prev.ingredients.map((ing,i)=>i===index?{...ing,amount:newAmount,price:newPrice}:ing)}));// Neuberechnung basierend auf aktuellem Verkaufspreis\nsetTimeout(()=>{const values=calculateAllValues();setRecipeForm(prev=>({...prev,markupPercentage:values.markup}));},0);},min:\"0\",step:\"0.1\",style:{borderColor:colors.cardBorder,color:colors.text,width:'25%',minWidth:'60px'}}),/*#__PURE__*/_jsx(\"span\",{style:{color:colors.text,fontWeight:'bold',fontSize:'0.9rem'},children:ingredient.unit||'?'})]})}),/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder,padding:'8px',verticalAlign:'middle',width:'20%',textAlign:'right'},children:/*#__PURE__*/_jsxs(\"span\",{style:{color:colors.text,fontWeight:'bold'},children:[calculateIngredientPrice(ingredient).toFixed(2).replace('.',','),\" \\u20AC\"]})}),/*#__PURE__*/_jsx(\"td\",{style:{borderColor:colors.cardBorder,padding:'8px',verticalAlign:'middle',width:'15%',textAlign:'right'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex gap-1 justify-content-end\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-link p-0\",title:\"Artikel bearbeiten\",style:{color:colors.accent,textDecoration:'none',fontSize:'12px'},onClick:()=>handleEditIngredient(index),children:/*#__PURE__*/_jsx(FaPencilAlt,{})}),recipeForm.ingredients.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-link p-0\",title:\"L\\xF6schen\",style:{color:'#dc3545',textDecoration:'none',fontSize:'12px'},onClick:()=>removeIngredient(index),children:/*#__PURE__*/_jsx(FaClose,{})})]})})]},ingredient.id))})})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"row mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,borderBottom:`2px solid ${colors.accent}`,paddingBottom:'0.5rem'},children:\"Zubereitungsschritte\"})}),recipeForm.preparationSteps.map((step,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"col-12 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-2\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"form-label\",style:{color:colors.text},children:[\"Schritt \",index+1]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-9\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",value:step.description,onChange:e=>handlePreparationStepChange(index,e.target.value),rows:2,placeholder:\"Beschreibung des Zubereitungsschritts\",style:{borderColor:colors.cardBorder,color:colors.text}})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-md-1 d-flex align-items-start\",children:recipeForm.preparationSteps.length>1&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-link p-0\",title:\"Schritt l\\xF6schen\",onClick:()=>removePreparationStep(index),style:{color:'#dc3545',textDecoration:'none',fontSize:'14px'},children:/*#__PURE__*/_jsx(FaClose,{})})})]})},step.id))]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer d-flex justify-content-between\",style:{backgroundColor:colors.secondary,borderTop:'none',position:'sticky',bottom:0,zIndex:10},children:[/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-secondary\",onClick:()=>setShowRecipeForm(false),style:{borderColor:colors.cardBorder},children:[/*#__PURE__*/_jsx(FaArrowLeft,{className:\"me-2\"}),\"Abbrechen\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:handleSaveRecipe,disabled:!recipeForm.name,style:{backgroundColor:colors.accent,borderColor:colors.accent},children:[/*#__PURE__*/_jsx(FaSave,{className:\"me-2\"}),editingRecipe?'Änderungen speichern':'Rezept speichern']})]})]})})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"position-fixed top-0 start-0 h-100 shadow transition-all\",style:{width:sidebarOpen?224:60,zIndex:1020,top:56,transition:'width 0.3s ease',backgroundColor:colors.sidebar,borderRight:`1px solid ${colors.cardBorder}`,display:isMobile?sidebarOpen?'block':'none':'block'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center p-3 border-bottom\",style:{borderColor:colors.cardBorder},children:[sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",style:{color:colors.text,fontSize:'1.1rem'},children:\"Navigation\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleSidebar,style:{color:colors.text,background:'none',border:'none',fontSize:'20px',cursor:'pointer',padding:'8px',borderRadius:'4px',display:'flex',alignItems:'center',justifyContent:'center',minWidth:'40px',minHeight:'40px'},children:sidebarOpen?/*#__PURE__*/_jsx(FaTimes,{}):/*#__PURE__*/_jsx(FaBars,{})})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"nav flex-column p-2\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item mb-2\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"sidebar-button\",onClick:()=>{setCurrentPage('dashboard');if(isMobile)setSidebarOpen(false);},title:\"Dashboard\",style:{color:colors.text,borderRadius:'8px',backgroundColor:currentPage==='dashboard'?colors.accent+'20':'transparent',justifyContent:sidebarOpen?'flex-start':'center',minHeight:'50px',border:'none',outline:'none',padding:sidebarOpen?'12px':'2px',width:'100%'},children:[/*#__PURE__*/_jsx(FaTachometerAlt,{className:\"sidebar-icon\",style:{marginRight:sidebarOpen?'12px':'0',display:'block',flexShrink:0,fontSize:'18px',fontWeight:'bold',color:colors.text,minWidth:'18px',textAlign:'center',width:sidebarOpen?'auto':'100%'}}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{children:\"Dashboard\"})]})}),/*#__PURE__*/_jsxs(\"li\",{className:\"nav-item mb-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"sidebar-button\",onClick:()=>{setCurrentPage('kalkulation');if(isMobile)setSidebarOpen(false);},title:\"Kalkulation\",style:{color:colors.text,borderRadius:'8px',backgroundColor:currentPage==='kalkulation'||currentPage==='rezepte'||currentPage==='artikel'||currentPage==='lieferanten'?colors.accent+'20':'transparent',justifyContent:sidebarOpen?'flex-start':'center',minHeight:'50px',border:'none',outline:'none',padding:sidebarOpen?'12px':'2px',width:'100%'},children:[/*#__PURE__*/_jsx(FaCalculator,{className:\"sidebar-icon\",style:{marginRight:sidebarOpen?'12px':'0',display:'block',flexShrink:0,fontSize:'18px',fontWeight:'bold',color:colors.text,minWidth:'18px',textAlign:'center',width:sidebarOpen?'auto':'100%'}}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{children:\"Kalkulation\"})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"nav flex-column mt-2\",style:{marginLeft:sidebarOpen?'1.25rem':'0',paddingLeft:sidebarOpen?'0':'0'},children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"sidebar-sub-button\",onClick:()=>{setCurrentPage('rezepte');if(isMobile)setSidebarOpen(false);},style:{color:colors.text,fontSize:'0.9rem',borderRadius:'6px',backgroundColor:currentPage==='rezepte'?colors.accent+'40':'transparent',paddingLeft:sidebarOpen?'1rem':'0',padding:sidebarOpen?'8px 12px':'3px',display:'flex',alignItems:'center',justifyContent:sidebarOpen?'flex-start':'center',minHeight:'32px',width:'100%',border:currentPage==='rezepte'?`2px solid ${colors.accent}`:'none',fontWeight:currentPage==='rezepte'?'bold':'normal'},title:\"Rezepte\",children:[/*#__PURE__*/_jsx(FaUtensils,{style:{fontSize:'14px',marginRight:sidebarOpen?'8px':'0',width:sidebarOpen?'auto':'100%',textAlign:'center'}}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{children:\"Rezepte\"})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"sidebar-sub-button\",onClick:()=>{setCurrentPage('artikel');if(isMobile)setSidebarOpen(false);},style:{color:colors.text,fontSize:'0.9rem',borderRadius:'6px',backgroundColor:currentPage==='artikel'?colors.accent+'40':'transparent',paddingLeft:sidebarOpen?'1rem':'0',padding:sidebarOpen?'8px 12px':'3px',display:'flex',alignItems:'center',justifyContent:sidebarOpen?'flex-start':'center',minHeight:'32px',width:'100%',border:currentPage==='artikel'?`2px solid ${colors.accent}`:'none',fontWeight:currentPage==='artikel'?'bold':'normal'},title:\"Artikel\",children:[/*#__PURE__*/_jsx(FaBoxes,{style:{fontSize:'14px',marginRight:sidebarOpen?'8px':'0',width:sidebarOpen?'auto':'100%',textAlign:'center'}}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{children:\"Artikel\"})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"button\",{className:\"sidebar-sub-button\",onClick:()=>{setCurrentPage('lieferanten');if(isMobile)setSidebarOpen(false);},style:{color:colors.text,fontSize:'0.9rem',borderRadius:'6px',backgroundColor:currentPage==='lieferanten'?colors.accent+'40':'transparent',paddingLeft:sidebarOpen?'1rem':'0',padding:sidebarOpen?'8px 12px':'3px',display:'flex',alignItems:'center',justifyContent:sidebarOpen?'flex-start':'center',minHeight:'32px',width:'100%',border:currentPage==='lieferanten'?`2px solid ${colors.accent}`:'none',fontWeight:currentPage==='lieferanten'?'bold':'normal'},title:\"Lieferanten\",children:[/*#__PURE__*/_jsx(FaUsers,{style:{fontSize:'14px',marginRight:sidebarOpen?'8px':'0',width:sidebarOpen?'auto':'100%',textAlign:'center'}}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{children:\"Lieferanten\"})]})})]})]}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item mb-2\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"sidebar-button\",onClick:()=>{setCurrentPage('einkauf');if(isMobile)setSidebarOpen(false);},title:\"Einkauf\",style:{color:colors.text,borderRadius:'8px',backgroundColor:currentPage==='einkauf'?colors.accent+'20':'transparent',justifyContent:sidebarOpen?'flex-start':'center',minHeight:'50px',border:'none',outline:'none',padding:sidebarOpen?'12px':'2px',width:'100%'},children:[/*#__PURE__*/_jsx(FaShoppingCart,{className:\"sidebar-icon\",style:{marginRight:sidebarOpen?'12px':'0',display:'block',flexShrink:0,fontSize:'18px',fontWeight:'bold',color:colors.text,minWidth:'18px',textAlign:'center',width:sidebarOpen?'auto':'100%'}}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{children:\"Einkauf\"})]})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item mb-2\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"sidebar-button\",onClick:()=>{setCurrentPage('inventur');if(isMobile)setSidebarOpen(false);},title:\"Inventur\",style:{color:colors.text,borderRadius:'8px',backgroundColor:currentPage==='inventur'?colors.accent+'20':'transparent',justifyContent:sidebarOpen?'flex-start':'center',minHeight:'50px',border:'none',outline:'none',padding:sidebarOpen?'12px':'2px',width:'100%'},children:[/*#__PURE__*/_jsx(FaBoxes,{className:\"sidebar-icon\",style:{marginRight:sidebarOpen?'12px':'0',display:'block',flexShrink:0,fontSize:'18px',fontWeight:'bold',color:colors.text,minWidth:'18px',textAlign:'center',width:sidebarOpen?'auto':'100%'}}),sidebarOpen&&/*#__PURE__*/_jsx(\"span\",{children:\"Inventur\"})]})})]}),sidebarOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"position-absolute bottom-0 start-0 w-100 p-3 border-top\",style:{borderColor:colors.cardBorder},children:/*#__PURE__*/_jsxs(\"button\",{style:{color:colors.text,background:'none',border:'none',width:'100%',textAlign:'left',display:'flex',alignItems:'center',padding:'8px 12px',borderRadius:'6px',cursor:'pointer',fontSize:'0.9rem'},children:[/*#__PURE__*/_jsx(FaCog,{style:{fontSize:'18px',marginRight:'12px'}}),\"Einstellungen\"]})})]}),sidebarOpen&&isMobile&&/*#__PURE__*/_jsx(\"div\",{className:\"position-fixed top-0 start-0 w-100 h-100\",style:{background:'rgba(0,0,0,0.3)',zIndex:1000,top:56},onClick:()=>setSidebarOpen(false)}),/*#__PURE__*/_jsx(\"div\",{style:{marginLeft:isMobile?0:sidebarOpen?224:60,marginTop:56,transition:'margin-left 0.3s ease'},children:renderPage()}),showImportExportModal&&/*#__PURE__*/_jsx(\"div\",{className:\"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center\",style:{backgroundColor:'rgba(0,0,0,0.5)',zIndex:2000},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card col-xl-6\",style:{backgroundColor:colors.card,borderColor:colors.cardBorder,boxShadow:'0 8px 32px rgba(0,0,0,0.3)',maxHeight:'90vh',overflow:'hidden'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header d-flex justify-content-between align-items-center\",style:{backgroundColor:colors.secondary,borderBottomColor:colors.cardBorder,padding:'1rem 1.5rem'},children:[/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",style:{color:colors.text},children:\"\\uD83D\\uDCCA Import/Export - Artikeldaten\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-close\",onClick:()=>{setShowImportExportModal(false);resetImportExport();},style:{color:colors.text}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",style:{overflowY:'auto',maxHeight:'calc(100vh - 180px)',paddingBottom:'0',borderBottom:'none'},children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text},children:\"Datei ausw\\xE4hlen (CSV oder JSON)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",accept:\".csv,.json\",onChange:handleFileUpload,style:{borderColor:colors.cardBorder,color:colors.text}}),importErrors.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2\",children:importErrors.map((error,index)=>/*#__PURE__*/_jsxs(\"div\",{style:{color:'#dc3545',fontSize:'0.85rem',marginTop:'0.25rem'},children:[\"\\u26A0\\uFE0F \",error]},index))})]}),importHeaders&&importHeaders.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{fontSize:'0.8rem',color:colors.text+'80',marginBottom:'0.5rem',fontStyle:'italic'},children:[\"Verf\\xFCgbare Import-Spalten: \",importHeaders.join(', '),importHeaders.length>0&&/*#__PURE__*/_jsxs(\"span\",{style:{marginLeft:'1rem',color:colors.accent},children:[\"(Trennzeichen: \",importHeaders.length>1?'automatisch erkannt':'unbekannt',\")\"]}),detectedEncoding&&/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'0.25rem',color:colors.accent},children:[\"Zeichenkodierung: \",detectedEncoding]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{maxHeight:'400px',overflowY:'auto',border:`1px solid ${colors.cardBorder}`,borderRadius:'0.375rem',backgroundColor:colors.secondary+'20'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"p-3\",style:{backgroundColor:colors.secondary,borderBottom:`1px solid ${colors.cardBorder}`,fontWeight:'bold',color:colors.text},children:\"Feldzuordnung\"}),/*#__PURE__*/_jsx(\"div\",{className:\"p-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:appFields.map(field=>/*#__PURE__*/_jsx(\"div\",{className:\"col-lg-6 col-md-12 mb-3\",children:/*#__PURE__*/_jsxs(\"div\",{style:{padding:'0.75rem',borderRadius:'0.375rem',backgroundColor:fieldMappings[Object.keys(fieldMappings).find(key=>fieldMappings[key]===field.key)||'']?colors.accent+'20':'transparent',border:fieldMappings[Object.keys(fieldMappings).find(key=>fieldMappings[key]===field.key)||'']?`1px solid ${colors.accent}`:`1px solid ${colors.cardBorder}`},children:[/*#__PURE__*/_jsx(\"label\",{className:\"form-label\",style:{color:colors.text,fontWeight:'500',marginBottom:'0.5rem',fontSize:'0.95rem'},children:field.label}),/*#__PURE__*/_jsxs(\"select\",{className:\"form-select\",value:Object.keys(fieldMappings).find(key=>fieldMappings[key]===field.key)||'',onChange:e=>{const selectedHeader=e.target.value;const newMappings={...fieldMappings};// Entferne vorherige Zuordnung für dieses App-Feld\nObject.keys(newMappings).forEach(key=>{if(newMappings[key]===field.key){delete newMappings[key];}});// Füge neue Zuordnung hinzu\nif(selectedHeader){newMappings[selectedHeader]=field.key;}setFieldMappings(newMappings);generatePreview(importData,newMappings);},style:{borderColor:colors.cardBorder,color:colors.text,fontSize:'0.9rem'},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Nicht zuordnen\"}),importHeaders&&importHeaders.length>0?importHeaders.map(header=>/*#__PURE__*/_jsx(\"option\",{value:header,children:header},header)):/*#__PURE__*/_jsx(\"option\",{value:\"\",disabled:true,children:\"Keine Spalten verf\\xFCgbar\"})]})]})},field.key))})})]})]}),importPreview.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"h6\",{style:{color:colors.text,marginBottom:'1rem'},children:\"\\uD83D\\uDC41\\uFE0F Vorschau (erste 5 Datens\\xE4tze)\"}),/*#__PURE__*/_jsx(\"div\",{style:{maxHeight:'300px',overflowY:'auto',border:`1px solid ${colors.cardBorder}`,borderRadius:'0.375rem'},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table table-sm mb-0\",children:[/*#__PURE__*/_jsx(\"thead\",{style:{backgroundColor:colors.secondary},children:/*#__PURE__*/_jsx(\"tr\",{children:Object.keys(importPreview[0]||{}).map(key=>{var _appFields$find;return/*#__PURE__*/_jsx(\"th\",{style:{color:colors.text,fontSize:'0.8rem'},children:((_appFields$find=appFields.find(f=>f.key===key))===null||_appFields$find===void 0?void 0:_appFields$find.label)||key},key);})})}),/*#__PURE__*/_jsx(\"tbody\",{children:importPreview.map((row,index)=>/*#__PURE__*/_jsx(\"tr\",{children:Object.entries(row).map((_ref4,i)=>{let[key,value]=_ref4;return/*#__PURE__*/_jsx(\"td\",{style:{color:colors.text,fontSize:'0.8rem'},children:key==='priceCalculationNote'?/*#__PURE__*/_jsx(\"span\",{style:{color:String(value).includes('wird berechnet')?colors.accent:String(value).includes('Abweichung')?'#dc3545':String(value).includes('konsistent')?'#28a745':colors.text,fontStyle:'italic',fontSize:'0.75rem'},children:String(value)}):key==='duplicateWarning'?/*#__PURE__*/_jsx(\"span\",{style:{color:'#dc3545',fontWeight:'bold',fontSize:'0.75rem'},children:String(value)}):key==='supplierWarning'?/*#__PURE__*/_jsx(\"span\",{style:{color:colors.accent,fontWeight:'bold',fontSize:'0.75rem'},children:String(value)}):key==='calculatedPricePerUnit'||key==='calculatedBundlePrice'||key==='calculatedContent'?/*#__PURE__*/_jsx(\"span\",{style:{color:colors.accent,fontWeight:'bold'},children:typeof value==='number'?value.toFixed(2):String(value)}):String(value)},i);})},index))})]})})]}),importData.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between align-items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:colors.text},children:[\"\\uD83D\\uDCCA \",importData.length,\" Datens\\xE4tze zum Import bereit\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:handleImport,style:{backgroundColor:colors.accent,borderColor:colors.accent,color:'white'},children:\"\\uD83D\\uDCE5 Import starten\"})]}),importResult&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 p-3\",style:{backgroundColor:importResult.skipped>0?'#fff3cd':'#d1edff',border:`1px solid ${importResult.skipped>0?'#ffeaa7':'#bee5eb'}`,borderRadius:'0.375rem',color:importResult.skipped>0?'#856404':'#0c5460'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'1.2rem',marginRight:'0.5rem'},children:importResult.skipped>0?'⚠️':'✅'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Import abgeschlossen\"}),/*#__PURE__*/_jsx(\"br\",{}),importResult.imported,\" neue Artikel importiert\",importResult.skipped>0&&/*#__PURE__*/_jsxs(\"span\",{style:{color:'#dc3545'},children:[\", \",importResult.skipped,\" Duplikate \\xFCbersprungen\"]}),importResult.suppliersCreated>0&&/*#__PURE__*/_jsxs(\"span\",{style:{color:colors.accent},children:[\", \",importResult.suppliersCreated,\" neue Lieferanten erstellt\"]})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mt-4 pt-4\",style:{borderTop:`1px solid ${colors.cardBorder}`},children:[/*#__PURE__*/_jsxs(\"div\",{style:{color:colors.text,marginBottom:'1.5rem'},children:[/*#__PURE__*/_jsx(\"h6\",{children:\"\\uD83D\\uDCBE Export aller Artikeldaten\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-2\",children:\"Klicken Sie auf \\\"Export\\\" um alle Artikel als CSV-Datei zu exportieren.\"}),/*#__PURE__*/_jsx(\"p\",{className:\"small text-muted\",children:\"Die Datei wird mit den deutschen Feldnamen erstellt.\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success\",onClick:handleExport,style:{backgroundColor:'#28a745',borderColor:'#28a745',color:'white'},children:\"\\uD83D\\uDCE4 Export starten\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-footer d-flex justify-content-end gap-2\",style:{backgroundColor:colors.secondary,borderTop:'none',padding:'1rem',position:'sticky',bottom:0,zIndex:10},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:()=>{setShowImportExportModal(false);resetImportExport();},style:{backgroundColor:colors.cardBorder,borderColor:colors.cardBorder,color:colors.text},children:\"Abbrechen\"})})]})}),showDeleteDialog&&/*#__PURE__*/_jsx(\"div\",{className:\"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center\",style:{backgroundColor:'rgba(0,0,0,0.5)',zIndex:2000},children:/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:{backgroundColor:colors.card,borderColor:colors.cardBorder,boxShadow:'0 8px 32px rgba(0,0,0,0.3)',maxWidth:'500px',width:'90%'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header text-center\",style:{backgroundColor:colors.secondary,borderBottomColor:colors.cardBorder,padding:'1.5rem'},children:/*#__PURE__*/_jsx(\"h5\",{className:\"mb-0\",style:{color:colors.text},children:\"\\u26A0\\uFE0F Sicherheitsabfrage \\u26A0\\uFE0F\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body text-center\",style:{padding:'2rem'},children:[/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'1.1rem',color:colors.text,marginBottom:'1rem'},children:(deleteDialogData===null||deleteDialogData===void 0?void 0:deleteDialogData.type)==='bulk'&&/*#__PURE__*/_jsxs(_Fragment,{children:[\"M\\xF6chten Sie wirklich \",/*#__PURE__*/_jsxs(\"strong\",{children:[deleteDialogData.count,\" Artikel\"]}),\" l\\xF6schen?\"]})}),/*#__PURE__*/_jsx(\"div\",{style:{color:colors.text+'CC',fontSize:'0.95rem',marginBottom:'1.5rem',lineHeight:'1.5'},children:\"Diese Aktion kann nicht r\\xFCckg\\xE4ngig gemacht werden!\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-footer d-flex justify-content-center gap-3\",style:{backgroundColor:colors.secondary,borderTopColor:colors.cardBorder,padding:'1rem'},children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",onClick:handleCancelDelete,style:{backgroundColor:colors.cardBorder,borderColor:colors.cardBorder,color:colors.text,minWidth:'120px'},children:\"Abbrechen\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:handleConfirmDelete,style:{backgroundColor:'#dc3545',borderColor:'#dc3545',color:'white',minWidth:'120px'},children:\"L\\xF6schen\"})]})]})})]});}export default App;","map":{"version":3,"names":["React","useState","useEffect","useRef","FaUtensils","FaBars","FaTimes","FaCalculator","FaShoppingCart","FaBoxes","FaPalette","FaPlus","FaSearch","FaCog","FaUsers","FaTachometerAlt","FaTrash","FaList","FaTh","FaSort","FaPencilAlt","FaGlobe","FaClose","FaSave","FaArrowLeft","FaEuroSign","FaCheck","FaImage","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","designTemplates","modern","name","description","colors","primary","secondary","accent","background","sidebar","text","card","cardBorder","paper","paperShadow","dark","warm","professional","App","sidebarOpen","setSidebarOpen","isMobile","setIsMobile","currentPage","setCurrentPage","console","log","currentDesign","setCurrentDesign","showDesignSelector","setShowDesignSelector","articles","setArticles","id","supplierId","category","supplierArticleNumber","bundlePrice","bundleUnit","content","contentUnit","pricePerUnit","isGrossPrice","ingredients","allergens","nutritionInfo","calories","kilojoules","protein","fat","carbohydrates","fiber","sugar","salt","searchTerm","setSearchTerm","viewMode","setViewMode","selectedCategory","setSelectedCategory","selectedSupplier","setSelectedSupplier","sortField","setSortField","sortDirection","setSortDirection","selectedArticles","setSelectedArticles","supplierViewMode","setSupplierViewMode","supplierSortField","setSupplierSortField","supplierSortDirection","setSupplierSortDirection","selectedSuppliers","setSelectedSuppliers","suppliers","setSuppliers","contactPerson","email","phoneNumbers","type","number","address","street","zipCode","city","country","website","notes","showArticleForm","setShowArticleForm","editingArticle","setEditingArticle","showCategoryDropdown","setShowCategoryDropdown","categorySearchTerm","setCategorySearchTerm","selectedCategoryIndex","setSelectedCategoryIndex","showSupplierDropdown","setShowSupplierDropdown","supplierSearchTerm","setSupplierSearchTerm","selectedSupplierIndex","setSelectedSupplierIndex","showSupplierForm","setShowSupplierForm","showPriceConverter","setShowPriceConverter","selectedVatRate","setSelectedVatRate","showBundleUnitDropdown","setShowBundleUnitDropdown","bundleUnitSearchTerm","setBundleUnitSearchTerm","selectedBundleUnitIndex","setSelectedBundleUnitIndex","showContentUnitDropdown","setShowContentUnitDropdown","contentUnitSearchTerm","setContentUnitSearchTerm","selectedContentUnitIndex","setSelectedContentUnitIndex","supplierForm","setSupplierForm","articleForm","setArticleForm","nutrition","checkScreenSize","window","innerWidth","addEventListener","removeEventListener","toggleSidebar","getCurrentColors","getUniqueCategories","articleCategories","map","article","filter","cat","allCategories","Array","from","Set","CATEGORIES","sort","getUsedCategories","usedCategories","getSupplierName","supplier","find","s","getUniqueSuppliers","supplierNames","filteredAndSortedArticles","filtered","toLowerCase","includes","a","b","aValue","bValue","filteredAndSortedSuppliers","matchesSearch","handleSelectArticle","articleId","prev","handleSelectAll","filteredArticles","length","handleDeleteArticles","setDeleteDialogData","count","setShowDeleteDialog","handleDeleteSingleArticle","articleName","handleConfirmDelete","deleteDialogData","handleCancelDelete","handleSelectSupplier","handleSelectAllSuppliers","filteredSuppliers","handleDeleteSuppliers","handleDeleteSingleSupplier","supplierName","appFields","key","label","getDefaultFieldMapping","headers","mapping","forEach","header","lowerHeader","handleFileUpload","event","_event$target$files","file","target","files","detectEncoding","buffer","slice","arrayBuffer","bytes","Uint8Array","encodings","encoding","test","error","sampleBuffer","sampleBytes","hasGermanChars","some","byte","decodeWithEncoding","startIndex","TextDecoder","decode","result","i","String","fromCharCode","processFile","setDetectedEncoding","substring","endsWith","parseCSV","parseJSON","setImportErrors","lines","split","line","trim","detectDelimiter","firstLine","commaCount","match","semicolonCount","tabCount","delimiter","parseCSVLine","delim","current","inQuotes","char","push","h","replace","data","values","v","row","index","Object","val","setImportHeaders","setImportData","setFieldMappings","generatePreview","JSON","parse","isArray","keys","mappings","existingArticleNames","existingSupplierNames","preview","mappedRow","entries","_ref","fileHeader","appField","undefined","parseNumberValue","duplicateWarning","supplierWarning","calculatedPricePerUnit","priceCalculationNote","calculatedContent","calculatedBundlePrice","priceDifference","Math","abs","priceDifferencePercent","toFixed","setImportPreview","handleFieldMappingChange","newMappings","fieldMappings","importData","handleImport","newSuppliersToAdd","supplierNameToIdMap","newArticles","Date","now","toString","bundlePriceType","_ref2","value","isNaN","Number","item","hasBundlePrice","hasPricePerUnit","hasContent","importedPricePerUnit","max","supplierNameLower","existingSupplier","existingNewSupplier","newSupplier","skippedCount","setImportResult","imported","skipped","suppliersCreated","setShowImportExportModal","resetImportExport","handleExport","exportData","_article$nutritionInf","_article$nutritionInf2","_article$nutritionInf3","_article$nutritionInf4","_article$nutritionInf5","_article$nutritionInf6","_article$nutritionInf7","_article$nutritionInf8","join","csvContent","blob","Blob","link","document","createElement","href","URL","createObjectURL","download","toISOString","click","cleanValue","processedValue","isValidUrl","url","openWebsite","open","formatPrice","price","UNITS","INGREDIENTS","ALLERGENS","calculatePricePerUnit","isGross","netPrice","handlePriceChange","newBundlePrice","newPricePerUnit","handleContentChange","newContent","handleIngredientToggle","ingredient","handleAllergenToggle","allergen","resetArticleForm","resetSupplierForm","handleSaveArticle","newArticle","showRecipeForm","setTimeout","setShowRecipeForm","handleEditArticle","getFilteredCategories","handleCategorySelect","handleCategoryInputChange","handleCategoryInputBlur","handleCategoryKeyDown","e","filteredCategories","maxIndex","hasNewCategoryOption","totalOptions","preventDefault","resetCategorySelection","getFilteredSuppliers","handleSupplierSelect","handleSupplierInputChange","handleSupplierInputBlur","handleSupplierKeyDown","hasNewSupplierOption","handleNewSupplier","handleEditSupplier","setEditingSupplier","resetRecipeForm","setRecipeForm","image","portions","preparationTime","difficulty","energy","materialCosts","markupPercentage","vatRate","sellingPrice","amount","unit","preparationSteps","order","calculateMaterialCosts","recipeForm","reduce","sum","handleMarkupChange","newMarkup","costsPerPortion","newSellingPrice","calculateGrossPrice","roundedSellingPrice","round","setSellingPriceInput","handleSellingPriceChange","calculateAllValues","markup","calculateGrossProfit","vatAmount","calculateNetPrice","netSellingPrice","grossProfit","getRecipeIngredients","ing","add","getRecipeAllergens","calculateRecipeNutrition","totalNutrition","ratio","getFilteredIngredients","ingredientSearchTerm","handleIngredientSelect","ingredientIndex","updatedIngredients","shouldAddNewLine","setIngredientSearchTerm","setShowIngredientDropdown","setSelectedIngredientIndex","setDropdownSelectionIndex","setDropdownPosition","top","left","calculateIngredientPrice","handleIngredientInputChange","inputElement","querySelector","rect","getBoundingClientRect","bottom","handleIngredientInputBlur","activeElement","isDropdownActive","closest","handleIngredientKeyDown","filteredIngredients","hasNewArticleOption","dropdownSelectionIndex","handleCreateNewArticle","handleIngredientFocus","handleEditIngredient","articleToEdit","alert","addIngredient","newIndex","focus","removeIngredient","_","addPreparationStep","handlePreparationStepChange","updatedSteps","step","handleRecipeImageUpload","_event$target$files2","startsWith","removePreparationStep","handleSaveRecipe","cleanedPreparationSteps","editingRecipe","setEditingRecipe","newRecipe","createdAt","updatedAt","handleSaveSupplier","editingSupplier","addPhoneNumber","removePhoneNumber","updatePhoneNumber","field","phone","grossPrice","handleApplyGrossPrice","handleApplyNetPrice","bundlePriceInput","setBundlePriceInput","contentInput","setContentInput","showIngredientsDropdown","setShowIngredientsDropdown","showAllergensDropdown","setShowAllergensDropdown","showDeleteDialog","sellingPriceInput","activeTab","setActiveTab","showIngredientDropdown","selectedIngredientIndex","dropdownPosition","showImportExportModal","importHeaders","importPreview","importErrors","detectedEncoding","importResult","articleNameInputRef","_articleNameInputRef$","_articleNameInputRef$2","select","getFilteredBundleUnits","handleBundleUnitSelect","handleBundleUnitInputChange","handleBundleUnitInputBlur","handleBundleUnitKeyDown","filteredUnits","getFilteredContentUnits","handleContentUnitSelect","handleContentUnitInputChange","handleContentUnitInputBlur","handleContentUnitKeyDown","formatIngredientsDisplay","formatAllergensDisplay","handleIngredientsDropdownToggle","handleAllergensDropdownToggle","calculateKilojoules","handleClickOutside","renderPage","totalValue","className","children","style","backgroundColor","borderRadius","boxShadow","padding","minHeight","border","color","margin","onClick","borderColor","width","height","display","alignItems","justifyContent","fontSize","fontWeight","marginBottom","borderBottom","tab","cursor","readOnly","rows","resize","categories","placeholder","onChange","title","role","checked","accentColor","onDoubleClick","textDecoration","stopPropagation","fontStyle","zIndex","minWidth","_ref3","template","maxHeight","overflowY","paddingBottom","ref","required","onFocus","onBlur","onKeyDown","onMouseEnter","currentTarget","onMouseLeave","borderTop","parseFloat","marginLeft","htmlFor","position","disabled","flex","borderStyle","overflow","_document$getElementB","getElementById","src","alt","objectFit","opacity","transition","accept","newPortions","parseInt","updatedForm","min","star","roundedValue","newVatRate","tableLayout","itemIndex","verticalAlign","newAmount","newPrice","textAlign","borderRight","outline","marginRight","flexShrink","paddingLeft","marginTop","borderBottomColor","selectedHeader","_appFields$find","f","_ref4","maxWidth","lineHeight","borderTopColor"],"sources":["D:/Cursor.ai/The Chef's Numbers/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { FaUtensils, FaBars, FaTimes, FaCalculator, FaShoppingCart, FaBoxes, FaPalette, FaPlus, FaSearch, FaCog, FaUsers, FaTachometerAlt, FaEdit, FaTrash, FaList, FaTh, FaFilter, FaSort, FaPencilAlt, FaGlobe, FaTimes as FaClose, FaSave, FaArrowLeft, FaPercent, FaEuroSign, FaCheck, FaImage } from 'react-icons/fa';\n\n// Design Templates\nconst designTemplates = {\n  modern: {\n    name: \"Modern & Minimal\",\n    description: \"Clean, viel Weißraum, moderne Typografie\",\n    colors: {\n      primary: \"#2c3e50\",\n      secondary: \"#ecf0f1\",\n      accent: \"#3498db\",\n      background: \"#ffffff\",\n      sidebar: \"#f8f9fa\",\n      text: \"#2c3e50\",\n      card: \"#ffffff\",\n      cardBorder: \"#e9ecef\",\n      paper: \"#ffffff\",\n      paperShadow: \"0 4px 12px rgba(44, 62, 80, 0.1)\"\n    }\n  },\n  dark: {\n    name: \"Dark Theme\",\n    description: \"Dunkles Design mit Akzentfarben\",\n    colors: {\n      primary: \"#1a1a1a\",\n      secondary: \"#2d2d2d\",\n      accent: \"#00d4aa\",\n      background: \"#121212\",\n      sidebar: \"#1e1e1e\",\n      text: \"#ffffff\",\n      card: \"#2d2d2d\",\n      cardBorder: \"#404040\",\n      paper: \"#2d2d2d\",\n      paperShadow: \"0 4px 12px rgba(0, 0, 0, 0.3)\"\n    }\n  },\n  warm: {\n    name: \"Warm & Gastronomisch\",\n    description: \"Braun/Beige Töne, gemütlich\",\n    colors: {\n      primary: \"#8B4513\",\n      secondary: \"#F5DEB3\",\n      accent: \"#D2691E\",\n      background: \"#FFF8DC\",\n      sidebar: \"#DEB887\",\n      text: \"#654321\",\n      card: \"#FDF5E6\",\n      cardBorder: \"#D2B48C\",\n      paper: \"#FFFFFF\",\n      paperShadow: \"0 4px 12px rgba(139, 69, 19, 0.15)\"\n    }\n  },\n  professional: {\n    name: \"Professional Blue\",\n    description: \"Business-Look mit Blau\",\n    colors: {\n      primary: \"#1e3a8a\",\n      secondary: \"#dbeafe\",\n      accent: \"#3b82f6\",\n      background: \"#f8fafc\",\n      sidebar: \"#1e40af\",\n      text: \"#1e293b\",\n      card: \"#ffffff\",\n      cardBorder: \"#e2e8f0\",\n      paper: \"#ffffff\",\n      paperShadow: \"0 4px 12px rgba(30, 58, 138, 0.1)\"\n    }\n  }\n};\n\nfunction App() {\n  const [sidebarOpen, setSidebarOpen] = useState(true);\n  const [isMobile, setIsMobile] = useState(false);\n  const [currentPage, setCurrentPage] = useState('dashboard');\n  \n  // Debug: Log currentPage changes\n  useEffect(() => {\n    console.log('Current page changed to:', currentPage);\n  }, [currentPage]);\n  const [currentDesign, setCurrentDesign] = useState('warm');\n  const [showDesignSelector, setShowDesignSelector] = useState(false);\n\n  // Artikelverwaltung State\n  const [articles, setArticles] = useState([\n    {\n      id: '1',\n      name: 'Tomaten',\n      supplierId: '1',\n      category: 'Gemüse & Obst',\n      supplierArticleNumber: 'TOM-001',\n      bundlePrice: 12.50,\n      bundleUnit: 'Kiste',\n      content: 5,\n      contentUnit: 'kg',\n      pricePerUnit: 2.50,\n      isGrossPrice: true,\n      ingredients: ['Tomaten'],\n      allergens: [],\n      nutritionInfo: {\n        calories: 18,\n        kilojoules: 75.3,\n        protein: 0.9,\n        fat: 0.2,\n        carbohydrates: 3.9,\n        fiber: 1.2,\n        sugar: 2.6,\n        salt: 0.005\n      }\n    },\n    {\n      id: '2',\n      name: 'Olivenöl',\n      supplierId: '2',\n      category: 'Öle & Fette',\n      supplierArticleNumber: 'OLI-002',\n      bundlePrice: 45.00,\n      bundleUnit: 'Flasche',\n      content: 1,\n      contentUnit: 'L',\n      pricePerUnit: 45.00,\n      isGrossPrice: false,\n      ingredients: ['Olivenöl'],\n      allergens: [],\n      nutritionInfo: {\n        calories: 884,\n        kilojoules: 3698.7,\n        protein: 0,\n        fat: 100,\n        carbohydrates: 0,\n        fiber: 0,\n        sugar: 0,\n        salt: 0\n      }\n    },\n    {\n      id: '3',\n      name: 'Parmesan',\n      supplierId: '3',\n      category: 'Milchprodukte',\n      supplierArticleNumber: 'PAR-003',\n      bundlePrice: 28.80,\n      bundleUnit: 'Stück',\n      content: 0.5,\n      contentUnit: 'kg',\n      pricePerUnit: 57.60,\n      isGrossPrice: true,\n      ingredients: ['Milch', 'Salz', 'Lab'],\n      allergens: ['Milch (einschließlich Laktose)'],\n      nutritionInfo: {\n        calories: 431,\n        kilojoules: 1803.3,\n        protein: 38.5,\n        fat: 29,\n        carbohydrates: 4.1,\n        fiber: 0,\n        sugar: 0.1,\n        salt: 1.5\n      }\n    }\n  ]);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [viewMode, setViewMode] = useState('list'); // 'list' oder 'grid'\n  const [selectedCategory, setSelectedCategory] = useState('');\n  const [selectedSupplier, setSelectedSupplier] = useState('');\n  const [sortField, setSortField] = useState('name');\n  const [sortDirection, setSortDirection] = useState('asc');\n  const [selectedArticles, setSelectedArticles] = useState<string[]>([]);\n\n  // Lieferantenverwaltung State\n  const [supplierViewMode, setSupplierViewMode] = useState('list'); // 'list' oder 'grid'\n  const [supplierSortField, setSupplierSortField] = useState('name');\n  const [supplierSortDirection, setSupplierSortDirection] = useState('asc');\n  const [selectedSuppliers, setSelectedSuppliers] = useState<string[]>([]);\n\n  // Lieferanten State\n  const [suppliers, setSuppliers] = useState([\n    {\n      id: '1',\n      name: 'Gemüsehof Müller',\n      contactPerson: 'Hans Müller',\n      email: 'hans.mueller@gemuesehof.de',\n      phoneNumbers: [\n        { type: 'Geschäft', number: '040-12345678' },\n        { type: 'Mobil', number: '0170-1234567' }\n      ],\n      address: {\n        street: 'Gemüsestraße 123',\n        zipCode: '20095',\n        city: 'Hamburg',\n        country: 'Deutschland'\n      },\n      website: 'www.gemuesehof-mueller.de',\n      notes: 'Bio-Gemüse, Lieferung dienstags und freitags'\n    },\n    {\n      id: '2',\n      name: 'Ölmühle Schmidt',\n      contactPerson: 'Maria Schmidt',\n      email: 'info@oelmuehle-schmidt.de',\n      phoneNumbers: [\n        { type: 'Geschäft', number: '040-87654321' }\n      ],\n      address: {\n        street: 'Ölweg 456',\n        zipCode: '20144',\n        city: 'Hamburg',\n        country: 'Deutschland'\n      },\n      website: 'www.oelmuehle-schmidt.de',\n      notes: 'Kaltgepresste Öle, Mindestbestellmenge 50€'\n    },\n    {\n      id: '3',\n      name: 'Käserei Weber',\n      contactPerson: 'Peter Weber',\n      email: 'peter.weber@kaeserei-weber.de',\n      phoneNumbers: [\n        { type: 'Geschäft', number: '040-11223344' },\n        { type: 'Fax', number: '040-11223345' }\n      ],\n      address: {\n        street: 'Käseallee 789',\n        zipCode: '20249',\n        city: 'Hamburg',\n        country: 'Deutschland'\n      },\n      website: 'www.kaeserei-weber.de',\n      notes: 'Traditionelle Käsesorten, Lieferung montags'\n    }\n  ]);\n\n  // Artikelformular State\n  const [showArticleForm, setShowArticleForm] = useState(false);\n  const [editingArticle, setEditingArticle] = useState<any>(null);\n  const [showCategoryDropdown, setShowCategoryDropdown] = useState(false);\n  const [categorySearchTerm, setCategorySearchTerm] = useState('');\n  const [selectedCategoryIndex, setSelectedCategoryIndex] = useState(-1);\n  const [showSupplierDropdown, setShowSupplierDropdown] = useState(false);\n  const [supplierSearchTerm, setSupplierSearchTerm] = useState('');\n  const [selectedSupplierIndex, setSelectedSupplierIndex] = useState(-1);\n  const [showSupplierForm, setShowSupplierForm] = useState(false);\n  const [showPriceConverter, setShowPriceConverter] = useState(false);\n  const [selectedVatRate, setSelectedVatRate] = useState(19);\n  const [showBundleUnitDropdown, setShowBundleUnitDropdown] = useState(false);\n  const [bundleUnitSearchTerm, setBundleUnitSearchTerm] = useState('');\n  const [selectedBundleUnitIndex, setSelectedBundleUnitIndex] = useState(-1);\n  const [showContentUnitDropdown, setShowContentUnitDropdown] = useState(false);\n  const [contentUnitSearchTerm, setContentUnitSearchTerm] = useState('');\n  const [selectedContentUnitIndex, setSelectedContentUnitIndex] = useState(-1);\n  const [supplierForm, setSupplierForm] = useState({\n    name: '',\n    contactPerson: '',\n    email: '',\n    phoneNumbers: [{ type: 'Geschäft', number: '' }],\n    address: {\n      street: '',\n      zipCode: '',\n      city: '',\n      country: 'Deutschland'\n    },\n    website: '',\n    notes: ''\n  });\n  const [articleForm, setArticleForm] = useState({\n    name: '',\n    category: '',\n    supplierId: '',\n    supplierArticleNumber: '',\n    bundlePrice: 0,\n    bundleUnit: '',\n    content: 0,\n    contentUnit: '',\n    pricePerUnit: 0,\n    isGrossPrice: true,\n    ingredients: [] as string[],\n    allergens: [] as string[],\n    nutrition: {\n      calories: 0,\n      kilojoules: 0,\n      protein: 0,\n      fat: 0,\n      carbohydrates: 0,\n      fiber: 0,\n      sugar: 0,\n      salt: 0\n    }\n  });\n\n  // Check screen size on mount and resize\n  useEffect(() => {\n    const checkScreenSize = () => {\n      setIsMobile(window.innerWidth < 768);\n      if (window.innerWidth < 768) {\n        setSidebarOpen(false);\n      } else {\n        setSidebarOpen(true);\n      }\n    };\n\n    checkScreenSize();\n    window.addEventListener('resize', checkScreenSize);\n    return () => window.removeEventListener('resize', checkScreenSize);\n  }, []);\n\n  const toggleSidebar = () => {\n    setSidebarOpen(!sidebarOpen);\n  };\n\n  const getCurrentColors = () => designTemplates[currentDesign as keyof typeof designTemplates].colors;\n\n  // Artikelverwaltung Hilfsfunktionen\n  const getUniqueCategories = () => {\n    const articleCategories = articles.map(article => article.category).filter(cat => cat);\n    const allCategories = Array.from(new Set([...CATEGORIES, ...articleCategories]));\n    return allCategories.sort();\n  };\n\n  // Nur Kategorien anzeigen, die tatsächlich in Artikeln verwendet werden\n  const getUsedCategories = () => {\n    const usedCategories = articles.map(article => article.category).filter(cat => cat);\n    return Array.from(new Set(usedCategories)).sort();\n  };\n\n  const getSupplierName = (supplierId: string) => {\n    const supplier = suppliers.find(s => s.id === supplierId);\n    return supplier ? supplier.name : 'Unbekannt';\n  };\n\n  const getUniqueSuppliers = () => {\n    const supplierNames = suppliers.map(supplier => supplier.name);\n    return supplierNames.sort();\n  };\n\n  const filteredAndSortedArticles = () => {\n    let filtered = articles.filter(article => \n      article.name.toLowerCase().includes(searchTerm.toLowerCase()) &&\n      (selectedCategory === '' || article.category === selectedCategory) &&\n      (selectedSupplier === '' || getSupplierName(article.supplierId) === selectedSupplier)\n    );\n\n    // Sortierung\n    filtered.sort((a, b) => {\n      let aValue = a[sortField as keyof typeof a];\n      let bValue = b[sortField as keyof typeof b];\n      \n      if (typeof aValue === 'string' && typeof bValue === 'string') {\n        aValue = aValue.toLowerCase();\n        bValue = bValue.toLowerCase();\n      }\n      \n      if (aValue < bValue) return sortDirection === 'asc' ? -1 : 1;\n      if (aValue > bValue) return sortDirection === 'asc' ? 1 : -1;\n      return 0;\n    });\n\n    return filtered;\n  };\n\n  const filteredAndSortedSuppliers = () => {\n    let filtered = suppliers.filter(supplier => {\n      const matchesSearch = supplier.name.toLowerCase().includes(supplierSearchTerm.toLowerCase()) ||\n                           supplier.contactPerson.toLowerCase().includes(supplierSearchTerm.toLowerCase()) ||\n                           supplier.email.toLowerCase().includes(supplierSearchTerm.toLowerCase()) ||\n                           supplier.address.city.toLowerCase().includes(supplierSearchTerm.toLowerCase());\n      return matchesSearch;\n    });\n\n    return filtered.sort((a, b) => {\n      let aValue = a[supplierSortField as keyof typeof a];\n      let bValue = b[supplierSortField as keyof typeof b];\n      \n      if (typeof aValue === 'string') aValue = aValue.toLowerCase();\n      if (typeof bValue === 'string') bValue = bValue.toLowerCase();\n      \n      if (aValue < bValue) return supplierSortDirection === 'asc' ? -1 : 1;\n      if (aValue > bValue) return supplierSortDirection === 'asc' ? 1 : -1;\n      return 0;\n    });\n  };\n\n  const handleSelectArticle = (articleId: string) => {\n    setSelectedArticles(prev => \n      prev.includes(articleId) \n        ? prev.filter(id => id !== articleId)\n        : [...prev, articleId]\n    );\n  };\n\n  const handleSelectAll = () => {\n    const filteredArticles = filteredAndSortedArticles();\n    if (selectedArticles.length === filteredArticles.length) {\n      setSelectedArticles([]);\n    } else {\n      setSelectedArticles(filteredArticles.map(article => article.id));\n    }\n  };\n\n  const handleDeleteArticles = () => {\n    if (selectedArticles.length > 0) {\n      // Sicherheitsabfrage bei mehr als 2 Artikeln\n      if (selectedArticles.length > 2) {\n        setDeleteDialogData({\n          type: 'bulk',\n          count: selectedArticles.length\n        });\n        setShowDeleteDialog(true);\n      } else {\n        // Direkte Löschung bei 1-2 Artikeln\n        setArticles(prev => prev.filter(article => !selectedArticles.includes(article.id)));\n        setSelectedArticles([]);\n      }\n    }\n  };\n\n  const handleDeleteSingleArticle = (articleId: string, articleName: string) => {\n    // Direkte Löschung ohne Sicherheitsabfrage\n    setArticles(prev => prev.filter(article => article.id !== articleId));\n    setSelectedArticles(prev => prev.filter(id => id !== articleId));\n  };\n\n  const handleConfirmDelete = () => {\n    if (deleteDialogData) {\n      if (deleteDialogData.type === 'bulk' && deleteDialogData.count) {\n        // Prüfe, ob Artikel oder Lieferanten gelöscht werden sollen\n        if (selectedArticles.length > 0) {\n          setArticles(prev => prev.filter(article => !selectedArticles.includes(article.id)));\n          setSelectedArticles([]);\n        } else if (selectedSuppliers.length > 0) {\n          setSuppliers(prev => prev.filter(supplier => !selectedSuppliers.includes(supplier.id)));\n          setSelectedSuppliers([]);\n        }\n      }\n    }\n    setShowDeleteDialog(false);\n    setDeleteDialogData(null);\n  };\n\n  const handleCancelDelete = () => {\n    setShowDeleteDialog(false);\n    setDeleteDialogData(null);\n  };\n\n  // Lieferanten-Auswahlfunktionen\n  const handleSelectSupplier = (supplierId: string) => {\n    setSelectedSuppliers(prev => \n      prev.includes(supplierId) \n        ? prev.filter(id => id !== supplierId)\n        : [...prev, supplierId]\n    );\n  };\n\n  const handleSelectAllSuppliers = () => {\n    const filteredSuppliers = filteredAndSortedSuppliers();\n    if (selectedSuppliers.length === filteredSuppliers.length) {\n      setSelectedSuppliers([]);\n    } else {\n      setSelectedSuppliers(filteredSuppliers.map(supplier => supplier.id));\n    }\n  };\n\n  const handleDeleteSuppliers = () => {\n    if (selectedSuppliers.length > 0) {\n      // Sicherheitsabfrage bei mehr als 2 Lieferanten\n      if (selectedSuppliers.length > 2) {\n        setDeleteDialogData({\n          type: 'bulk',\n          count: selectedSuppliers.length\n        });\n        setShowDeleteDialog(true);\n      } else {\n        // Direkte Löschung bei 1-2 Lieferanten\n        setSuppliers(prev => prev.filter(supplier => !selectedSuppliers.includes(supplier.id)));\n        setSelectedSuppliers([]);\n      }\n    }\n  };\n\n  const handleDeleteSingleSupplier = (supplierId: string, supplierName: string) => {\n    // Direkte Löschung ohne Sicherheitsabfrage\n    setSuppliers(prev => prev.filter(supplier => supplier.id !== supplierId));\n    setSelectedSuppliers(prev => prev.filter(id => id !== supplierId));\n  };\n\n  // Import/Export-System Hilfsfunktionen\n  const appFields = [\n    { key: 'name', label: 'Artikelname' },\n    { key: 'category', label: 'Kategorie' },\n    { key: 'supplier', label: 'Lieferant' },\n    { key: 'supplierArticleNumber', label: 'Lieferanten-Artikelnummer' },\n    { key: 'bundleUnit', label: 'Gebindeeinheit' },\n    { key: 'bundlePrice', label: 'Gebindepreis' },\n    { key: 'content', label: 'Inhalt' },\n    { key: 'contentUnit', label: 'Inhaltseinheit' },\n    { key: 'pricePerUnit', label: 'Preis pro Einheit' },\n    { key: 'ingredients', label: 'Inhaltsstoffe' },\n    { key: 'allergens', label: 'Allergene' },\n    { key: 'calories', label: 'Kalorien (kcal)' },\n    { key: 'kilojoules', label: 'Kilojoule (kJ)' },\n    { key: 'protein', label: 'Protein (g)' },\n    { key: 'fat', label: 'Fett (g)' },\n    { key: 'carbohydrates', label: 'Kohlenhydrate (g)' },\n    { key: 'fiber', label: 'Ballaststoffe (g)' },\n    { key: 'sugar', label: 'Zucker (g)' },\n    { key: 'salt', label: 'Salz (g)' }\n  ];\n\n  const getDefaultFieldMapping = (headers: string[]) => {\n    const mapping: {[key: string]: string} = {};\n    \n    headers.forEach(header => {\n      const lowerHeader = header.toLowerCase();\n      \n      // Automatische Zuordnung basierend auf Schlüsselwörtern\n      if (lowerHeader.includes('name') || lowerHeader.includes('artikel')) {\n        mapping[header] = 'name';\n      } else if (lowerHeader.includes('kategorie') || lowerHeader.includes('category')) {\n        mapping[header] = 'category';\n      } else if (lowerHeader.includes('lieferant') || lowerHeader.includes('supplier')) {\n        mapping[header] = 'supplier';\n      } else if (lowerHeader.includes('nummer') || lowerHeader.includes('number')) {\n        mapping[header] = 'supplierArticleNumber';\n      } else if (lowerHeader.includes('gebinde') || lowerHeader.includes('bundle')) {\n        mapping[header] = 'bundleUnit';\n      } else if (lowerHeader.includes('preis') || lowerHeader.includes('price')) {\n        mapping[header] = 'bundlePrice';\n      } else if (lowerHeader.includes('inhalt') || lowerHeader.includes('content')) {\n        mapping[header] = 'content';\n      } else if (lowerHeader.includes('einheit') || lowerHeader.includes('unit')) {\n        mapping[header] = 'contentUnit';\n      } else if (lowerHeader.includes('kalorien') || lowerHeader.includes('calories')) {\n        mapping[header] = 'calories';\n      } else if (lowerHeader.includes('protein')) {\n        mapping[header] = 'protein';\n      } else if (lowerHeader.includes('fett') || lowerHeader.includes('fat')) {\n        mapping[header] = 'fat';\n      } else if (lowerHeader.includes('kohlenhydrate') || lowerHeader.includes('carbohydrates')) {\n        mapping[header] = 'carbohydrates';\n      }\n    });\n    \n    return mapping;\n  };\n\n  const handleFileUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n\n    // Automatische Zeichenkodierung-Erkennung\n    const detectEncoding = async (file: File): Promise<string> => {\n      try {\n        // Lese die ersten Bytes der Datei\n        const buffer = await file.slice(0, 4).arrayBuffer();\n        const bytes = new Uint8Array(buffer);\n        \n        // BOM (Byte Order Mark) Erkennung\n        if (bytes.length >= 3 && bytes[0] === 0xEF && bytes[1] === 0xBB && bytes[2] === 0xBF) {\n          console.log('Detected encoding: UTF-8 with BOM');\n          return 'utf-8';\n        }\n        if (bytes.length >= 2 && bytes[0] === 0xFF && bytes[1] === 0xFE) {\n          console.log('Detected encoding: UTF-16 LE');\n          return 'utf-16le';\n        }\n        if (bytes.length >= 2 && bytes[0] === 0xFE && bytes[1] === 0xFF) {\n          console.log('Detected encoding: UTF-16 BE');\n          return 'utf-16be';\n        }\n        \n        // Kein BOM gefunden, versuche verschiedene Kodierungen\n        const encodings = ['utf-8', 'iso-8859-1', 'windows-1252', 'latin1'];\n        \n        for (const encoding of encodings) {\n          try {\n            const text = await file.slice(0, 1024).text();\n            // Prüfe auf deutsche Umlaute\n            if (/[äöüßÄÖÜ]/.test(text)) {\n              console.log(`Detected encoding: ${encoding} (contains German umlauts)`);\n              return encoding;\n            }\n          } catch (error) {\n            continue;\n          }\n        }\n        \n        // Wenn keine Umlaute gefunden wurden, versuche eine alternative Erkennung\n        // Lese die ersten Bytes und prüfe auf typische Windows-1252 Zeichen\n        const sampleBuffer = await file.slice(0, 512).arrayBuffer();\n        const sampleBytes = new Uint8Array(sampleBuffer);\n        \n        // Prüfe auf typische Windows-1252 Zeichen für deutsche Umlaute\n        const hasGermanChars = sampleBytes.some(byte => \n          byte === 0xE4 || byte === 0xF6 || byte === 0xFC || byte === 0xDF || // äöüß\n          byte === 0xC4 || byte === 0xD6 || byte === 0xDC // ÄÖÜ\n        );\n        \n        if (hasGermanChars) {\n          console.log('Detected encoding: windows-1252 (contains German character bytes)');\n          return 'windows-1252';\n        }\n        \n        console.log('Using default encoding: UTF-8');\n        return 'utf-8';\n      } catch (error) {\n        console.log('Error detecting encoding, using UTF-8');\n        return 'utf-8';\n      }\n    };\n\n        // Verbesserte Kodierung-Erkennung mit manueller Byte-Konvertierung\n    const decodeWithEncoding = async (file: File, encoding: string): Promise<string> => {\n      try {\n        const arrayBuffer = await file.arrayBuffer();\n        const bytes = new Uint8Array(arrayBuffer);\n        \n        // Entferne BOM falls vorhanden\n        let startIndex = 0;\n        if (encoding === 'utf-8' && bytes.length >= 3 && bytes[0] === 0xEF && bytes[1] === 0xBB && bytes[2] === 0xBF) {\n          startIndex = 3;\n        } else if (encoding === 'utf-16le' && bytes.length >= 2 && bytes[0] === 0xFF && bytes[1] === 0xFE) {\n          startIndex = 2;\n        } else if (encoding === 'utf-16be' && bytes.length >= 2 && bytes[0] === 0xFE && bytes[1] === 0xFF) {\n          startIndex = 2;\n        }\n        \n        if (encoding === 'utf-8') {\n          // UTF-8 Dekodierung\n          return new TextDecoder('utf-8').decode(bytes.slice(startIndex));\n        } else if (encoding === 'iso-8859-1' || encoding === 'latin1') {\n          // ISO-8859-1/Latin1 Dekodierung\n          return new TextDecoder('iso-8859-1').decode(bytes.slice(startIndex));\n        } else if (encoding === 'windows-1252') {\n          // Windows-1252 Dekodierung - vereinfachte Version\n          let result = '';\n          for (let i = startIndex; i < bytes.length; i++) {\n            const byte = bytes[i];\n            if (byte < 0x80) {\n              result += String.fromCharCode(byte);\n            } else {\n              // Windows-1252 zu UTF-8 Konvertierung für deutsche Umlaute\n              if (byte === 0xE4) result += 'ä'; // ä\n              else if (byte === 0xF6) result += 'ö'; // ö\n              else if (byte === 0xFC) result += 'ü'; // ü\n              else if (byte === 0xDF) result += 'ß'; // ß\n              else if (byte === 0xC4) result += 'Ä'; // Ä\n              else if (byte === 0xD6) result += 'Ö'; // Ö\n              else if (byte === 0xDC) result += 'Ü'; // Ü\n              else if (byte === 0xE1) result += 'á'; // á\n              else if (byte === 0xE9) result += 'é'; // é\n              else if (byte === 0xED) result += 'í'; // í\n              else if (byte === 0xF3) result += 'ó'; // ó\n              else if (byte === 0xFA) result += 'ú'; // ú\n              else if (byte === 0xF1) result += 'ñ'; // ñ\n              else if (byte === 0xE7) result += 'ç'; // ç\n              else if (byte === 0xE0) result += 'à'; // à\n              else if (byte === 0xE8) result += 'è'; // è\n              else if (byte === 0xEC) result += 'ì'; // ì\n              else if (byte === 0xF2) result += 'ò'; // ò\n              else if (byte === 0xF9) result += 'ù'; // ù\n              else if (byte === 0xE2) result += 'â'; // â\n              else if (byte === 0xEA) result += 'ê'; // ê\n              else if (byte === 0xEE) result += 'î'; // î\n              else if (byte === 0xF4) result += 'ô'; // ô\n              else if (byte === 0xFB) result += 'û'; // û\n              else if (byte === 0xE3) result += 'ã'; // ã\n              else if (byte === 0xF5) result += 'õ'; // õ\n              else if (byte === 0xE5) result += 'å'; // å\n              else if (byte === 0xC5) result += 'Å'; // Å\n              else if (byte === 0xE6) result += 'æ'; // æ\n              else if (byte === 0xC6) result += 'Æ'; // Æ\n              else if (byte === 0xF8) result += 'ø'; // ø\n              else if (byte === 0xD8) result += 'Ø'; // Ø\n              else if (byte === 0xC1) result += 'Á'; // Á\n              else if (byte === 0xC9) result += 'É'; // É\n              else if (byte === 0xCD) result += 'Í'; // Í\n              else if (byte === 0xD3) result += 'Ó'; // Ó\n              else if (byte === 0xDA) result += 'Ú'; // Ú\n              else if (byte === 0xD1) result += 'Ñ'; // Ñ\n              else if (byte === 0xC7) result += 'Ç'; // Ç\n              else if (byte === 0xC0) result += 'À'; // À\n              else if (byte === 0xC8) result += 'È'; // È\n              else if (byte === 0xCC) result += 'Ì'; // Ì\n              else if (byte === 0xD2) result += 'Ò'; // Ò\n              else if (byte === 0xD9) result += 'Ù'; // Ù\n              else if (byte === 0xC2) result += 'Â'; // Â\n              else if (byte === 0xCA) result += 'Ê'; // Ê\n              else if (byte === 0xCE) result += 'Î'; // Î\n              else if (byte === 0xD4) result += 'Ô'; // Ô\n              else if (byte === 0xDB) result += 'Û'; // Û\n              else if (byte === 0xC3) result += 'Ã'; // Ã\n              else if (byte === 0xD5) result += 'Õ'; // Õ\n              else result += String.fromCharCode(byte);\n            }\n          }\n          return result;\n        }\n        \n        // Fallback auf UTF-8\n        return new TextDecoder('utf-8').decode(bytes.slice(startIndex));\n      } catch (error) {\n        console.error('Error decoding with encoding:', encoding, error);\n        throw error;\n      }\n    };\n\n    const processFile = async () => {\n      try {\n        const encoding = await detectEncoding(file);\n        console.log('Processing file with encoding:', encoding);\n        setDetectedEncoding(encoding);\n        \n        // Verwende die verbesserte Dekodierung\n        const content = await decodeWithEncoding(file, encoding);\n        \n        // Debug: Zeige die ersten 200 Zeichen des Inhalts\n        console.log('Decoded content preview:', content.substring(0, 200));\n        console.log('Contains German umlauts:', /[äöüßÄÖÜ]/.test(content));\n        \n        // Automatische Erkennung des Dateiformats basierend auf Dateiendung\n        if (file.name.toLowerCase().endsWith('.csv')) {\n          parseCSV(content);\n        } else if (file.name.toLowerCase().endsWith('.json')) {\n          parseJSON(content);\n        } else {\n          // Fallback: Versuche CSV zu parsen, wenn es nicht funktioniert, versuche JSON\n          try {\n            parseCSV(content);\n          } catch (error) {\n            parseJSON(content);\n          }\n        }\n      } catch (error) {\n        console.error('Error processing file:', error);\n        setImportErrors(['Fehler beim Lesen der Datei']);\n      }\n    };\n\n    processFile();\n  };\n\n  const parseCSV = (content: string) => {\n    const lines = content.split('\\n').filter(line => line.trim());\n    if (lines.length === 0) return;\n\n    // Automatische Erkennung des Trennzeichens\n    const detectDelimiter = (firstLine: string) => {\n      const commaCount = (firstLine.match(/,/g) || []).length;\n      const semicolonCount = (firstLine.match(/;/g) || []).length;\n      const tabCount = (firstLine.match(/\\t/g) || []).length;\n      \n      console.log('Delimiter detection:', { commaCount, semicolonCount, tabCount });\n      \n      // Wähle das häufigste Trennzeichen\n      if (semicolonCount > commaCount && semicolonCount > tabCount) {\n        return ';';\n      } else if (tabCount > commaCount && tabCount > semicolonCount) {\n        return '\\t';\n      } else {\n        return ','; // Standard ist Komma\n      }\n    };\n\n    const delimiter = detectDelimiter(lines[0]);\n    console.log('Detected delimiter:', delimiter);\n\n    // Verbesserte CSV-Parsing mit automatischer Trennzeichen-Erkennung\n    const parseCSVLine = (line: string, delim: string) => {\n      const result = [];\n      let current = '';\n      let inQuotes = false;\n      \n      for (let i = 0; i < line.length; i++) {\n        const char = line[i];\n        if (char === '\"') {\n          inQuotes = !inQuotes;\n        } else if (char === delim && !inQuotes) {\n          result.push(current.trim());\n          current = '';\n        } else {\n          current += char;\n        }\n      }\n      result.push(current.trim());\n      return result;\n    };\n\n    const headers = parseCSVLine(lines[0], delimiter).map(h => h.replace(/\"/g, ''));\n    const data = lines.slice(1).map(line => {\n      const values = parseCSVLine(line, delimiter).map(v => v.replace(/\"/g, ''));\n      const row: any = {};\n      headers.forEach((header, index) => {\n        row[header] = values[index] || '';\n      });\n      return row;\n    }).filter(row => Object.values(row).some(val => val !== '')); // Filtere leere Zeilen\n\n    console.log('CSV Headers:', headers); // Debug-Ausgabe\n    console.log('Detected delimiter:', delimiter);\n    setImportHeaders(headers);\n    setImportData(data);\n    setFieldMappings(getDefaultFieldMapping(headers));\n    generatePreview(data, getDefaultFieldMapping(headers));\n  };\n\n  const parseJSON = (content: string) => {\n    try {\n      const data = JSON.parse(content);\n      if (Array.isArray(data) && data.length > 0) {\n        const headers = Object.keys(data[0]);\n        console.log('JSON Headers:', headers); // Debug-Ausgabe\n        setImportHeaders(headers);\n        setImportData(data);\n        setFieldMappings(getDefaultFieldMapping(headers));\n        generatePreview(data, getDefaultFieldMapping(headers));\n      } else {\n        setImportErrors(['JSON-Datei enthält keine gültigen Daten']);\n      }\n    } catch (error) {\n      console.error('JSON Parse Error:', error);\n      setImportErrors(['Ungültiges JSON-Format']);\n    }\n  };\n\n  const generatePreview = (data: any[], mappings: {[key: string]: string}) => {\n    // Sammle bestehende Artikelnamen für Duplikatsprüfung\n    const existingArticleNames = articles.map(article => article.name.toLowerCase().trim());\n    \n    // Sammle bestehende Lieferantennamen für Duplikatsprüfung\n    const existingSupplierNames = suppliers.map(supplier => supplier.name.toLowerCase().trim());\n    \n    const preview = data.slice(0, 5).map(row => {\n      const mappedRow: any = {};\n      \n      // Sammle alle Werte\n      Object.entries(mappings).forEach(([fileHeader, appField]) => {\n        if (row[fileHeader] !== undefined && row[fileHeader] !== '') {\n          if (appField === 'bundlePrice' || appField === 'pricePerUnit' || appField === 'content') {\n            // Verwende die Hilfsfunktion für korrekte Zahlenformatierung\n            mappedRow[appField] = parseNumberValue(row[fileHeader]);\n          } else {\n            mappedRow[appField] = row[fileHeader];\n          }\n        }\n      });\n\n      // Duplikatsprüfung für Vorschau\n      const articleName = mappedRow.name ? mappedRow.name.toLowerCase().trim() : '';\n      if (articleName && existingArticleNames.includes(articleName)) {\n        mappedRow.duplicateWarning = '⚠️ Artikel existiert bereits';\n      } else if (articleName === '') {\n        mappedRow.duplicateWarning = '⚠️ Kein Artikelname';\n      }\n\n      // Lieferanten-Prüfung für Vorschau\n      const supplierName = mappedRow.supplier ? mappedRow.supplier.toLowerCase().trim() : '';\n      if (supplierName && !existingSupplierNames.includes(supplierName)) {\n        mappedRow.supplierWarning = '🆕 Neuer Lieferant wird erstellt';\n      }\n\n      // Berechne fehlende Preise für Vorschau\n      const bundlePrice = mappedRow.bundlePrice || 0;\n      const pricePerUnit = mappedRow.pricePerUnit || 0;\n      const content = mappedRow.content || 0;\n\n      if (bundlePrice > 0 && content > 0 && pricePerUnit === 0) {\n        mappedRow.calculatedPricePerUnit = bundlePrice / content;\n        mappedRow.priceCalculationNote = 'Preis pro Einheit wird berechnet';\n      } else if (bundlePrice > 0 && pricePerUnit > 0 && content === 0) {\n        mappedRow.calculatedContent = bundlePrice / pricePerUnit;\n        mappedRow.priceCalculationNote = 'Inhalt wird berechnet';\n      } else if (pricePerUnit > 0 && content > 0 && bundlePrice === 0) {\n        mappedRow.calculatedBundlePrice = pricePerUnit * content;\n        mappedRow.priceCalculationNote = 'Gebindepreis wird berechnet';\n      } else if (bundlePrice > 0 && content > 0 && pricePerUnit > 0) {\n        const calculatedPricePerUnit = bundlePrice / content;\n        const priceDifference = Math.abs(calculatedPricePerUnit - pricePerUnit);\n        const priceDifferencePercent = (priceDifference / pricePerUnit) * 100;\n        \n        if (priceDifferencePercent > 5) {\n          mappedRow.priceCalculationNote = `Preisabweichung: ${priceDifferencePercent.toFixed(1)}% - Gebindepreis wird als Basis verwendet`;\n          mappedRow.calculatedPricePerUnit = calculatedPricePerUnit;\n        } else {\n          mappedRow.priceCalculationNote = 'Preise sind konsistent';\n        }\n      }\n\n      return mappedRow;\n    });\n    setImportPreview(preview);\n  };\n\n  const handleFieldMappingChange = (fileHeader: string, appField: string) => {\n    const newMappings = { ...fieldMappings };\n    if (appField) {\n      newMappings[fileHeader] = appField;\n    } else {\n      delete newMappings[fileHeader];\n    }\n    setFieldMappings(newMappings);\n    generatePreview(importData, newMappings);\n  };\n\n  const handleImport = () => {\n    // Sammle alle Artikelnamen aus bestehenden Artikeln für Duplikatsprüfung\n    const existingArticleNames = articles.map(article => article.name.toLowerCase().trim());\n    \n    // Sammle alle Lieferantennamen aus bestehenden Lieferanten für Duplikatsprüfung\n    const existingSupplierNames = suppliers.map(supplier => supplier.name.toLowerCase().trim());\n    \n    console.log('Existing article names for duplicate check:', existingArticleNames);\n    console.log('Existing supplier names for duplicate check:', existingSupplierNames);\n\n    // Sammle alle neuen Lieferanten, die während des Imports erstellt werden\n    const newSuppliersToAdd: any[] = [];\n    const supplierNameToIdMap: { [key: string]: string } = {};\n    \n    console.log('Starting import with existing suppliers:', suppliers.map(s => s.name));\n\n    const newArticles = importData.map((row, index) => {\n      const article: any = {\n        id: Date.now().toString() + index,\n        name: '',\n        category: '',\n        supplier: '',\n        supplierArticleNumber: '',\n        bundleUnit: '',\n        bundlePrice: 0,\n        bundlePriceType: 'brutto',\n        content: 0,\n        contentUnit: '',\n        pricePerUnit: 0,\n        ingredients: [],\n        allergens: [],\n        nutritionInfo: {\n          calories: 0,\n          kilojoules: 0,\n          protein: 0,\n          fat: 0,\n          carbohydrates: 0,\n          fiber: 0,\n          sugar: 0,\n          salt: 0\n        }\n      };\n\n      // Sammle alle Werte aus der Zeile\n      Object.entries(fieldMappings).forEach(([fileHeader, appField]) => {\n        const value = row[fileHeader];\n        if (value !== undefined && value !== '') {\n          if (appField === 'calories' || appField === 'kilojoules' || appField === 'protein' || \n              appField === 'fat' || appField === 'carbohydrates' || appField === 'fiber' || \n              appField === 'sugar' || appField === 'salt') {\n            article.nutritionInfo[appField] = isNaN(Number(value)) ? 0 : Number(value);\n          } else if (appField === 'ingredients' || appField === 'allergens') {\n            article[appField] = value.split(';').map((item: string) => item.trim()).filter((item: string) => item !== '');\n          } else if (appField === 'bundlePrice' || appField === 'pricePerUnit' || appField === 'content') {\n            // Verwende die Hilfsfunktion für korrekte Zahlenformatierung\n            article[appField] = parseNumberValue(value);\n          } else {\n            article[appField] = isNaN(Number(value)) ? value : Number(value);\n          }\n        }\n      });\n\n      // Intelligente Preisberechnung\n      const bundlePrice = article.bundlePrice || 0;\n      const pricePerUnit = article.pricePerUnit || 0;\n      const content = article.content || 0;\n\n      console.log(`Importing article \"${article.name}\":`, {\n        bundlePrice,\n        pricePerUnit,\n        content,\n        hasBundlePrice: bundlePrice > 0,\n        hasPricePerUnit: pricePerUnit > 0,\n        hasContent: content > 0\n      });\n\n      // Preisberechnung basierend auf verfügbaren Daten\n      if (bundlePrice > 0 && content > 0) {\n        // Beide Werte vorhanden - prüfe Konsistenz\n        const calculatedPricePerUnit = bundlePrice / content;\n        const priceDifference = Math.abs(calculatedPricePerUnit - pricePerUnit);\n        const priceDifferencePercent = pricePerUnit > 0 ? (priceDifference / pricePerUnit) * 100 : 0;\n\n        console.log(`Price calculation for \"${article.name}\":`, {\n          calculatedPricePerUnit,\n          importedPricePerUnit: pricePerUnit,\n          priceDifference,\n          priceDifferencePercent: priceDifferencePercent.toFixed(2) + '%'\n        });\n\n        if (pricePerUnit > 0 && priceDifferencePercent > 5) {\n          // Preis pro Einheit stimmt nicht mit Berechnung überein (>5% Abweichung)\n          // Verwende Gebindepreis als Basis und berechne neu\n          console.log(`Price mismatch detected for \"${article.name}\". Using bundle price as base.`);\n          article.pricePerUnit = calculatedPricePerUnit;\n        } else if (pricePerUnit === 0) {\n          // Preis pro Einheit fehlt - berechne aus Gebindepreis\n          console.log(`Missing price per unit for \"${article.name}\". Calculating from bundle price.`);\n          article.pricePerUnit = calculatedPricePerUnit;\n        }\n        // Wenn beide Werte konsistent sind, behalte sie bei\n      } else if (bundlePrice > 0 && pricePerUnit > 0 && content === 0) {\n        // Gebindepreis und Preis pro Einheit vorhanden, aber Inhalt fehlt\n        const calculatedContent = bundlePrice / pricePerUnit;\n        console.log(`Missing content for \"${article.name}\". Calculating: ${calculatedContent}`);\n        article.content = calculatedContent;\n      } else if (pricePerUnit > 0 && content > 0 && bundlePrice === 0) {\n        // Preis pro Einheit und Inhalt vorhanden, aber Gebindepreis fehlt\n        const calculatedBundlePrice = pricePerUnit * content;\n        console.log(`Missing bundle price for \"${article.name}\". Calculating: ${calculatedBundlePrice}`);\n        article.bundlePrice = calculatedBundlePrice;\n      } else if (bundlePrice > 0 && pricePerUnit === 0 && content === 0) {\n        // Nur Gebindepreis vorhanden - setze Standardwerte\n        console.log(`Only bundle price available for \"${article.name}\". Setting default content to 1.`);\n        article.content = 1;\n        article.pricePerUnit = bundlePrice;\n      } else if (pricePerUnit > 0 && bundlePrice === 0 && content === 0) {\n        // Nur Preis pro Einheit vorhanden - setze Standardwerte\n        console.log(`Only price per unit available for \"${article.name}\". Setting default content to 1.`);\n        article.content = 1;\n        article.bundlePrice = pricePerUnit;\n      }\n\n      // Stelle sicher, dass alle Preise positive Zahlen sind\n      article.bundlePrice = Math.max(0, article.bundlePrice);\n      article.pricePerUnit = Math.max(0, article.pricePerUnit);\n      article.content = Math.max(0, article.content);\n\n      // Lieferanten-Erstellung und -Zuordnung\n      if (article.supplier && article.supplier.trim() !== '') {\n        const supplierName = article.supplier.trim();\n        const supplierNameLower = supplierName.toLowerCase();\n        \n        // Prüfe, ob Lieferant bereits in bestehenden Lieferanten existiert\n        const existingSupplier = suppliers.find(s => s.name.toLowerCase().trim() === supplierNameLower);\n        \n        if (existingSupplier) {\n          // Verwende bestehenden Lieferanten\n          article.supplierId = existingSupplier.id;\n          console.log(`Using existing supplier \"${supplierName}\" (ID: ${existingSupplier.id})`);\n        } else {\n          // Prüfe, ob Lieferant bereits in den neuen Lieferanten existiert\n          const existingNewSupplier = newSuppliersToAdd.find(s => s.name.toLowerCase().trim() === supplierNameLower);\n          \n          if (existingNewSupplier) {\n            // Verwende bereits erstellten neuen Lieferanten\n            article.supplierId = existingNewSupplier.id;\n            console.log(`Using already created new supplier \"${supplierName}\" (ID: ${existingNewSupplier.id})`);\n          } else {\n            // Erstelle neuen Lieferanten\n            const newSupplier = {\n              id: Date.now().toString() + '_supplier_' + index,\n              name: supplierName,\n              contactPerson: '',\n              email: '',\n              phoneNumbers: [],\n              address: {\n                street: '',\n                zipCode: '',\n                city: '',\n                country: ''\n              },\n              website: '',\n              notes: ''\n            };\n            \n            console.log(`Creating new supplier \"${supplierName}\" (ID: ${newSupplier.id})`);\n            \n            // Füge neuen Lieferanten zur temporären Liste hinzu\n            newSuppliersToAdd.push(newSupplier);\n            \n            // Setze Lieferanten-ID für Artikel\n            article.supplierId = newSupplier.id;\n          }\n        }\n      }\n\n      console.log(`Final values for \"${article.name}\":`, {\n        bundlePrice: article.bundlePrice,\n        pricePerUnit: article.pricePerUnit,\n        content: article.content,\n        supplierId: article.supplierId\n      });\n\n      return article;\n    });\n\n    // Duplikatsprüfung und Filterung\n    const filteredArticles = newArticles.filter(article => {\n      const articleName = article.name.toLowerCase().trim();\n      \n      if (articleName === '') {\n        console.log(`Skipping article with empty name`);\n        return false;\n      }\n      \n      if (existingArticleNames.includes(articleName)) {\n        console.log(`Skipping duplicate article: \"${article.name}\" (already exists)`);\n        return false;\n      }\n      \n      console.log(`Article \"${article.name}\" is unique, will be imported`);\n      return true;\n    });\n\n    const skippedCount = newArticles.length - filteredArticles.length;\n    \n    // Füge alle neuen Lieferanten auf einmal hinzu\n    if (newSuppliersToAdd.length > 0) {\n      setSuppliers(prev => [...prev, ...newSuppliersToAdd]);\n      console.log(`Added ${newSuppliersToAdd.length} new suppliers:`, newSuppliersToAdd.map(s => s.name));\n    }\n    \n    if (skippedCount > 0) {\n      console.log(`Import completed: ${filteredArticles.length} new articles imported, ${skippedCount} duplicates skipped, ${newSuppliersToAdd.length} new suppliers created`);\n    } else {\n      console.log(`Import completed: ${filteredArticles.length} new articles imported, ${newSuppliersToAdd.length} new suppliers created`);\n    }\n\n    setArticles(prev => [...prev, ...filteredArticles]);\n    setImportResult({ \n      imported: filteredArticles.length, \n      skipped: skippedCount,\n      suppliersCreated: newSuppliersToAdd.length\n    });\n    setShowImportExportModal(false);\n    resetImportExport();\n  };\n\n  const handleExport = () => {\n    const exportData = articles.map(article => ({\n      'Artikelname': article.name,\n      'Kategorie': article.category,\n      'Lieferant': getSupplierName(article.supplierId),\n      'Lieferanten-Artikelnummer': article.supplierArticleNumber || '',\n      'Gebindeeinheit': article.bundleUnit,\n      'Gebindepreis': article.bundlePrice,\n      'Inhalt': article.content,\n      'Inhaltseinheit': article.contentUnit,\n      'Preis pro Einheit': article.pricePerUnit,\n      'Inhaltsstoffe': (article.ingredients || []).join('; '),\n      'Allergene': (article.allergens || []).join('; '),\n      'Kalorien (kcal)': article.nutritionInfo?.calories || 0,\n      'Kilojoule (kJ)': article.nutritionInfo?.kilojoules || 0,\n      'Protein (g)': article.nutritionInfo?.protein || 0,\n      'Fett (g)': article.nutritionInfo?.fat || 0,\n      'Kohlenhydrate (g)': article.nutritionInfo?.carbohydrates || 0,\n      'Ballaststoffe (g)': article.nutritionInfo?.fiber || 0,\n      'Zucker (g)': article.nutritionInfo?.sugar || 0,\n      'Salz (g)': article.nutritionInfo?.salt || 0\n    }));\n\n    const csvContent = [\n      Object.keys(exportData[0]).join(','),\n      ...exportData.map(row => Object.values(row).map(val => `\"${val}\"`).join(','))\n    ].join('\\n');\n\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    link.href = URL.createObjectURL(blob);\n    link.download = `artikel_export_${new Date().toISOString().split('T')[0]}.csv`;\n    link.click();\n  };\n\n  // Hilfsfunktion für Zahlenformatierung\n  const parseNumberValue = (value: string): number => {\n    let cleanValue = String(value).replace(/[€$£¥]/g, '').trim();\n    \n    console.log(`Parsing number value: \"${value}\" -> \"${cleanValue}\"`);\n    \n    // Behandle deutsche Zahlenformatierung (Komma als Dezimaltrennzeichen)\n    if (cleanValue.includes(',') && cleanValue.includes('.')) {\n      // Sowohl Komma als auch Punkt vorhanden - Punkt ist Tausendertrennzeichen\n      const processedValue = cleanValue.replace(/\\./g, '').replace(/,/g, '.');\n      console.log(`  Both comma and dot found: \"${cleanValue}\" -> \"${processedValue}\"`);\n      cleanValue = processedValue;\n    } else if (cleanValue.includes(',')) {\n      // Nur Komma vorhanden - ist Dezimaltrennzeichen\n      const processedValue = cleanValue.replace(/,/g, '.');\n      console.log(`  Only comma found: \"${cleanValue}\" -> \"${processedValue}\"`);\n      cleanValue = processedValue;\n    } else {\n      console.log(`  No comma found, keeping as is: \"${cleanValue}\"`);\n    }\n    \n    const result = isNaN(Number(cleanValue)) ? 0 : Number(cleanValue);\n    console.log(`  Final result: ${result}`);\n    return result;\n  };\n\n  const resetImportExport = () => {\n    setImportData([]);\n    setImportHeaders([]);\n    setFieldMappings({});\n    setImportPreview([]);\n    setImportErrors([]);\n    setDetectedEncoding('');\n    setImportResult(null);\n  };\n\n  // Website-Öffnen Funktion\n  const isValidUrl = (url: string): boolean => {\n    try {\n      new URL(url);\n      return true;\n    } catch {\n      return false;\n    }\n  };\n\n  const openWebsite = (url: string) => {\n    if (isValidUrl(url)) {\n      window.open(url, '_blank', 'noopener,noreferrer');\n    }\n  };\n\n  const formatPrice = (price: number | undefined | null) => {\n    if (price === undefined || price === null || isNaN(price)) {\n      return '€0,00';\n    }\n    return `€${Number(price).toFixed(2)}`;\n  };\n\n  // Konstanten für Artikelformular\n  const UNITS = [\n    'kg', 'g', 'l', 'ml', 'Stück', 'Packung', 'Kiste', 'Karton', 'Flasche', 'Dose', \n    'Beutel', 'Schachtel', 'Tube', 'Glas', 'Becher', 'Tüte', 'Rolle', 'Meter', 'cm', 'mm'\n  ];\n\n  const INGREDIENTS = [\n    'Glutenhaltige Getreide (Weizen, Roggen, Gerste, Hafer, Dinkel)',\n    'Krebstiere',\n    'Eier',\n    'Fische',\n    'Erdnüsse',\n    'Sojabohnen',\n    'Milch (einschließlich Laktose)',\n    'Schalenfrüchte (Mandeln, Haselnüsse, Walnüsse, Cashewnüsse, Pistazien, Macadamianüsse, Pekannüsse)',\n    'Sellerie',\n    'Senf',\n    'Sesamsamen',\n    'Schwefeldioxid und Sulfite',\n    'Lupinen',\n    'Weichtiere'\n  ];\n\n  const ALLERGENS = [\n    'A - Glutenhaltige Getreide', 'B - Krebstiere', 'C - Eier', 'D - Fische',\n    'E - Erdnüsse', 'F - Sojabohnen', 'G - Milch', 'H - Schalenfrüchte',\n    'I - Sellerie', 'J - Senf', 'K - Sesamsamen', 'L - Schwefeldioxid/Sulfite',\n    'M - Lupinen', 'N - Weichtiere'\n  ];\n\n  // Umfangreicher Kategorien-Datenbestand\n  const CATEGORIES = [\n    // Gemüse & Salate\n    'Gemüse', 'Blattgemüse', 'Wurzelgemüse', 'Kohlgemüse', 'Zwiebelgemüse', 'Hülsenfrüchte',\n    'Tomaten', 'Paprika', 'Gurken', 'Auberginen', 'Zucchini', 'Kürbis',\n    'Kartoffeln', 'Karotten', 'Rote Bete', 'Sellerie', 'Pastinaken', 'Steckrüben',\n    'Brokkoli', 'Blumenkohl', 'Rosenkohl', 'Grünkohl', 'Weißkohl', 'Rotkohl',\n    'Zwiebeln', 'Knoblauch', 'Lauch', 'Schalotten', 'Frühlingszwiebeln',\n    'Salate', 'Kopfsalat', 'Eisbergsalat', 'Rucola', 'Feldsalat', 'Endivien',\n    'Erbsen', 'Bohnen', 'Linsen', 'Kichererbsen', 'Sojabohnen',\n    \n    // Obst\n    'Obst', 'Kernobst', 'Steinobst', 'Beerenobst', 'Zitrusfrüchte', 'Exotische Früchte',\n    'Äpfel', 'Birnen', 'Quitten', 'Aprikosen', 'Pfirsiche', 'Nektarinen',\n    'Kirschen', 'Pflaumen', 'Zwetschgen', 'Mirabellen', 'Erdbeeren', 'Himbeeren',\n    'Brombeeren', 'Heidelbeeren', 'Johannisbeeren', 'Stachelbeeren',\n    'Orangen', 'Mandarinen', 'Zitronen', 'Limetten', 'Grapefruits', 'Pampelmusen',\n    'Bananen', 'Ananas', 'Mangos', 'Papayas', 'Kiwi', 'Passionsfrüchte',\n    \n    // Fleisch & Wurst\n    'Fleisch', 'Rindfleisch', 'Schweinefleisch', 'Lammfleisch', 'Kalbfleisch', 'Geflügel',\n    'Rinderhack', 'Rindersteak', 'Rinderbraten', 'Rinderfilet', 'Rinderhüfte',\n    'Schweinehack', 'Schweinekotelett', 'Schweinebraten', 'Schweinefilet', 'Schweinebauch',\n    'Lammkotelett', 'Lammbraten', 'Lammfilet', 'Lammhack',\n    'Kalbskotelett', 'Kalbsbraten', 'Kalbsfilet', 'Kalbshack',\n    'Hähnchenbrust', 'Hähnchenkeule', 'Hähnchenflügel', 'Hähnchenhack',\n    'Putenbrust', 'Putenkeule', 'Entenbrust', 'Entenkeule', 'Gänsebrust',\n    'Wurst', 'Brühwurst', 'Kochwurst', 'Rohwurst', 'Kochmettwurst',\n    'Salami', 'Schinken', 'Speck', 'Bacon', 'Mortadella', 'Lyoner',\n    \n    // Fisch & Meeresfrüchte\n    'Fisch', 'Süßwasserfisch', 'Salzwasserfisch', 'Meeresfrüchte',\n    'Lachs', 'Forelle', 'Karpfen', 'Zander', 'Hecht', 'Barsch',\n    'Kabeljau', 'Seelachs', 'Scholle', 'Heilbutt', 'Thunfisch', 'Makrele',\n    'Hering', 'Sardinen', 'Anchovis', 'Sardellen',\n    'Garnelen', 'Krabben', 'Hummer', 'Langusten', 'Muscheln', 'Austern',\n    'Miesmuscheln', 'Jakobsmuscheln', 'Tintenfisch', 'Kalamari',\n    \n    // Milchprodukte & Käse\n    'Milchprodukte', 'Milch', 'Sahne', 'Joghurt', 'Quark', 'Butter',\n    'Vollmilch', 'Fettarme Milch', 'Magermilch', 'Buttermilch', 'Kefir',\n    'Schlagsahne', 'Sauerrahm', 'Crème fraîche', 'Schmand',\n    'Naturjoghurt', 'Fruchtjoghurt', 'Griechischer Joghurt', 'Skyr',\n    'Magerquark', 'Speisequark', 'Hüttenkäse', 'Ricotta',\n    'Käse', 'Hartkäse', 'Weichkäse', 'Schnittkäse', 'Frischkäse', 'Blauschimmelkäse',\n    'Parmesan', 'Pecorino', 'Grana Padano', 'Emmentaler', 'Gouda', 'Edamer',\n    'Camembert', 'Brie', 'Mozzarella', 'Burrata', 'Feta', 'Halloumi',\n    'Gorgonzola', 'Roquefort', 'Stilton', 'Gorgonzola',\n    \n    // Eier\n    'Eier', 'Hühnereier', 'Wachteleier', 'Enteneier', 'Gänseeier',\n    'Eiklar', 'Eigelb', 'Vollei',\n    \n    // Getreide & Backwaren\n    'Getreide', 'Weizen', 'Roggen', 'Dinkel', 'Hafer', 'Gerste', 'Reis',\n    'Weizenmehl', 'Roggenmehl', 'Dinkelmehl', 'Haferflocken', 'Hafermehl',\n    'Vollkornmehl', 'Type 405', 'Type 550', 'Type 1050', 'Type 1600',\n    'Backwaren', 'Brot', 'Brötchen', 'Croissants', 'Baguette', 'Ciabatta',\n    'Vollkornbrot', 'Roggenbrot', 'Dinkelbrot', 'Sauerteigbrot',\n    'Kuchen', 'Torten', 'Kekse', 'Plätzchen', 'Gebäck',\n    \n    // Nudeln & Reis\n    'Nudeln', 'Spaghetti', 'Penne', 'Fusilli', 'Tagliatelle', 'Lasagne',\n    'Vollkornnudeln', 'Eiernudeln', 'Glutenfreie Nudeln',\n    'Reis', 'Basmatireis', 'Jasminreis', 'Arborioreis', 'Risottoreis',\n    'Vollkornreis', 'Wildreis', 'Parboiled Reis',\n    \n    // Öle & Fette\n    'Öle & Fette', 'Olivenöl', 'Rapsöl', 'Sonnenblumenöl', 'Kokosöl',\n    'Natives Olivenöl', 'Olivenöl extra vergine', 'Kaltgepresstes Öl',\n    'Butter', 'Margarine', 'Schmalz', 'Gänseschmalz', 'Entenschmalz',\n    \n    // Gewürze & Kräuter\n    'Gewürze', 'Salz', 'Pfeffer', 'Paprika', 'Chili', 'Kurkuma', 'Kümmel',\n    'Zimt', 'Muskat', 'Ingwer', 'Knoblauch', 'Zwiebeln', 'Lorbeer',\n    'Kräuter', 'Basilikum', 'Oregano', 'Thymian', 'Rosmarin', 'Salbei',\n    'Petersilie', 'Dill', 'Schnittlauch', 'Koriander', 'Minze',\n    'Gewürzmischungen', 'Curry', 'Garam Masala', 'Ras el Hanout', 'Za\\'atar',\n    \n    // Nüsse & Samen\n    'Nüsse & Samen', 'Mandeln', 'Haselnüsse', 'Walnüsse', 'Cashewnüsse',\n    'Pistazien', 'Macadamianüsse', 'Pekannüsse', 'Paranüsse',\n    'Erdnüsse', 'Pinienkerne', 'Sonnenblumenkerne', 'Kürbiskerne',\n    'Sesam', 'Chiasamen', 'Leinsamen', 'Hanfsamen',\n    \n    // Konserven & Trockenprodukte\n    'Konserven', 'Tomatenkonserven', 'Gemüsekonserven', 'Obstkonserven',\n    'Fischkonserven', 'Fleischkonserven', 'Hülsenfrüchte-Konserven',\n    'Trockenprodukte', 'Trockenfrüchte', 'Trockengemüse', 'Trockenpilze',\n    'Nudeln', 'Reis', 'Hülsenfrüchte', 'Müsli', 'Cerealien',\n    \n    // Getränke\n    'Getränke', 'Wein', 'Rotwein', 'Weißwein', 'Roséwein', 'Sekt', 'Champagner',\n    'Bier', 'Pils', 'Weizenbier', 'Altbier', 'Kölsch', 'Stout',\n    'Spirituosen', 'Whisky', 'Wodka', 'Gin', 'Rum', 'Tequila',\n    'Säfte', 'Obstsäfte', 'Gemüsesäfte', 'Smoothies',\n    'Softdrinks', 'Limonaden', 'Cola', 'Fanta', 'Sprite',\n    \n    // Süßwaren & Desserts\n    'Süßwaren', 'Schokolade', 'Bitterschokolade', 'Milchschokolade', 'Weiße Schokolade',\n    'Pralinen', 'Bonbons', 'Gummibärchen', 'Lakritz',\n    'Desserts', 'Eis', 'Pudding', 'Mousse', 'Tiramisu', 'Crème brûlée',\n    'Zucker', 'Haushaltszucker', 'Puderzucker', 'Brauner Zucker', 'Rohrzucker',\n    \n    // Backzutaten\n    'Backzutaten', 'Hefe', 'Backpulver', 'Natron', 'Vanille', 'Vanillezucker',\n    'Kakao', 'Schokodrops', 'Rosinen', 'Cranberries', 'Nüsse',\n    'Mehl', 'Stärke', 'Gelatine', 'Agar-Agar', 'Pektin',\n    \n    // Fertigprodukte\n    'Fertigprodukte', 'Fertiggerichte', 'Tiefkühlkost', 'Convenience Food',\n    'Suppen', 'Soßen', 'Dressings', 'Mayonnaise', 'Ketchup', 'Senf',\n    'Pestos', 'Hummus', 'Tapenade', 'Pâté',\n    \n    // Bio & Spezialitäten\n    'Bio-Produkte', 'Vegan', 'Vegetarisch', 'Glutenfrei', 'Laktosefrei',\n    'Spezialitäten', 'Regionale Produkte', 'Fair Trade', 'Nachhaltig',\n    \n    // Sonstiges\n    'Sonstiges', 'Zubehör', 'Verpackungen', 'Hygieneartikel', 'Reinigung'\n  ];\n\n  // Artikelformular Hilfsfunktionen\n  const calculatePricePerUnit = (bundlePrice: number, content: number, isGross: boolean) => {\n    if (content <= 0) return 0;\n    const netPrice = isGross ? bundlePrice / 1.19 : bundlePrice; // 19% MwSt\n    return netPrice / content;\n  };\n\n  const handlePriceChange = (newBundlePrice: number, isGross: boolean) => {\n    const newPricePerUnit = calculatePricePerUnit(newBundlePrice, articleForm.content, isGross);\n    setArticleForm(prev => ({\n      ...prev,\n      bundlePrice: newBundlePrice,\n      isGrossPrice: isGross,\n      pricePerUnit: newPricePerUnit\n    }));\n  };\n\n  const handleContentChange = (newContent: number) => {\n    const newPricePerUnit = calculatePricePerUnit(articleForm.bundlePrice, newContent, articleForm.isGrossPrice);\n    setArticleForm(prev => ({\n      ...prev,\n      content: newContent,\n      pricePerUnit: newPricePerUnit\n    }));\n  };\n\n  const handleIngredientToggle = (ingredient: string) => {\n    setArticleForm(prev => ({\n      ...prev,\n      ingredients: prev.ingredients.includes(ingredient)\n        ? prev.ingredients.filter(i => i !== ingredient)\n        : [...prev.ingredients, ingredient]\n    }));\n  };\n\n  const handleAllergenToggle = (allergen: string) => {\n    setArticleForm(prev => ({\n      ...prev,\n      allergens: prev.allergens.includes(allergen)\n        ? prev.allergens.filter(a => a !== allergen)\n        : [...prev.allergens, allergen]\n    }));\n  };\n\n  const resetArticleForm = () => {\n    setArticleForm({\n      name: '',\n      category: '',\n      supplierId: '',\n      supplierArticleNumber: '',\n      bundlePrice: 0,\n      bundleUnit: '',\n      content: 0,\n      contentUnit: '',\n      pricePerUnit: 0,\n      isGrossPrice: true,\n      ingredients: [],\n      allergens: [],\n      nutrition: {\n        calories: 0,\n        kilojoules: 0,\n        protein: 0,\n        fat: 0,\n        carbohydrates: 0,\n        fiber: 0,\n        sugar: 0,\n        salt: 0\n      }\n    });\n    setEditingArticle(null);\n  };\n\n  const resetSupplierForm = () => {\n    setSupplierForm({\n      name: '',\n      contactPerson: '',\n      email: '',\n      phoneNumbers: [{ type: 'Geschäft', number: '' }],\n      address: {\n        street: '',\n        zipCode: '',\n        city: '',\n        country: 'Deutschland'\n      },\n      website: '',\n      notes: ''\n    });\n  };\n\n  const handleSaveArticle = () => {\n    if (editingArticle) {\n      // Artikel bearbeiten\n      setArticles(prev => prev.map(article => \n        article.id === editingArticle.id \n          ? { \n              ...articleForm, \n              id: article.id,\n              nutritionInfo: articleForm.nutrition\n            }\n          : article\n      ));\n    } else {\n      // Neuen Artikel erstellen\n      const newArticle = {\n        ...articleForm,\n        id: Date.now().toString(),\n        nutritionInfo: articleForm.nutrition\n      };\n      setArticles(prev => [...prev, newArticle]);\n      \n      // Wenn das Rezept-Formular vorher geöffnet war, öffne es wieder\n      if (!showRecipeForm) {\n        setTimeout(() => {\n          setShowRecipeForm(true);\n        }, 100);\n      }\n    }\n    setShowArticleForm(false);\n    resetArticleForm();\n  };\n\n  const handleEditArticle = (article: any) => {\n    setEditingArticle(article);\n    setArticleForm({\n      name: article.name,\n      category: article.category,\n      supplierId: article.supplierId,\n      supplierArticleNumber: article.supplierArticleNumber || '',\n      bundlePrice: article.bundlePrice,\n      bundleUnit: article.bundleUnit,\n      content: article.content,\n      contentUnit: article.contentUnit,\n      pricePerUnit: article.pricePerUnit,\n      isGrossPrice: article.isGrossPrice,\n      ingredients: article.ingredients || [],\n      allergens: article.allergens || [],\n      nutrition: article.nutritionInfo || {\n        calories: 0, kilojoules: 0, protein: 0, fat: 0, carbohydrates: 0, fiber: 0, sugar: 0, salt: 0\n      }\n    });\n    setShowArticleForm(true);\n  };\n\n  // Kategorie-Autovervollständigung Hilfsfunktionen\n  const getFilteredCategories = () => {\n    if (!categorySearchTerm) return CATEGORIES.slice(0, 10); // Zeige nur die ersten 10 wenn leer\n    \n    return CATEGORIES.filter(category =>\n      category.toLowerCase().includes(categorySearchTerm.toLowerCase())\n    ).slice(0, 10); // Maximal 10 Vorschläge\n  };\n\n  const handleCategorySelect = (category: string) => {\n    setArticleForm(prev => ({ ...prev, category }));\n    setCategorySearchTerm('');\n    setShowCategoryDropdown(false);\n  };\n\n  const handleCategoryInputChange = (value: string) => {\n    setCategorySearchTerm(value);\n    setArticleForm(prev => ({ ...prev, category: value }));\n    setShowCategoryDropdown(true);\n    setSelectedCategoryIndex(-1); // Reset selection when typing\n  };\n\n  const handleCategoryInputBlur = () => {\n    // Verzögerung um das Klicken auf Dropdown-Items zu ermöglichen\n    setTimeout(() => {\n      setShowCategoryDropdown(false);\n      setSelectedCategoryIndex(-1);\n    }, 200);\n  };\n\n  const handleCategoryKeyDown = (e: React.KeyboardEvent) => {\n    const filteredCategories = getFilteredCategories();\n    const maxIndex = filteredCategories.length - 1;\n    const hasNewCategoryOption = categorySearchTerm && !CATEGORIES.includes(categorySearchTerm);\n    const totalOptions = filteredCategories.length + (hasNewCategoryOption ? 1 : 0);\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedCategoryIndex(prev => {\n          if (prev < totalOptions - 1) return prev + 1;\n          return 0; // Zurück zum Anfang\n        });\n        break;\n      \n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedCategoryIndex(prev => {\n          if (prev > 0) return prev - 1;\n          return totalOptions - 1; // Zum Ende\n        });\n        break;\n      \n      case 'Enter':\n        e.preventDefault();\n        if (selectedCategoryIndex >= 0 && selectedCategoryIndex < filteredCategories.length) {\n          handleCategorySelect(filteredCategories[selectedCategoryIndex]);\n        } else if (selectedCategoryIndex === filteredCategories.length && hasNewCategoryOption) {\n          handleCategorySelect(categorySearchTerm);\n        } else if (categorySearchTerm) {\n          // Wenn nichts ausgewählt ist, aber Text eingegeben wurde, verwende den Text\n          handleCategorySelect(categorySearchTerm);\n        }\n        break;\n      \n      case 'Escape':\n        e.preventDefault();\n        setShowCategoryDropdown(false);\n        setSelectedCategoryIndex(-1);\n        break;\n      \n      case 'Tab':\n        // Tab schließt das Dropdown\n        setShowCategoryDropdown(false);\n        setSelectedCategoryIndex(-1);\n        break;\n    }\n  };\n\n  const resetCategorySelection = () => {\n    setSelectedCategoryIndex(-1);\n  };\n\n  // Lieferanten-Autovervollständigung Hilfsfunktionen\n  const getFilteredSuppliers = () => {\n    if (!supplierSearchTerm) return suppliers.slice(0, 10);\n    \n    return suppliers.filter(supplier =>\n      supplier.name.toLowerCase().includes(supplierSearchTerm.toLowerCase()) ||\n      supplier.contactPerson.toLowerCase().includes(supplierSearchTerm.toLowerCase())\n    ).slice(0, 10);\n  };\n\n  const handleSupplierSelect = (supplier: any) => {\n    setArticleForm(prev => ({ ...prev, supplierId: supplier.id }));\n    setSupplierSearchTerm('');\n    setShowSupplierDropdown(false);\n    setSelectedSupplierIndex(-1);\n  };\n\n  const handleSupplierInputChange = (value: string) => {\n    setSupplierSearchTerm(value);\n    setShowSupplierDropdown(true);\n    setSelectedSupplierIndex(-1);\n  };\n\n  const handleSupplierInputBlur = () => {\n    setTimeout(() => {\n      setShowSupplierDropdown(false);\n      setSelectedSupplierIndex(-1);\n    }, 200);\n  };\n\n  const handleSupplierKeyDown = (e: React.KeyboardEvent) => {\n    const filteredSuppliers = getFilteredSuppliers();\n    const hasNewSupplierOption = supplierSearchTerm && !suppliers.some(s => s.name.toLowerCase() === supplierSearchTerm.toLowerCase());\n    const totalOptions = filteredSuppliers.length + (hasNewSupplierOption ? 1 : 0);\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedSupplierIndex(prev => {\n          if (prev < totalOptions - 1) return prev + 1;\n          return 0;\n        });\n        break;\n      \n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedSupplierIndex(prev => {\n          if (prev > 0) return prev - 1;\n          return totalOptions - 1;\n        });\n        break;\n      \n      case 'Enter':\n        e.preventDefault();\n        if (selectedSupplierIndex >= 0 && selectedSupplierIndex < filteredSuppliers.length) {\n          handleSupplierSelect(filteredSuppliers[selectedSupplierIndex]);\n        } else if (selectedSupplierIndex === filteredSuppliers.length && hasNewSupplierOption) {\n          handleNewSupplier();\n        } else if (supplierSearchTerm) {\n          handleNewSupplier();\n        }\n        break;\n      \n      case 'Escape':\n        e.preventDefault();\n        setShowSupplierDropdown(false);\n        setSelectedSupplierIndex(-1);\n        break;\n      \n      case 'Tab':\n        setShowSupplierDropdown(false);\n        setSelectedSupplierIndex(-1);\n        break;\n    }\n  };\n\n  const handleEditSupplier = (supplier: any) => {\n    setEditingSupplier(supplier);\n    setSupplierForm({\n      name: supplier.name,\n      contactPerson: supplier.contactPerson || '',\n      email: supplier.email || '',\n      phoneNumbers: supplier.phoneNumbers || [{ type: 'Geschäft', number: '' }],\n      address: supplier.address || {\n        street: '',\n        zipCode: '',\n        city: '',\n        country: 'Deutschland'\n      },\n      website: supplier.website || '',\n      notes: supplier.notes || ''\n    });\n    setShowSupplierForm(true);\n  };\n\n  const handleNewSupplier = () => {\n    setEditingSupplier(null);\n    setSupplierForm(prev => ({ ...prev, name: supplierSearchTerm }));\n    setShowSupplierForm(true);\n    setShowSupplierDropdown(false);\n    setSelectedSupplierIndex(-1);\n  };\n\n  // Rezept-Formular Hilfsfunktionen\n  const resetRecipeForm = () => {\n    setRecipeForm({\n      name: '',\n      description: '',\n      image: null,\n      portions: 4,\n      preparationTime: 30,\n      difficulty: 3,\n      energy: 0,\n      materialCosts: 0,\n      markupPercentage: 300,\n      vatRate: 19,\n      sellingPrice: 0,\n      ingredients: [{ id: Date.now().toString(), name: '', amount: 0, unit: 'g', price: 0 }],\n      preparationSteps: [{ id: Date.now().toString(), order: 1, description: '' }]\n    });\n  };\n\n  const calculateMaterialCosts = () => {\n    return recipeForm.ingredients.reduce((sum, ingredient) => sum + ingredient.price, 0);\n  };\n\n\n\n  const handleMarkupChange = (newMarkup: number) => {\n    // Bei Aufschlag-Änderung wird der Verkaufspreis neu berechnet\n    const materialCosts = calculateMaterialCosts();\n    const costsPerPortion = materialCosts / recipeForm.portions;\n    const netPrice = costsPerPortion * (newMarkup / 100);\n    const newSellingPrice = calculateGrossPrice(netPrice, recipeForm.vatRate);\n    \n    const roundedSellingPrice = Math.round(newSellingPrice * 100) / 100;\n    \n    setRecipeForm(prev => ({\n      ...prev,\n      markupPercentage: newMarkup,\n      sellingPrice: roundedSellingPrice\n    }));\n    \n    // Aktualisiere auch sellingPriceInput sofort\n    setSellingPriceInput(roundedSellingPrice.toFixed(2));\n  };\n\n  const handleSellingPriceChange = (newSellingPrice: number) => {\n    // Bei Verkaufspreis-Änderung wird der Aufschlag neu berechnet\n    setRecipeForm(prev => ({\n      ...prev,\n      sellingPrice: newSellingPrice\n    }));\n    \n    // Aufschlag wird automatisch durch calculateAllValues() berechnet\n    setTimeout(() => {\n      const values = calculateAllValues();\n      setRecipeForm(prev => ({ ...prev, markupPercentage: values.markup }));\n    }, 0);\n  };\n\n\n\n  const calculateGrossProfit = () => {\n    const costsPerPortion = calculateMaterialCosts() / recipeForm.portions;\n    const vatAmount = recipeForm.sellingPrice - calculateNetPrice(recipeForm.sellingPrice, recipeForm.vatRate);\n    return recipeForm.sellingPrice - costsPerPortion - vatAmount;\n  };\n\n  // Zentrale Berechnungsroutine für alle Kalkulationswerte\n  // Verkaufspreis ist die Basis, Aufschlag wird nur daraus berechnet\n  const calculateAllValues = () => {\n    const materialCosts = calculateMaterialCosts();\n    const costsPerPortion = materialCosts / recipeForm.portions;\n    const netSellingPrice = calculateNetPrice(recipeForm.sellingPrice, recipeForm.vatRate);\n    const vatAmount = recipeForm.sellingPrice - netSellingPrice;\n    const grossProfit = recipeForm.sellingPrice - costsPerPortion - vatAmount;\n    \n    // Aufschlag wird aus Verkaufspreis berechnet: (Nettopreis / Kosten/Portion) * 100\n    const markup = costsPerPortion > 0 ? Math.round((netSellingPrice / costsPerPortion) * 100) : 0;\n\n    return {\n      materialCosts,\n      costsPerPortion,\n      netSellingPrice,\n      vatAmount,\n      grossProfit,\n      markup,\n      sellingPrice: Math.round(recipeForm.sellingPrice * 100) / 100 // Auf 2 Stellen runden\n    };\n  };\n\n  // Hilfsfunktionen für Inhaltsstoffe und Allergene\n  const getRecipeIngredients = () => {\n    const ingredients = new Set<string>();\n    \n    recipeForm.ingredients.forEach(ingredient => {\n      if (ingredient.name && ingredient.name.trim() !== '') {\n        const article = articles.find(a => a.name === ingredient.name);\n        if (article && article.ingredients) {\n          article.ingredients.forEach(ing => ingredients.add(ing));\n        }\n      }\n    });\n    \n    return Array.from(ingredients).sort();\n  };\n\n  const getRecipeAllergens = () => {\n    const allergens = new Set<string>();\n    \n    recipeForm.ingredients.forEach(ingredient => {\n      if (ingredient.name && ingredient.name.trim() !== '') {\n        const article = articles.find(a => a.name === ingredient.name);\n        if (article && article.allergens) {\n          article.allergens.forEach(allergen => allergens.add(allergen));\n        }\n      }\n    });\n    \n    return Array.from(allergens).sort();\n  };\n\n  // Hilfsfunktionen für Nährwerte\n  const calculateRecipeNutrition = () => {\n    let totalNutrition = {\n      calories: 0,\n      kilojoules: 0,\n      protein: 0,\n      fat: 0,\n      carbohydrates: 0,\n      fiber: 0,\n      sugar: 0,\n      salt: 0\n    };\n\n    recipeForm.ingredients.forEach(ingredient => {\n      if (ingredient.name && ingredient.name.trim() !== '' && ingredient.amount > 0) {\n        const article = articles.find(a => a.name === ingredient.name);\n        if (article && article.nutritionInfo) {\n          // Berechne Anteil basierend auf Menge (pro 100g)\n          const ratio = ingredient.amount / 100;\n          totalNutrition.calories += (article.nutritionInfo.calories || 0) * ratio;\n          totalNutrition.kilojoules += (article.nutritionInfo.kilojoules || 0) * ratio;\n          totalNutrition.protein += (article.nutritionInfo.protein || 0) * ratio;\n          totalNutrition.fat += (article.nutritionInfo.fat || 0) * ratio;\n          totalNutrition.carbohydrates += (article.nutritionInfo.carbohydrates || 0) * ratio;\n          totalNutrition.fiber += (article.nutritionInfo.fiber || 0) * ratio;\n          totalNutrition.sugar += (article.nutritionInfo.sugar || 0) * ratio;\n          totalNutrition.salt += (article.nutritionInfo.salt || 0) * ratio;\n        }\n      }\n    });\n\n    return {\n      calories: Math.round(totalNutrition.calories),\n      kilojoules: Math.round(totalNutrition.kilojoules * 10) / 10,\n      protein: Math.round(totalNutrition.protein * 10) / 10,\n      fat: Math.round(totalNutrition.fat * 10) / 10,\n      carbohydrates: Math.round(totalNutrition.carbohydrates * 10) / 10,\n      fiber: Math.round(totalNutrition.fiber * 10) / 10,\n      sugar: Math.round(totalNutrition.sugar * 10) / 10,\n      salt: Math.round(totalNutrition.salt * 100) / 100\n    };\n  };\n\n  const getFilteredIngredients = () => {\n    if (!ingredientSearchTerm) return articles.slice(0, 10);\n    \n    return articles.filter(article =>\n      article.name.toLowerCase().includes(ingredientSearchTerm.toLowerCase())\n    ).slice(0, 10);\n  };\n\n  const handleIngredientSelect = (article: any, ingredientIndex: number) => {\n    setRecipeForm(prev => {\n      const updatedIngredients = prev.ingredients.map((ing, i) => \n        i === ingredientIndex ? { \n          ...ing, \n          name: article.name,\n          unit: article.contentUnit,\n          price: 0\n        } : ing\n      );\n      \n      // Prüfen, ob eine neue leere Zeile hinzugefügt werden soll\n      const shouldAddNewLine = ingredientIndex === prev.ingredients.length - 1 && \n                              prev.ingredients[prev.ingredients.length - 1].name === '';\n      \n      if (shouldAddNewLine) {\n        updatedIngredients.push({ \n          id: Date.now().toString(), \n          name: '', \n          amount: 0, \n          unit: 'g', \n          price: 0 \n        });\n      }\n      \n      return {\n        ...prev,\n        ingredients: updatedIngredients\n      };\n    });\n    \n    setIngredientSearchTerm('');\n    setShowIngredientDropdown(false);\n    setSelectedIngredientIndex(-1);\n    setDropdownSelectionIndex(-1);\n    setDropdownPosition({ top: 0, left: 0 });\n    \n    // Neuberechnung basierend auf aktuellem Verkaufspreis\n    setTimeout(() => {\n      const values = calculateAllValues();\n      setRecipeForm(prev => ({ ...prev, markupPercentage: values.markup }));\n    }, 0);\n  };\n\n  const calculateIngredientPrice = (ingredient: any) => {\n    const article = articles.find(a => a.name === ingredient.name);\n    if (article && ingredient.amount > 0) {\n      return article.pricePerUnit * ingredient.amount;\n    }\n    return ingredient.price || 0;\n  };\n\n  const handleIngredientInputChange = (value: string, ingredientIndex: number) => {\n    setRecipeForm(prev => ({\n      ...prev,\n      ingredients: prev.ingredients.map((ing, i) => \n        i === ingredientIndex ? { ...ing, name: value } : ing\n      )\n    }));\n    \n    setIngredientSearchTerm(value);\n    setShowIngredientDropdown(true);\n    setSelectedIngredientIndex(ingredientIndex);\n    setDropdownSelectionIndex(-1);\n    \n    // Position des Dropdowns aktualisieren\n    const inputElement = document.querySelector(`input[data-ingredient-index=\"${ingredientIndex}\"]`) as HTMLInputElement;\n    if (inputElement) {\n      const rect = inputElement.getBoundingClientRect();\n      setDropdownPosition({\n        top: rect.bottom,\n        left: rect.left\n      });\n    }\n  };\n\n  const handleIngredientInputBlur = () => {\n    // Verzögerung erhöhen und prüfen, ob das Dropdown noch relevant ist\n    setTimeout(() => {\n      // Nur schließen, wenn kein Fokus mehr auf dem Input oder Dropdown ist\n      const activeElement = document.activeElement;\n      const isDropdownActive = activeElement && (\n        activeElement.closest('.dropdown-item') || \n        activeElement.closest('[data-ingredient-index]')\n      );\n      \n      if (!isDropdownActive) {\n        setShowIngredientDropdown(false);\n        setSelectedIngredientIndex(-1);\n        setDropdownSelectionIndex(-1);\n        setDropdownPosition({ top: 0, left: 0 });\n      }\n    }, 300);\n  };\n\n  const handleIngredientKeyDown = (e: React.KeyboardEvent, ingredientIndex: number) => {\n    const filteredIngredients = getFilteredIngredients();\n    const hasNewArticleOption = ingredientSearchTerm && !articles.some(a => a.name === ingredientSearchTerm);\n    const totalOptions = filteredIngredients.length + (hasNewArticleOption ? 1 : 0);\n\n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setDropdownSelectionIndex(prev => {\n          if (prev < totalOptions - 1) return prev + 1;\n          return 0;\n        });\n        break;\n      \n      case 'ArrowUp':\n        e.preventDefault();\n        setDropdownSelectionIndex(prev => {\n          if (prev > 0) return prev - 1;\n          return totalOptions - 1;\n        });\n        break;\n      \n      case 'Enter':\n        e.preventDefault();\n        if (dropdownSelectionIndex >= 0 && dropdownSelectionIndex < filteredIngredients.length) {\n          handleIngredientSelect(filteredIngredients[dropdownSelectionIndex], ingredientIndex);\n        } else if (dropdownSelectionIndex === filteredIngredients.length && hasNewArticleOption) {\n          handleCreateNewArticle(ingredientSearchTerm, ingredientIndex);\n        } else if (ingredientSearchTerm) {\n          handleCreateNewArticle(ingredientSearchTerm, ingredientIndex);\n        }\n        break;\n      \n      case 'Escape':\n        e.preventDefault();\n        setShowIngredientDropdown(false);\n        setDropdownSelectionIndex(-1);\n        setDropdownPosition({ top: 0, left: 0 });\n        break;\n      \n      case 'Tab':\n        setShowIngredientDropdown(false);\n        setDropdownSelectionIndex(-1);\n        setDropdownPosition({ top: 0, left: 0 });\n        break;\n    }\n  };\n\n  const handleCreateNewArticle = (articleName: string, ingredientIndex: number) => {\n    setShowRecipeForm(false);\n    resetArticleForm();\n    setArticleForm(prev => ({ ...prev, name: articleName }));\n    setShowArticleForm(true);\n    \n    setRecipeForm(prev => ({\n      ...prev,\n      ingredients: prev.ingredients.map((ing, i) => \n        i === ingredientIndex ? { ...ing, name: articleName } : ing\n      )\n    }));\n    \n    setIngredientSearchTerm('');\n    setShowIngredientDropdown(false);\n    setSelectedIngredientIndex(-1);\n    setDropdownSelectionIndex(-1);\n    setDropdownPosition({ top: 0, left: 0 });\n    \n    // Neuberechnung basierend auf aktuellem Verkaufspreis\n    setTimeout(() => {\n      const values = calculateAllValues();\n      setRecipeForm(prev => ({ ...prev, markupPercentage: values.markup }));\n    }, 0);\n  };\n\n  const handleIngredientFocus = (ingredientIndex: number) => {\n    setSelectedIngredientIndex(ingredientIndex);\n    setIngredientSearchTerm(recipeForm.ingredients[ingredientIndex].name);\n    setShowIngredientDropdown(true);\n    setDropdownSelectionIndex(-1);\n    \n    // Position des Dropdowns sofort berechnen\n    const inputElement = document.querySelector(`input[data-ingredient-index=\"${ingredientIndex}\"]`) as HTMLInputElement;\n    if (inputElement) {\n      const rect = inputElement.getBoundingClientRect();\n      setDropdownPosition({\n        top: rect.bottom,\n        left: rect.left\n      });\n    }\n  };\n\n  const handleEditIngredient = (ingredientIndex: number) => {\n    // Artikel zum Bearbeiten im Artikelformular öffnen\n    const ingredient = recipeForm.ingredients[ingredientIndex];\n    \n    // Finde den Artikel basierend auf dem Namen\n    const articleToEdit = articles.find(article => article.name === ingredient.name);\n    \n    if (articleToEdit) {\n      // Artikelformular mit den Daten des zu bearbeitenden Artikels öffnen\n      setArticleForm({\n        name: articleToEdit.name,\n        category: articleToEdit.category,\n        supplierId: articleToEdit.supplierId,\n        supplierArticleNumber: articleToEdit.supplierArticleNumber,\n        bundlePrice: articleToEdit.bundlePrice,\n        bundleUnit: articleToEdit.bundleUnit,\n        content: articleToEdit.content,\n        contentUnit: articleToEdit.contentUnit,\n        pricePerUnit: articleToEdit.pricePerUnit,\n        isGrossPrice: articleToEdit.isGrossPrice,\n        ingredients: articleToEdit.ingredients,\n        allergens: articleToEdit.allergens,\n        nutrition: articleToEdit.nutritionInfo\n      });\n      setEditingArticle(articleToEdit);\n      setShowArticleForm(true);\n      setShowRecipeForm(false);\n    } else {\n      // Falls kein Artikel gefunden wird, zeige eine Meldung\n      alert('Artikel nicht gefunden. Bitte wählen Sie zuerst einen Artikel aus.');\n    }\n  };\n\n  const addIngredient = () => {\n    setRecipeForm(prev => ({\n      ...prev,\n      ingredients: [...prev.ingredients, { \n        id: Date.now().toString(), \n        name: '', \n        amount: 0, \n        unit: 'g', \n        price: 0 \n      }]\n    }));\n    \n    // Fokus auf die neue Zutat setzen\n    setTimeout(() => {\n      const newIndex = recipeForm.ingredients.length;\n      const inputElement = document.querySelector(`input[data-ingredient-index=\"${newIndex}\"]`) as HTMLInputElement;\n      if (inputElement) {\n        inputElement.focus();\n      }\n    }, 100);\n  };\n\n  const removeIngredient = (index: number) => {\n    setRecipeForm(prev => ({\n      ...prev,\n      ingredients: prev.ingredients.filter((_, i) => i !== index)\n    }));\n    \n    // Neuberechnung basierend auf aktuellem Verkaufspreis\n    setTimeout(() => {\n      const values = calculateAllValues();\n      setRecipeForm(prev => ({ ...prev, markupPercentage: values.markup }));\n    }, 0);\n  };\n\n  const addPreparationStep = () => {\n    setRecipeForm(prev => ({\n      ...prev,\n      preparationSteps: [...prev.preparationSteps, { \n        id: Date.now().toString(), \n        order: prev.preparationSteps.length + 1, \n        description: '' \n      }]\n    }));\n  };\n\n  const handlePreparationStepChange = (index: number, description: string) => {\n    setRecipeForm(prev => {\n      const updatedSteps = prev.preparationSteps.map((step, i) => \n        i === index ? { ...step, description } : step\n      );\n      \n      // Wenn der letzte Schritt ausgefüllt wird, füge eine neue leere Zeile hinzu\n      if (index === updatedSteps.length - 1 && description.trim() !== '') {\n        updatedSteps.push({\n          id: Date.now().toString(),\n          order: updatedSteps.length + 1,\n          description: ''\n        });\n      }\n      \n      return {\n        ...prev,\n        preparationSteps: updatedSteps\n      };\n    });\n  };\n\n  const handleRecipeImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (file) {\n      // Prüfe ob es ein Bild ist\n      if (file.type.startsWith('image/')) {\n        setRecipeForm(prev => ({ ...prev, image: file }));\n      } else {\n        alert('Bitte wählen Sie eine Bilddatei aus.');\n      }\n    }\n  };\n\n  const removePreparationStep = (index: number) => {\n    setRecipeForm(prev => {\n      const updatedSteps = prev.preparationSteps.filter((_, i) => i !== index);\n      \n      // Wenn nach dem Löschen keine leere Zeile am Ende ist, füge eine hinzu\n      if (updatedSteps.length > 0 && updatedSteps[updatedSteps.length - 1].description.trim() !== '') {\n        updatedSteps.push({\n          id: Date.now().toString(),\n          order: updatedSteps.length + 1,\n          description: ''\n        });\n      }\n      \n      return {\n        ...prev,\n        preparationSteps: updatedSteps\n      };\n    });\n  };\n\n  const handleSaveRecipe = () => {\n    // Entferne leere Zubereitungsschritte vor dem Speichern\n    const cleanedPreparationSteps = recipeForm.preparationSteps\n      .filter(step => step.description.trim() !== '')\n      .map((step, index) => ({ ...step, order: index + 1 }));\n\n    if (editingRecipe) {\n      // Rezept bearbeiten\n      // Hier würde die Logik für das Bearbeiten implementiert\n      setEditingRecipe(null);\n    } else {\n      // Neues Rezept erstellen\n      const newRecipe = {\n        ...recipeForm,\n        preparationSteps: cleanedPreparationSteps,\n        id: Date.now().toString(),\n        materialCosts: calculateMaterialCosts(),\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n      // Hier würde das Rezept gespeichert werden\n      console.log('Neues Rezept:', newRecipe);\n    }\n    setShowRecipeForm(false);\n    resetRecipeForm();\n  };\n\n  const handleSaveSupplier = () => {\n    if (editingSupplier) {\n      // Lieferant bearbeiten\n      setSuppliers(prev => prev.map(supplier => \n        supplier.id === editingSupplier.id \n          ? { ...supplierForm, id: supplier.id }\n          : supplier\n      ));\n      setEditingSupplier(null);\n    } else {\n      // Neuen Lieferanten erstellen\n      const newSupplier = {\n        ...supplierForm,\n        id: Date.now().toString()\n      };\n      setSuppliers(prev => [...prev, newSupplier]);\n      setArticleForm(prev => ({ ...prev, supplierId: newSupplier.id }));\n    }\n    setShowSupplierForm(false);\n    resetSupplierForm();\n  };\n\n  const addPhoneNumber = () => {\n    setSupplierForm(prev => ({\n      ...prev,\n      phoneNumbers: [...prev.phoneNumbers, { type: 'Geschäft', number: '' }]\n    }));\n  };\n\n  const removePhoneNumber = (index: number) => {\n    setSupplierForm(prev => ({\n      ...prev,\n      phoneNumbers: prev.phoneNumbers.filter((_, i) => i !== index)\n    }));\n  };\n\n  const updatePhoneNumber = (index: number, field: 'type' | 'number', value: string) => {\n    setSupplierForm(prev => ({\n      ...prev,\n      phoneNumbers: prev.phoneNumbers.map((phone, i) => \n        i === index ? { ...phone, [field]: value } : phone\n      )\n    }));\n  };\n\n  // Preisumrechnung Hilfsfunktionen\n  const calculateGrossPrice = (netPrice: number, vatRate: number) => {\n    return netPrice * (1 + vatRate / 100);\n  };\n\n  const calculateNetPrice = (grossPrice: number, vatRate: number) => {\n    return grossPrice / (1 + vatRate / 100);\n  };\n\n  const handleApplyGrossPrice = () => {\n    const grossPrice = calculateGrossPrice(articleForm.bundlePrice, selectedVatRate);\n    setArticleForm(prev => ({ ...prev, bundlePrice: grossPrice }));\n    setShowPriceConverter(false);\n  };\n\n  const handleApplyNetPrice = () => {\n    const netPrice = calculateNetPrice(articleForm.bundlePrice, selectedVatRate);\n    setArticleForm(prev => ({ ...prev, bundlePrice: netPrice }));\n    setShowPriceConverter(false);\n  };\n\n  // State für unformatierte Eingabewerte\n  const [bundlePriceInput, setBundlePriceInput] = useState('');\n  const [contentInput, setContentInput] = useState('');\n  \n  // State für Inhaltsstoffe-Dropdown\n  const [showIngredientsDropdown, setShowIngredientsDropdown] = useState(false);\n  \n  // State für Allergene-Dropdown\n  const [showAllergensDropdown, setShowAllergensDropdown] = useState(false);\n  \n  // State für eigenen Sicherheits-Dialog\n  const [showDeleteDialog, setShowDeleteDialog] = useState(false);\n  const [deleteDialogData, setDeleteDialogData] = useState<{\n    type: 'single' | 'bulk';\n    articleId?: string;\n    articleName?: string;\n    count?: number;\n  } | null>(null);\n\n  // State für Lieferanten-Bearbeitung\n  const [editingSupplier, setEditingSupplier] = useState<any>(null);\n  \n  // State für Rezept-Formular\n  const [showRecipeForm, setShowRecipeForm] = useState(false);\n  const [editingRecipe, setEditingRecipe] = useState<any>(null);\n  const [recipeForm, setRecipeForm] = useState({\n    name: '',\n    description: '',\n    image: null as File | null,\n    portions: 4,\n    preparationTime: 30,\n    difficulty: 3,\n    energy: 0,\n    materialCosts: 0,\n    markupPercentage: 300,\n    vatRate: 19,\n    sellingPrice: 0,\n    ingredients: [{ id: Date.now().toString(), name: '', amount: 0, unit: 'g', price: 0 }],\n    preparationSteps: [{ id: Date.now().toString(), order: 1, description: '' }]\n  });\n\n  // Nach dem useState für recipeForm:\n  const [sellingPriceInput, setSellingPriceInput] = useState(recipeForm.sellingPrice.toFixed(2));\n  const [activeTab, setActiveTab] = useState<'kalkulation' | 'inhaltsangaben' | 'naehrwerte'>('kalkulation');\n\n  \n  // State für Zutat-Autovervollständigung\n  const [ingredientSearchTerm, setIngredientSearchTerm] = useState('');\n  const [showIngredientDropdown, setShowIngredientDropdown] = useState(false);\n  const [selectedIngredientIndex, setSelectedIngredientIndex] = useState(-1);\n  const [dropdownSelectionIndex, setDropdownSelectionIndex] = useState(-1);\n  const [dropdownPosition, setDropdownPosition] = useState({ top: 0, left: 0 });\n  \n  // State für Import/Export-System\n  const [showImportExportModal, setShowImportExportModal] = useState(false);\n  const [importData, setImportData] = useState<any[]>([]);\n  const [importHeaders, setImportHeaders] = useState<string[]>([]);\n  const [fieldMappings, setFieldMappings] = useState<{[key: string]: string}>({});\n  const [importPreview, setImportPreview] = useState<any[]>([]);\n  const [importErrors, setImportErrors] = useState<string[]>([]);\n  const [detectedEncoding, setDetectedEncoding] = useState<string>('');\n  const [importResult, setImportResult] = useState<{imported: number, skipped: number, suppliersCreated: number} | null>(null);\n\n  \n  // Ref für automatischen Fokus auf Artikelname-Feld\n  const articleNameInputRef = useRef<HTMLInputElement>(null);\n\n  // Automatischer Fokus auf Artikelname-Feld wenn Modal geöffnet wird\n  useEffect(() => {\n    if (showArticleForm && articleNameInputRef.current) {\n      // Kurze Verzögerung um sicherzustellen, dass das Modal vollständig gerendert ist\n      setTimeout(() => {\n        articleNameInputRef.current?.focus();\n        // Optional: Text markieren für einfache Überschreibung\n        articleNameInputRef.current?.select();\n      }, 100);\n    }\n  }, [showArticleForm]);\n\n\n\n\n\n  // Einheiten-Autocomplete Hilfsfunktionen\n  const getFilteredBundleUnits = () => {\n    return UNITS.filter(unit => \n      unit.toLowerCase().includes(bundleUnitSearchTerm.toLowerCase())\n    );\n  };\n\n  const handleBundleUnitSelect = (unit: string) => {\n    setArticleForm(prev => ({ ...prev, bundleUnit: unit }));\n    setBundleUnitSearchTerm('');\n    setShowBundleUnitDropdown(false);\n    setSelectedBundleUnitIndex(-1);\n  };\n\n  const handleBundleUnitInputChange = (value: string) => {\n    setBundleUnitSearchTerm(value);\n    setArticleForm(prev => ({ ...prev, bundleUnit: value }));\n    setShowBundleUnitDropdown(true);\n    setSelectedBundleUnitIndex(-1);\n  };\n\n  const handleBundleUnitInputBlur = () => {\n    setTimeout(() => setShowBundleUnitDropdown(false), 200);\n  };\n\n  const handleBundleUnitKeyDown = (e: React.KeyboardEvent) => {\n    const filteredUnits = getFilteredBundleUnits();\n    \n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedBundleUnitIndex(prev => \n          prev < filteredUnits.length - 1 ? prev + 1 : prev\n        );\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedBundleUnitIndex(prev => prev > 0 ? prev - 1 : -1);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (selectedBundleUnitIndex >= 0 && selectedBundleUnitIndex < filteredUnits.length) {\n          handleBundleUnitSelect(filteredUnits[selectedBundleUnitIndex]);\n        } else if (bundleUnitSearchTerm && !UNITS.includes(bundleUnitSearchTerm)) {\n          handleBundleUnitSelect(bundleUnitSearchTerm);\n        }\n        break;\n      case 'Escape':\n        setShowBundleUnitDropdown(false);\n        setSelectedBundleUnitIndex(-1);\n        break;\n      case 'Tab':\n        if (selectedBundleUnitIndex >= 0 && selectedBundleUnitIndex < filteredUnits.length) {\n          handleBundleUnitSelect(filteredUnits[selectedBundleUnitIndex]);\n        }\n        break;\n    }\n  };\n\n  const getFilteredContentUnits = () => {\n    return UNITS.filter(unit => \n      unit.toLowerCase().includes(contentUnitSearchTerm.toLowerCase())\n    );\n  };\n\n  const handleContentUnitSelect = (unit: string) => {\n    setArticleForm(prev => ({ ...prev, contentUnit: unit }));\n    setContentUnitSearchTerm('');\n    setShowContentUnitDropdown(false);\n    setSelectedContentUnitIndex(-1);\n  };\n\n  const handleContentUnitInputChange = (value: string) => {\n    setContentUnitSearchTerm(value);\n    setArticleForm(prev => ({ ...prev, contentUnit: value }));\n    setShowContentUnitDropdown(true);\n    setSelectedContentUnitIndex(-1);\n  };\n\n  const handleContentUnitInputBlur = () => {\n    setTimeout(() => setShowContentUnitDropdown(false), 200);\n  };\n\n  const handleContentUnitKeyDown = (e: React.KeyboardEvent) => {\n    const filteredUnits = getFilteredContentUnits();\n    \n    switch (e.key) {\n      case 'ArrowDown':\n        e.preventDefault();\n        setSelectedContentUnitIndex(prev => \n          prev < filteredUnits.length - 1 ? prev + 1 : prev\n        );\n        break;\n      case 'ArrowUp':\n        e.preventDefault();\n        setSelectedContentUnitIndex(prev => prev > 0 ? prev - 1 : -1);\n        break;\n      case 'Enter':\n        e.preventDefault();\n        if (selectedContentUnitIndex >= 0 && selectedContentUnitIndex < filteredUnits.length) {\n          handleContentUnitSelect(filteredUnits[selectedContentUnitIndex]);\n        } else if (contentUnitSearchTerm && !UNITS.includes(contentUnitSearchTerm)) {\n          handleContentUnitSelect(contentUnitSearchTerm);\n        }\n        break;\n      case 'Escape':\n        setShowContentUnitDropdown(false);\n        setSelectedContentUnitIndex(-1);\n        break;\n      case 'Tab':\n        if (selectedContentUnitIndex >= 0 && selectedContentUnitIndex < filteredUnits.length) {\n          handleContentUnitSelect(filteredUnits[selectedContentUnitIndex]);\n        }\n        break;\n    }\n  };\n\n  // Hilfsfunktionen für Dropdowns\n  const formatIngredientsDisplay = (ingredients: string[]) => {\n    return ingredients.length > 0 ? ingredients.join(', ') : 'Keine ausgewählt';\n  };\n\n  const formatAllergensDisplay = (allergens: string[]) => {\n    return allergens.length > 0 ? allergens.join(', ') : 'Keine ausgewählt';\n  };\n\n  const handleIngredientsDropdownToggle = () => {\n    setShowIngredientsDropdown(!showIngredientsDropdown);\n  };\n\n  const handleAllergensDropdownToggle = () => {\n    setShowAllergensDropdown(!showAllergensDropdown);\n  };\n\n  // Hilfsfunktion für Kalorien-zu-kJoule Umrechnung\n  const calculateKilojoules = (calories: number) => {\n    return Math.round(calories * 4.184 * 100) / 100; // Auf 2 Nachkommastellen gerundet\n  };\n\n  // Click-Outside-Handler für Dropdowns\n  useEffect(() => {\n    const handleClickOutside = (event: MouseEvent) => {\n      const target = event.target as Element;\n      if (!target.closest('.ingredients-dropdown-container')) {\n        setShowIngredientsDropdown(false);\n      }\n      if (!target.closest('.allergens-dropdown-container')) {\n        setShowAllergensDropdown(false);\n      }\n    };\n\n    if (showIngredientsDropdown || showAllergensDropdown) {\n      document.addEventListener('mousedown', handleClickOutside);\n    }\n\n    return () => {\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showIngredientsDropdown, showAllergensDropdown]);\n\n  const renderPage = () => {\n    const colors = getCurrentColors();\n    \n    switch (currentPage) {\n      case 'dashboard':\n        // Berechne den Gesamtwert aller Artikel\n        const totalValue = articles.reduce((sum, article) => sum + article.bundlePrice, 0);\n        \n        return (\n          <div className=\"container-fluid p-4\">\n            {/* Paper-like Dashboard */}\n            <div style={{\n              backgroundColor: colors.paper || colors.card,\n              borderRadius: '12px',\n              boxShadow: colors.paperShadow || '0 4px 12px rgba(0,0,0,0.1)',\n              padding: '2rem',\n              minHeight: 'calc(100vh - 120px)',\n              border: `1px solid ${colors.cardBorder}`\n            }}>\n              <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                <h1 style={{ color: colors.text, margin: 0 }}>Dashboard</h1>\n                <div className=\"d-flex gap-2\">\n                  <button \n                    className=\"btn btn-outline-secondary btn-sm\"\n                    onClick={() => {\n                      resetArticleForm();\n                      setShowArticleForm(true);\n                    }}\n                    style={{\n                      borderColor: colors.accent,\n                      color: colors.accent\n                    }}\n                  >\n                    <FaPlus className=\"me-1\" />\n                    Neuer Artikel\n                  </button>\n                  <button \n                    className=\"btn btn-outline-secondary btn-sm\"\n                    onClick={() => {\n                      resetRecipeForm();\n                      setShowRecipeForm(true);\n                    }}\n                    style={{\n                      borderColor: colors.accent,\n                      color: colors.accent\n                    }}\n                  >\n                    <FaPlus className=\"me-1\" />\n                    Neues Rezept\n                  </button>\n                </div>\n              </div>\n              \n              <div className=\"row\">\n                <div className=\"col-md-3 mb-4\">\n                  <div className=\"card h-100\" style={{ \n                    backgroundColor: colors.card, \n                    borderColor: colors.cardBorder,\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\n                    borderRadius: '8px'\n                  }}>\n                    <div className=\"card-body text-center\">\n                      <div style={{ \n                        width: 60, \n                        height: 60, \n                        backgroundColor: colors.accent, \n                        borderRadius: '50%',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        margin: '0 auto 1rem',\n                        color: 'white',\n                        fontSize: '1.5rem'\n                      }}>\n                        📦\n                      </div>\n                      <h5 className=\"card-title\" style={{ color: colors.text }}>Artikel</h5>\n                      <p className=\"card-text\" style={{ color: colors.accent, fontSize: '2.5rem', fontWeight: 'bold', margin: 0 }}>{articles.length}</p>\n                      <small style={{ color: colors.text }}>Verfügbare Artikel</small>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"col-md-3 mb-4\">\n                  <div className=\"card h-100\" style={{ \n                    backgroundColor: colors.card, \n                    borderColor: colors.cardBorder,\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\n                    borderRadius: '8px'\n                  }}>\n                    <div className=\"card-body text-center\">\n                      <div style={{ \n                        width: 60, \n                        height: 60, \n                        backgroundColor: colors.accent, \n                        borderRadius: '50%',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        margin: '0 auto 1rem',\n                        color: 'white',\n                        fontSize: '1.5rem'\n                      }}>\n                        👥\n                      </div>\n                      <h5 className=\"card-title\" style={{ color: colors.text }}>Lieferanten</h5>\n                      <p className=\"card-text\" style={{ color: colors.accent, fontSize: '2.5rem', fontWeight: 'bold', margin: 0 }}>3</p>\n                      <small style={{ color: colors.text }}>Aktive Partner</small>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"col-md-3 mb-4\">\n                  <div className=\"card h-100\" style={{ \n                    backgroundColor: colors.card, \n                    borderColor: colors.cardBorder,\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\n                    borderRadius: '8px'\n                  }}>\n                    <div className=\"card-body text-center\">\n                      <div style={{ \n                        width: 60, \n                        height: 60, \n                        backgroundColor: colors.accent, \n                        borderRadius: '50%',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        margin: '0 auto 1rem',\n                        color: 'white',\n                        fontSize: '1.5rem'\n                      }}>\n                        🏷️\n                      </div>\n                      <h5 className=\"card-title\" style={{ color: colors.text }}>Kategorien</h5>\n                      <p className=\"card-text\" style={{ color: colors.accent, fontSize: '2.5rem', fontWeight: 'bold', margin: 0 }}>{getUsedCategories().length}</p>\n                      <small style={{ color: colors.text }}>Verwendete Kategorien</small>\n                    </div>\n                  </div>\n                </div>\n                <div className=\"col-md-3 mb-4\">\n                  <div className=\"card h-100\" style={{ \n                    backgroundColor: colors.card, \n                    borderColor: colors.cardBorder,\n                    boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\n                    borderRadius: '8px'\n                  }}>\n                    <div className=\"card-body text-center\">\n                      <div style={{ \n                        width: 60, \n                        height: 60, \n                        backgroundColor: colors.accent, \n                        borderRadius: '50%',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        margin: '0 auto 1rem',\n                        color: 'white',\n                        fontSize: '1.5rem'\n                      }}>\n                        💰\n                      </div>\n                      <h5 className=\"card-title\" style={{ color: colors.text }}>Gesamtwert</h5>\n                      <p className=\"card-text\" style={{ color: colors.accent, fontSize: '2.5rem', fontWeight: 'bold', margin: 0 }}>€{totalValue.toFixed(2)}</p>\n                      <small style={{ color: colors.text }}>Lagerwert</small>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              {/* Quick Actions Section */}\n              <div className=\"row mt-4\">\n                <div className=\"col-12\">\n                  <h3 style={{ color: colors.text, marginBottom: '1rem' }}>Schnellzugriff</h3>\n                  <div className=\"row\">\n                    <div className=\"col-md-4 mb-3\">\n                      <button \n                        className=\"btn btn-outline-primary w-100 p-3\" \n                        onClick={() => {\n                          resetArticleForm();\n                          setShowArticleForm(true);\n                        }}\n                        style={{ \n                          borderColor: colors.accent, \n                          color: colors.accent,\n                          borderRadius: '8px'\n                        }}\n                      >\n                        <FaPlus className=\"me-2\" />\n                        Neuen Artikel anlegen\n                      </button>\n                    </div>\n                    <div className=\"col-md-4 mb-3\">\n                      <button \n                        className=\"btn btn-outline-primary w-100 p-3\" \n                        onClick={() => {\n                          resetRecipeForm();\n                          setShowRecipeForm(true);\n                        }}\n                        style={{ \n                          borderColor: colors.accent, \n                          color: colors.accent,\n                          borderRadius: '8px'\n                        }}\n                      >\n                        <FaPlus className=\"me-2\" />\n                        Neues Rezept erstellen\n                      </button>\n                    </div>\n                    <div className=\"col-md-4 mb-3\">\n                      <button \n                        className=\"btn btn-outline-primary w-100 p-3\" \n                        onClick={() => setCurrentPage('artikel')}\n                        style={{ \n                          borderColor: colors.accent, \n                          color: colors.accent,\n                          borderRadius: '8px'\n                        }}\n                      >\n                        <FaSearch className=\"me-2\" />\n                        Artikel durchsuchen\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        );\n      case 'kalkulation':\n        return (\n          <div className=\"container-fluid p-4\">\n            <div style={{\n              backgroundColor: colors.paper || colors.card,\n              borderRadius: '12px',\n              boxShadow: colors.paperShadow || '0 4px 12px rgba(0,0,0,0.1)',\n              padding: '2rem',\n              minHeight: 'calc(100vh - 120px)',\n              border: `1px solid ${colors.cardBorder}`\n            }}>\n              <div className=\"d-flex mb-4\" style={{ borderBottom: `2px solid ${colors.accent}` }}>\n                {[\n                  { key: 'kalkulation', label: 'Kalkulation' },\n                  { key: 'inhaltsangaben', label: 'Inhaltsangaben' },\n                  { key: 'naehrwerte', label: 'Nährwerte' }\n                ].map(tab => (\n                  <div\n                    key={tab.key}\n                    className=\"flex-fill text-center\"\n                    style={{\n                      cursor: 'pointer',\n                      fontWeight: activeTab === tab.key ? 'bold' : 'normal',\n                      color: activeTab === tab.key ? colors.accent : colors.text,\n                      borderBottom: activeTab === tab.key ? `2px solid ${colors.accent}` : 'none',\n                      padding: '0.5rem 0'\n                    }}\n                    onClick={() => setActiveTab(tab.key as any)}\n                  >\n                    {tab.label}\n                  </div>\n                ))}\n              </div>\n              {activeTab === 'kalkulation' && (\n                <>\n                  <h1 style={{ color: colors.text }}>Kalkulation</h1>\n                  <p style={{ color: colors.text }}>Hier können Sie zwischen Rezepten, Artikeln und Lieferanten wechseln.</p>\n                  <div className=\"row mt-4\">\n                    <div className=\"col-md-4 mb-3\">\n                      <button \n                        className=\"btn btn-outline-primary w-100 p-3\" \n                        onClick={() => setCurrentPage('rezepte')}\n                        style={{\n                          borderColor: colors.accent,\n                          color: colors.accent,\n                          borderRadius: '8px'\n                        }}\n                      >\n                        <FaUtensils className=\"me-2\" />\n                        Rezepte verwalten\n                      </button>\n                    </div>\n                    <div className=\"col-md-4 mb-3\">\n                      <button \n                        className=\"btn btn-outline-primary w-100 p-3\"\n                        onClick={() => setCurrentPage('artikel')}\n                        style={{\n                          borderColor: colors.accent,\n                          color: colors.accent,\n                          borderRadius: '8px'\n                        }}\n                      >\n                        <FaBoxes className=\"me-2\" />\n                        Artikel verwalten\n                      </button>\n                    </div>\n                    <div className=\"col-md-4 mb-3\">\n                      <button \n                        className=\"btn btn-outline-primary w-100 p-3\"\n                        onClick={() => setCurrentPage('lieferanten')}\n                        style={{\n                          borderColor: colors.accent,\n                          color: colors.accent,\n                          borderRadius: '8px'\n                        }}\n                      >\n                        <FaUsers className=\"me-2\" />\n                        Lieferanten verwalten\n                      </button>\n                    </div>\n                  </div>\n                </>\n              )}\n              {activeTab === 'inhaltsangaben' && (\n                <div className=\"row\">\n                  <div className=\"col-md-6 mb-3\">\n                    <label className=\"form-label\" style={{ color: colors.text }}>\n                      Inhaltsstoffe\n                    </label>\n                    <textarea\n                      className=\"form-control\"\n                      value={getRecipeIngredients().join(', ')}\n                      readOnly\n                      rows={8}\n                      style={{ \n                        borderColor: colors.cardBorder, \n                        color: colors.text,\n                        backgroundColor: colors.paper || colors.card,\n                        resize: 'none'\n                      }}\n                    />\n                  </div>\n                  <div className=\"col-md-6 mb-3\">\n                    <label className=\"form-label\" style={{ color: colors.text }}>\n                      Allergene\n                    </label>\n                    <textarea\n                      className=\"form-control\"\n                      value={getRecipeAllergens().join(', ')}\n                      readOnly\n                      rows={8}\n                      style={{ \n                        borderColor: colors.cardBorder, \n                        color: colors.text,\n                        backgroundColor: colors.paper || colors.card,\n                        resize: 'none'\n                      }}\n                    />\n                  </div>\n                </div>\n              )}\n              {activeTab === 'naehrwerte' && (\n                <div className=\"row\">\n                  <div className=\"col-12\">\n                    <div className=\"row\">\n                      <div className=\"col-md-3 mb-3\">\n                        <label className=\"form-label\" style={{ color: colors.text }}>\n                          Energie (kcal)\n                        </label>\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          value={calculateRecipeNutrition().calories}\n                          readOnly\n                          style={{ \n                            borderColor: colors.cardBorder, \n                            color: colors.text,\n                            backgroundColor: colors.paper || colors.card\n                          }}\n                        />\n                      </div>\n                      <div className=\"col-md-3 mb-3\">\n                        <label className=\"form-label\" style={{ color: colors.text }}>\n                          Energie (kJ)\n                        </label>\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          value={calculateRecipeNutrition().kilojoules}\n                          readOnly\n                          style={{ \n                            borderColor: colors.cardBorder, \n                            color: colors.text,\n                            backgroundColor: colors.paper || colors.card\n                          }}\n                        />\n                      </div>\n                      <div className=\"col-md-3 mb-3\">\n                        <label className=\"form-label\" style={{ color: colors.text }}>\n                          Fett (g)\n                        </label>\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          value={calculateRecipeNutrition().fat}\n                          readOnly\n                          style={{ \n                            borderColor: colors.cardBorder, \n                            color: colors.text,\n                            backgroundColor: colors.paper || colors.card\n                          }}\n                        />\n                      </div>\n                      <div className=\"col-md-3 mb-3\">\n                        <label className=\"form-label\" style={{ color: colors.text }}>\n                          Kohlenhydrate (g)\n                        </label>\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          value={calculateRecipeNutrition().carbohydrates}\n                          readOnly\n                          style={{ \n                            borderColor: colors.cardBorder, \n                            color: colors.text,\n                            backgroundColor: colors.paper || colors.card\n                          }}\n                        />\n                      </div>\n                    </div>\n                    <div className=\"row\">\n                      <div className=\"col-md-3 mb-3\">\n                        <label className=\"form-label\" style={{ color: colors.text }}>\n                          Eiweiß (g)\n                        </label>\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          value={calculateRecipeNutrition().protein}\n                          readOnly\n                          style={{ \n                            borderColor: colors.cardBorder, \n                            color: colors.text,\n                            backgroundColor: colors.paper || colors.card\n                          }}\n                        />\n                      </div>\n                      <div className=\"col-md-3 mb-3\">\n                        <label className=\"form-label\" style={{ color: colors.text }}>\n                          Ballaststoffe (g)\n                        </label>\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          value={calculateRecipeNutrition().fiber}\n                          readOnly\n                          style={{ \n                            borderColor: colors.cardBorder, \n                            color: colors.text,\n                            backgroundColor: colors.paper || colors.card\n                          }}\n                        />\n                      </div>\n                      <div className=\"col-md-3 mb-3\">\n                        <label className=\"form-label\" style={{ color: colors.text }}>\n                          Zucker (g)\n                        </label>\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          value={calculateRecipeNutrition().sugar}\n                          readOnly\n                          style={{ \n                            borderColor: colors.cardBorder, \n                            color: colors.text,\n                            backgroundColor: colors.paper || colors.card\n                          }}\n                        />\n                      </div>\n                      <div className=\"col-md-3 mb-3\">\n                        <label className=\"form-label\" style={{ color: colors.text }}>\n                          Salz (g)\n                        </label>\n                        <input\n                          type=\"text\"\n                          className=\"form-control\"\n                          value={calculateRecipeNutrition().salt}\n                          readOnly\n                          style={{ \n                            borderColor: colors.cardBorder, \n                            color: colors.text,\n                            backgroundColor: colors.paper || colors.card\n                          }}\n                        />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      case 'artikel':\n        const filteredArticles = filteredAndSortedArticles();\n        const categories = getUsedCategories();\n        const suppliers = getUniqueSuppliers();\n        \n        return (\n          <div className=\"container-fluid p-4\">\n            <div style={{\n              backgroundColor: colors.paper || colors.card,\n              borderRadius: '12px',\n              boxShadow: colors.paperShadow || '0 4px 12px rgba(0,0,0,0.1)',\n              padding: '2rem',\n              minHeight: 'calc(100vh - 120px)',\n              border: `1px solid ${colors.cardBorder}`\n            }}>\n              {/* Header */}\n              <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                <h1 style={{ color: colors.text, margin: 0 }}>Artikelverwaltung</h1>\n              </div>\n\n              {/* Suchleiste und Ansichtswechsel */}\n              <div className=\"row mb-3\">\n                <div className=\"col-md-7\">\n                  <div className=\"input-group\">\n                    <span className=\"input-group-text\" style={{\n                      backgroundColor: colors.secondary,\n                      borderColor: colors.cardBorder,\n                      color: colors.text\n                    }}>\n                      <FaSearch />\n                    </span>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Artikel suchen...\"\n                      value={searchTerm}\n                      onChange={(e) => setSearchTerm(e.target.value)}\n                      style={{\n                        borderColor: colors.cardBorder,\n                        color: colors.text\n                      }}\n                    />\n                    <button\n                      className=\"btn btn-primary\"\n                      style={{\n                        backgroundColor: colors.accent,\n                        borderColor: colors.accent,\n                        color: 'white'\n                      }}\n                      title=\"Neuer Artikel\"\n                      onClick={() => {\n                        resetArticleForm();\n                        setShowArticleForm(true);\n                      }}\n                    >\n                      <FaPlus />\n                    </button>\n                  </div>\n                </div>\n                <div className=\"col-md-3\">\n                  <div className=\"btn-group w-100\" role=\"group\">\n                    <button\n                      type=\"button\"\n                      className={`btn ${viewMode === 'list' ? 'btn-primary' : 'btn-outline-secondary'}`}\n                      onClick={() => setViewMode('list')}\n                      style={{\n                        backgroundColor: viewMode === 'list' ? colors.accent : 'transparent',\n                        borderColor: colors.cardBorder,\n                        color: viewMode === 'list' ? 'white' : colors.text\n                      }}\n                    >\n                      <FaList className=\"me-1\" />\n                      Liste\n                    </button>\n                    <button\n                      type=\"button\"\n                      className={`btn ${viewMode === 'grid' ? 'btn-primary' : 'btn-outline-secondary'}`}\n                      onClick={() => setViewMode('grid')}\n                      style={{\n                        backgroundColor: viewMode === 'grid' ? colors.accent : 'transparent',\n                        borderColor: colors.cardBorder,\n                        color: viewMode === 'grid' ? 'white' : colors.text\n                      }}\n                    >\n                      <FaTh className=\"me-1\" />\n                      Kacheln\n                    </button>\n                  </div>\n                </div>\n                <div className=\"col-md-2\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-outline-primary w-100\"\n                    onClick={() => setShowImportExportModal(true)}\n                    style={{\n                      borderColor: colors.accent,\n                      color: colors.accent\n                    }}\n                  >\n                    <FaSave className=\"me-1\" />\n                    Import/Export\n                  </button>\n                </div>\n              </div>\n\n              {/* Filter und Sortierung */}\n              <div className=\"row mb-3\">\n                <div className=\"col-md-3\">\n                  <select\n                    className=\"form-select\"\n                    value={selectedCategory}\n                    onChange={(e) => setSelectedCategory(e.target.value)}\n                    style={{\n                      borderColor: colors.cardBorder,\n                      color: colors.text\n                    }}\n                  >\n                    <option value=\"\">Alle Kategorien</option>\n                    {categories.map(category => (\n                      <option key={category} value={category}>{category}</option>\n                    ))}\n                  </select>\n                </div>\n                <div className=\"col-md-3\">\n                  <select\n                    className=\"form-select\"\n                    value={selectedSupplier}\n                    onChange={(e) => setSelectedSupplier(e.target.value)}\n                    style={{\n                      borderColor: colors.cardBorder,\n                      color: colors.text\n                    }}\n                  >\n                    <option value=\"\">Alle Lieferanten</option>\n                    {suppliers.map(supplier => (\n                      <option key={supplier} value={supplier}>{supplier}</option>\n                    ))}\n                  </select>\n                </div>\n                <div className=\"col-md-3\">\n                  <select\n                    className=\"form-select\"\n                    value={sortField}\n                    onChange={(e) => setSortField(e.target.value)}\n                    style={{\n                      borderColor: colors.cardBorder,\n                      color: colors.text\n                    }}\n                  >\n                    <option value=\"name\">Artikel</option>\n                    <option value=\"supplier\">Lieferant</option>\n                    <option value=\"category\">Kategorie</option>\n                    <option value=\"bundlePrice\">Gebindepreis</option>\n                    <option value=\"pricePerUnit\">Preis/Einheit</option>\n                  </select>\n                </div>\n                <div className=\"col-md-3\">\n                  <button\n                    className=\"btn btn-outline-secondary w-100\"\n                    onClick={() => setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc')}\n                    style={{\n                      borderColor: colors.cardBorder,\n                      color: colors.text\n                    }}\n                  >\n                    <FaSort className=\"me-1\" />\n                    {sortDirection === 'asc' ? 'Aufsteigend' : 'Absteigend'}\n                  </button>\n                </div>\n              </div>\n\n              {/* Bulk-Aktionen */}\n              {selectedArticles.length > 0 && (\n                <div className=\"alert alert-warning mb-3\" style={{\n                  backgroundColor: colors.secondary,\n                  borderColor: colors.cardBorder,\n                  color: colors.text\n                }}>\n                  <div className=\"d-flex justify-content-between align-items-center\">\n                    <span>{selectedArticles.length} Artikel ausgewählt</span>\n                    <button\n                      className=\"btn btn-danger btn-sm\"\n                      onClick={handleDeleteArticles}\n                    >\n                      <FaTrash className=\"me-1\" />\n                      Löschen\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Artikel-Liste */}\n              {viewMode === 'list' ? (\n                <div className=\"table-responsive\">\n                  <table className=\"table table-hover\" style={{\n                    backgroundColor: colors.card,\n                    borderColor: colors.cardBorder\n                  }}>\n                    <thead style={{ backgroundColor: colors.secondary }}>\n                      <tr>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>\n                          <input\n                            type=\"checkbox\"\n                            checked={selectedArticles.length === filteredArticles.length && filteredArticles.length > 0}\n                            onChange={handleSelectAll}\n                            style={{ accentColor: colors.accent }}\n                          />\n                        </th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Artikel</th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Lieferant</th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Gebindepreis</th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Inhalt</th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Preis/Einheit</th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Aktionen</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {filteredArticles.map(article => (\n                        <tr \n                          key={article.id} \n                          style={{ \n                            borderColor: colors.cardBorder,\n                            cursor: 'pointer'\n                          }}\n                          onDoubleClick={() => handleEditArticle(article)}\n                          title=\"Doppelklick zum Bearbeiten\"\n                        >\n                          <td style={{ borderColor: colors.cardBorder }}>\n                            <input\n                              type=\"checkbox\"\n                              checked={selectedArticles.includes(article.id)}\n                              onChange={() => handleSelectArticle(article.id)}\n                              style={{ accentColor: colors.accent }}\n                            />\n                          </td>\n                          <td style={{ borderColor: colors.cardBorder, color: colors.text }}>\n                            <strong>{article.name}</strong>\n                            <br />\n                            <small style={{ color: colors.accent }}>{article.category}</small>\n                          </td>\n                          <td style={{ borderColor: colors.cardBorder, color: colors.text }}>\n                            {getSupplierName(article.supplierId)}\n                            <br />\n                            <small style={{ color: colors.accent }}>\n                              {article.supplierArticleNumber || 'Keine Artikelnummer'}\n                            </small>\n                          </td>\n                          <td style={{ borderColor: colors.cardBorder, color: colors.text }}>\n                            {formatPrice(article.bundlePrice)}\n                            <br />\n                            <small style={{ color: colors.accent }}>\n                              pro {article.bundleUnit}\n                            </small>\n                          </td>\n                          <td style={{ borderColor: colors.cardBorder, color: colors.text }}>\n                            {article.content} {article.contentUnit}\n                          </td>\n                          <td style={{ borderColor: colors.cardBorder, color: colors.text }}>\n                            <strong>{formatPrice(article.pricePerUnit)}</strong>\n                            <br />\n                            <small style={{ color: colors.accent }}>pro {article.contentUnit}</small>\n                          </td>\n                          <td style={{ borderColor: colors.cardBorder }}>\n                            <div className=\"d-flex gap-2\">\n                              <button\n                                className=\"btn btn-link p-0\"\n                                title=\"Bearbeiten\"\n                                style={{\n                                  color: colors.accent,\n                                  textDecoration: 'none',\n                                  fontSize: '14px'\n                                }}\n                                onClick={() => handleEditArticle(article)}\n                              >\n                                <FaPencilAlt />\n                              </button>\n                              <button\n                                className=\"btn btn-link p-0\"\n                                title=\"Löschen\"\n                                style={{\n                                  color: '#dc3545',\n                                  textDecoration: 'none',\n                                  fontSize: '14px'\n                                }}\n                                onClick={() => handleDeleteSingleArticle(article.id, article.name)}\n                              >\n                                <FaClose />\n                              </button>\n                            </div>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              ) : (\n                /* Kachel-Ansicht */\n                <div className=\"row\">\n                  {filteredArticles.map(article => (\n                    <div key={article.id} className=\"col-md-4 col-lg-3 mb-3\">\n                      <div \n                        className=\"card h-100\" \n                        style={{\n                          backgroundColor: colors.card,\n                          borderColor: colors.cardBorder,\n                          boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\n                          cursor: 'pointer'\n                        }}\n                        onDoubleClick={() => handleEditArticle(article)}\n                        title=\"Doppelklick zum Bearbeiten\"\n                      >\n                        <div className=\"card-body\">\n                          <div className=\"d-flex justify-content-between align-items-start mb-2\">\n                            <input\n                              type=\"checkbox\"\n                              checked={selectedArticles.includes(article.id)}\n                              onChange={() => handleSelectArticle(article.id)}\n                              style={{ accentColor: colors.accent }}\n                            />\n                            <div className=\"d-flex gap-1\">\n                              <button\n                                className=\"btn btn-link p-0\"\n                                title=\"Bearbeiten\"\n                                style={{\n                                  color: colors.accent,\n                                  textDecoration: 'none',\n                                  fontSize: '12px'\n                                }}\n                                onClick={() => handleEditArticle(article)}\n                              >\n                                <FaPencilAlt />\n                              </button>\n                              <button\n                                className=\"btn btn-link p-0\"\n                                title=\"Löschen\"\n                                style={{\n                                  color: '#dc3545',\n                                  textDecoration: 'none',\n                                  fontSize: '12px'\n                                }}\n                                onClick={() => handleDeleteSingleArticle(article.id, article.name)}\n                              >\n                                <FaClose />\n                              </button>\n                            </div>\n                          </div>\n                          <h6 className=\"card-title\" style={{ color: colors.text }}>\n                            {article.name}\n                          </h6>\n                          <p className=\"card-text small\" style={{ color: colors.accent }}>\n                            {article.category}\n                          </p>\n                          <div className=\"mb-2\">\n                            <small style={{ color: colors.text }}>\n                              <strong>Lieferant:</strong> {getSupplierName(article.supplierId)}\n                            </small>\n                            <br />\n                            <small style={{ color: colors.accent }}>\n                              {article.supplierArticleNumber || 'Keine Artikelnummer'}\n                            </small>\n                          </div>\n                          <div className=\"mb-2\">\n                            <small style={{ color: colors.text }}>\n                              <strong>Gebindepreis:</strong> {formatPrice(article.bundlePrice)}\n                            </small>\n                            <br />\n                            <small style={{ color: colors.accent }}>\n                              pro {article.bundleUnit}\n                            </small>\n                          </div>\n                          <div className=\"mb-2\">\n                            <small style={{ color: colors.text }}>\n                              <strong>Inhalt:</strong> {article.content} {article.contentUnit}\n                            </small>\n                          </div>\n                          <div>\n                            <strong style={{ color: colors.accent }}>\n                              {formatPrice(article.pricePerUnit)} pro {article.contentUnit}\n                            </strong>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {/* Leere Liste */}\n              {filteredArticles.length === 0 && (\n                <div className=\"text-center py-5\">\n                  <FaBoxes style={{ fontSize: '3rem', color: colors.accent, marginBottom: '1rem' }} />\n                  <h5 style={{ color: colors.text }}>Keine Artikel gefunden</h5>\n                  <p style={{ color: colors.text }}>\n                    {searchTerm || selectedCategory || selectedSupplier \n                      ? 'Versuchen Sie andere Suchkriterien oder Filter.'\n                      : 'Erstellen Sie Ihren ersten Artikel mit dem \"Neuer Artikel\" Button.'\n                    }\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      case 'lieferanten':\n        const filteredSuppliers = filteredAndSortedSuppliers();\n        \n        return (\n          <div className=\"container-fluid p-4\">\n            <div style={{\n              backgroundColor: colors.paper || colors.card,\n              borderRadius: '12px',\n              boxShadow: colors.paperShadow || '0 4px 12px rgba(0,0,0,0.1)',\n              padding: '2rem',\n              minHeight: 'calc(100vh - 120px)',\n              border: `1px solid ${colors.cardBorder}`\n            }}>\n              {/* Header */}\n              <div className=\"d-flex justify-content-between align-items-center mb-4\">\n                <h1 style={{ color: colors.text, margin: 0 }}>Lieferantenverwaltung</h1>\n              </div>\n\n              {/* Suchleiste und Ansichtswechsel */}\n              <div className=\"row mb-3\">\n                <div className=\"col-md-7\">\n                  <div className=\"input-group\">\n                    <span className=\"input-group-text\" style={{\n                      backgroundColor: colors.secondary,\n                      borderColor: colors.cardBorder,\n                      color: colors.text\n                    }}>\n                      <FaSearch />\n                    </span>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Lieferanten suchen...\"\n                      value={supplierSearchTerm}\n                      onChange={(e) => setSupplierSearchTerm(e.target.value)}\n                      style={{\n                        borderColor: colors.cardBorder,\n                        color: colors.text\n                      }}\n                    />\n                    <button\n                      className=\"btn btn-primary\"\n                      style={{\n                        backgroundColor: colors.accent,\n                        borderColor: colors.accent,\n                        color: 'white'\n                      }}\n                      title=\"Neuer Lieferant\"\n                      onClick={() => {\n                        resetSupplierForm();\n                        setShowSupplierForm(true);\n                      }}\n                    >\n                      <FaPlus />\n                    </button>\n                  </div>\n                </div>\n                <div className=\"col-md-3\">\n                  <div className=\"btn-group w-100\" role=\"group\">\n                    <button\n                      type=\"button\"\n                      className={`btn ${supplierViewMode === 'list' ? 'btn-primary' : 'btn-outline-secondary'}`}\n                      onClick={() => setSupplierViewMode('list')}\n                      style={{\n                        backgroundColor: supplierViewMode === 'list' ? colors.accent : 'transparent',\n                        borderColor: colors.cardBorder,\n                        color: supplierViewMode === 'list' ? 'white' : colors.text\n                      }}\n                    >\n                      <FaList className=\"me-1\" />\n                      Liste\n                    </button>\n                    <button\n                      type=\"button\"\n                      className={`btn ${supplierViewMode === 'grid' ? 'btn-primary' : 'btn-outline-secondary'}`}\n                      onClick={() => setSupplierViewMode('grid')}\n                      style={{\n                        backgroundColor: supplierViewMode === 'grid' ? colors.accent : 'transparent',\n                        borderColor: colors.cardBorder,\n                        color: supplierViewMode === 'grid' ? 'white' : colors.text\n                      }}\n                    >\n                      <FaTh className=\"me-1\" />\n                      Kacheln\n                    </button>\n                  </div>\n                </div>\n                <div className=\"col-md-2\">\n                  {/* Platzhalter für zukünftige Funktionen */}\n                </div>\n              </div>\n\n              {/* Filter und Sortierung */}\n              <div className=\"row mb-3\">\n                <div className=\"col-md-3\">\n                  <select\n                    className=\"form-select\"\n                    value={supplierSortField}\n                    onChange={(e) => setSupplierSortField(e.target.value)}\n                    style={{\n                      borderColor: colors.cardBorder,\n                      color: colors.text\n                    }}\n                  >\n                    <option value=\"name\">Name</option>\n                    <option value=\"contactPerson\">Kontaktperson</option>\n                    <option value=\"email\">E-Mail</option>\n                    <option value=\"address.city\">Stadt</option>\n                  </select>\n                </div>\n                <div className=\"col-md-3\">\n                  <button\n                    className=\"btn btn-outline-secondary w-100\"\n                    onClick={() => setSupplierSortDirection(supplierSortDirection === 'asc' ? 'desc' : 'asc')}\n                    style={{\n                      borderColor: colors.cardBorder,\n                      color: colors.text\n                    }}\n                  >\n                    <FaSort className=\"me-1\" />\n                    {supplierSortDirection === 'asc' ? 'Aufsteigend' : 'Absteigend'}\n                  </button>\n                </div>\n                <div className=\"col-md-6 text-end\">\n                  <span style={{ color: colors.text }}>\n                    {filteredSuppliers.length} Lieferant{filteredSuppliers.length !== 1 ? 'en' : ''} gefunden\n                  </span>\n                </div>\n              </div>\n\n              {/* Bulk-Aktionen */}\n              {selectedSuppliers.length > 0 && (\n                <div className=\"alert alert-warning mb-3\" style={{\n                  backgroundColor: colors.secondary,\n                  borderColor: colors.cardBorder,\n                  color: colors.text\n                }}>\n                  <div className=\"d-flex justify-content-between align-items-center\">\n                    <span>{selectedSuppliers.length} Lieferant{selectedSuppliers.length !== 1 ? 'en' : ''} ausgewählt</span>\n                    <button\n                      className=\"btn btn-danger btn-sm\"\n                      onClick={handleDeleteSuppliers}\n                    >\n                      <FaTrash className=\"me-1\" />\n                      Löschen\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Lieferanten-Liste */}\n              {supplierViewMode === 'list' ? (\n                <div className=\"table-responsive\">\n                  <table className=\"table table-hover\" style={{\n                    backgroundColor: colors.card,\n                    borderColor: colors.cardBorder\n                  }}>\n                    <thead style={{ backgroundColor: colors.secondary }}>\n                      <tr>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>\n                          <input\n                            type=\"checkbox\"\n                            checked={selectedSuppliers.length === filteredSuppliers.length && filteredSuppliers.length > 0}\n                            onChange={handleSelectAllSuppliers}\n                            style={{ accentColor: colors.accent }}\n                          />\n                        </th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Name</th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Kontaktperson</th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>E-Mail</th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Telefon</th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Stadt</th>\n                        <th style={{ borderColor: colors.cardBorder, color: colors.text }}>Aktionen</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {filteredSuppliers.map(supplier => (\n                        <tr \n                          key={supplier.id}\n                          onDoubleClick={() => handleEditSupplier(supplier)}\n                          style={{ \n                            borderColor: colors.cardBorder,\n                            cursor: 'pointer',\n                            backgroundColor: selectedSuppliers.includes(supplier.id) ? colors.accent + '20' : 'transparent'\n                          }}\n                        >\n                          <td style={{ borderColor: colors.cardBorder }}>\n                            <input\n                              type=\"checkbox\"\n                              checked={selectedSuppliers.includes(supplier.id)}\n                              onChange={() => handleSelectSupplier(supplier.id)}\n                              style={{ accentColor: colors.accent }}\n                            />\n                          </td>\n                          <td style={{ borderColor: colors.cardBorder, fontWeight: 'bold' }}>{supplier.name}</td>\n                          <td style={{ borderColor: colors.cardBorder }}>{supplier.contactPerson}</td>\n                          <td style={{ borderColor: colors.cardBorder }}>{supplier.email}</td>\n                          <td style={{ borderColor: colors.cardBorder }}>\n                            {supplier.phoneNumbers.length > 0 ? supplier.phoneNumbers[0].number : '-'}\n                            {supplier.phoneNumbers.length > 1 && (\n                              <span style={{ color: colors.accent }}> (+{supplier.phoneNumbers.length - 1})</span>\n                            )}\n                          </td>\n                          <td style={{ borderColor: colors.cardBorder }}>{supplier.address.city}</td>\n                          <td style={{ borderColor: colors.cardBorder }}>\n                            <div className=\"d-flex gap-1\">\n                              <button\n                                className=\"btn btn-link p-0\"\n                                title=\"Bearbeiten\"\n                                style={{\n                                  color: colors.accent,\n                                  textDecoration: 'none',\n                                  fontSize: '12px'\n                                }}\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  handleEditSupplier(supplier);\n                                }}\n                              >\n                                <FaPencilAlt />\n                              </button>\n                              <button\n                                className=\"btn btn-link p-0\"\n                                title=\"Löschen\"\n                                style={{\n                                  color: '#dc3545',\n                                  textDecoration: 'none',\n                                  fontSize: '12px'\n                                }}\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  handleDeleteSingleSupplier(supplier.id, supplier.name);\n                                }}\n                              >\n                                <FaClose />\n                              </button>\n                            </div>\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n                </div>\n              ) : (\n                /* Lieferanten-Kacheln */\n                <div className=\"row\">\n                  {filteredSuppliers.map(supplier => (\n                    <div key={supplier.id} className=\"col-md-4 col-lg-3 mb-3\">\n                      <div \n                        className=\"card h-100\"\n                        onDoubleClick={() => handleEditSupplier(supplier)}\n                        style={{\n                          backgroundColor: colors.card,\n                          borderColor: colors.cardBorder,\n                          boxShadow: '0 2px 8px rgba(0,0,0,0.08)',\n                          cursor: 'pointer'\n                        }}\n                        title=\"Doppelklick zum Bearbeiten\"\n                      >\n                        <div className=\"card-body\">\n                          <div className=\"d-flex justify-content-between align-items-start mb-2\">\n                            <input\n                              type=\"checkbox\"\n                              checked={selectedSuppliers.includes(supplier.id)}\n                              onChange={() => handleSelectSupplier(supplier.id)}\n                              style={{ accentColor: colors.accent }}\n                            />\n                            <div className=\"d-flex gap-1\">\n                              <button\n                                className=\"btn btn-link p-0\"\n                                title=\"Bearbeiten\"\n                                style={{\n                                  color: colors.accent,\n                                  textDecoration: 'none',\n                                  fontSize: '12px'\n                                }}\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  handleEditSupplier(supplier);\n                                }}\n                              >\n                                <FaPencilAlt />\n                              </button>\n                              <button\n                                className=\"btn btn-link p-0\"\n                                title=\"Löschen\"\n                                style={{\n                                  color: '#dc3545',\n                                  textDecoration: 'none',\n                                  fontSize: '12px'\n                                }}\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  handleDeleteSingleSupplier(supplier.id, supplier.name);\n                                }}\n                              >\n                                <FaClose />\n                              </button>\n                            </div>\n                          </div>\n                          <h6 className=\"card-title\" style={{ color: colors.text, fontWeight: 'bold' }}>\n                            {supplier.name}\n                          </h6>\n                          <p className=\"card-text mb-1\" style={{ color: colors.text, fontSize: '0.9rem' }}>\n                            <strong>Kontakt:</strong> {supplier.contactPerson}\n                          </p>\n                          <p className=\"card-text mb-1\" style={{ color: colors.text, fontSize: '0.9rem' }}>\n                            <strong>E-Mail:</strong> {supplier.email}\n                          </p>\n                          <p className=\"card-text mb-1\" style={{ color: colors.text, fontSize: '0.9rem' }}>\n                            <strong>Telefon:</strong> {supplier.phoneNumbers.length > 0 ? supplier.phoneNumbers[0].number : '-'}\n                            {supplier.phoneNumbers.length > 1 && (\n                              <span style={{ color: colors.accent }}> (+{supplier.phoneNumbers.length - 1})</span>\n                            )}\n                          </p>\n                          <p className=\"card-text mb-2\" style={{ color: colors.text, fontSize: '0.9rem' }}>\n                            <strong>Stadt:</strong> {supplier.address.city}\n                          </p>\n                          {supplier.notes && (\n                            <p className=\"card-text\" style={{ color: colors.text, fontSize: '0.8rem', fontStyle: 'italic' }}>\n                              {supplier.notes}\n                            </p>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n\n              {/* Leere Liste */}\n              {filteredSuppliers.length === 0 && (\n                <div className=\"text-center py-5\">\n                  <FaUsers style={{ fontSize: '3rem', color: colors.accent, marginBottom: '1rem' }} />\n                  <h5 style={{ color: colors.text }}>Keine Lieferanten gefunden</h5>\n                  <p style={{ color: colors.text }}>\n                    {supplierSearchTerm \n                      ? 'Versuchen Sie andere Suchkriterien.'\n                      : 'Erstellen Sie Ihren ersten Lieferanten mit dem \"Neuer Lieferant\" Button.'\n                    }\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n        );\n      case 'rezepte':\n        return (\n          <div className=\"container-fluid p-4\">\n            <div style={{\n              backgroundColor: colors.paper || colors.card,\n              borderRadius: '12px',\n              boxShadow: colors.paperShadow || '0 4px 12px rgba(0,0,0,0.1)',\n              padding: '2rem',\n              minHeight: 'calc(100vh - 120px)',\n              border: `1px solid ${colors.cardBorder}`\n            }}>\n              <h1 style={{ color: colors.text }}>Rezeptverwaltung</h1>\n              <p style={{ color: colors.text }}>Hier können später Rezepte verwaltet werden.</p>\n            </div>\n          </div>\n        );\n      case 'einkauf':\n        return (\n          <div className=\"container-fluid p-4\">\n            <div style={{\n              backgroundColor: colors.paper || colors.card,\n              borderRadius: '12px',\n              boxShadow: colors.paperShadow || '0 4px 12px rgba(0,0,0,0.1)',\n              padding: '2rem',\n              minHeight: 'calc(100vh - 120px)',\n              border: `1px solid ${colors.cardBorder}`\n            }}>\n              <h1 style={{ color: colors.text }}>Einkauf</h1>\n              <p style={{ color: colors.text }}>Hier können später Einkaufsfunktionen genutzt werden.</p>\n            </div>\n          </div>\n        );\n      case 'inventur':\n        return (\n          <div className=\"container-fluid p-4\">\n            <div style={{\n              backgroundColor: colors.paper || colors.card,\n              borderRadius: '12px',\n              boxShadow: colors.paperShadow || '0 4px 12px rgba(0,0,0,0.1)',\n              padding: '2rem',\n              minHeight: 'calc(100vh - 120px)',\n              border: `1px solid ${colors.cardBorder}`\n            }}>\n              <h1 style={{ color: colors.text }}>Inventur</h1>\n              <p style={{ color: colors.text }}>Hier können später Inventurfunktionen genutzt werden.</p>\n            </div>\n          </div>\n        );\n      default:\n        return null;\n    }\n  };\n\n  const colors = getCurrentColors();\n\n  return (\n    <div style={{ backgroundColor: colors.background, minHeight: '100vh' }}>\n      <style>\n        {`\n          .sidebar-icon {\n            display: block !important;\n            visibility: visible !important;\n            opacity: 1 !important;\n            font-size: 18px !important;\n            font-weight: bold !important;\n          }\n          .sidebar-button {\n            display: flex !important;\n            align-items: center !important;\n            justify-content: flex-start !important;\n            min-height: 48px !important;\n            width: 100% !important;\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          .sidebar-button span {\n            display: block !important;\n            visibility: visible !important;\n            opacity: 1 !important;\n          }\n          .nav-link {\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          .btn-link {\n            margin: 0 !important;\n            padding: 0 !important;\n          }\n          .sidebar-sub-button {\n            display: flex !important;\n            align-items: center !important;\n            justify-content: flex-start !important;\n            width: 100% !important;\n            margin: 0 !important;\n            padding: 0 !important;\n            border: none !important;\n            background: none !important;\n            color: inherit !important;\n            text-decoration: none !important;\n          }\n        `}\n      </style>\n      \n      {/* Header */}\n      <nav className=\"navbar navbar-dark fixed-top\" style={{ \n        backgroundColor: colors.primary,\n        boxShadow: '0 2px 8px rgba(0,0,0,0.1)',\n        zIndex: 1030\n      }}>\n        <button \n          onClick={toggleSidebar}\n          style={{ \n            color: 'white',\n            background: 'none',\n            border: 'none',\n            fontSize: '24px',\n            cursor: 'pointer',\n            padding: '8px',\n            borderRadius: '4px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            minWidth: '40px',\n            minHeight: '40px'\n          }}\n        >\n                      <FaBars />\n        </button>\n                  <span className=\"navbar-brand mx-auto d-flex align-items-center\">\n            <FaUtensils className=\"me-2\" style={{ fontSize: '20px' }} />\n            The Chef's Numbers\n          </span>\n        <button \n          onClick={() => setShowDesignSelector(!showDesignSelector)}\n          title=\"Design ändern\"\n          style={{ \n            color: 'white',\n            background: 'none',\n            border: 'none',\n            fontSize: '20px',\n            cursor: 'pointer',\n            padding: '8px',\n            borderRadius: '4px',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center',\n            minWidth: '40px',\n            minHeight: '40px'\n          }}\n        >\n          <FaPalette />\n        </button>\n      </nav>\n\n      {/* Design Selector */}\n      {showDesignSelector && (\n        <div className=\"position-fixed top-0 start-0 w-100 h-100\" style={{ \n          background: 'rgba(0,0,0,0.5)', \n          zIndex: 3000,\n          top: 56\n        }}>\n          <div className=\"container mt-4\">\n            <div className=\"row justify-content-center\">\n              <div className=\"col-md-8\">\n                <div className=\"card\" style={{ backgroundColor: colors.card }}>\n                  <div className=\"card-header\" style={{ backgroundColor: colors.secondary }}>\n                    <h5 className=\"mb-0\" style={{ color: colors.text }}>Design auswählen</h5>\n                  </div>\n                  <div className=\"card-body\">\n                    <div className=\"row\">\n                      {Object.entries(designTemplates).map(([key, template]) => (\n                        <div key={key} className=\"col-md-6 mb-3\">\n                          <div \n                            className=\"card cursor-pointer\" \n                            style={{ \n                              backgroundColor: template.colors.card,\n                              border: currentDesign === key ? `3px solid ${template.colors.accent}` : `1px solid ${template.colors.cardBorder}`,\n                              cursor: 'pointer'\n                            }}\n                            onClick={() => {\n                              setCurrentDesign(key);\n                              setShowDesignSelector(false);\n                            }}\n                          >\n                            <div className=\"card-body\">\n                              <h6 className=\"card-title\" style={{ color: template.colors.text }}>\n                                {template.name}\n                              </h6>\n                              <p className=\"card-text small\" style={{ color: template.colors.text }}>\n                                {template.description}\n                              </p>\n                              <div className=\"d-flex gap-2\">\n                                <div style={{ \n                                  width: 20, \n                                  height: 20, \n                                  backgroundColor: template.colors.primary, \n                                  borderRadius: '50%' \n                                }}></div>\n                                <div style={{ \n                                  width: 20, \n                                  height: 20, \n                                  backgroundColor: template.colors.accent, \n                                  borderRadius: '50%' \n                                }}></div>\n                                <div style={{ \n                                  width: 20, \n                                  height: 20, \n                                  backgroundColor: template.colors.secondary, \n                                  borderRadius: '50%' \n                                }}></div>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      ))}\n                    </div>\n                    <div className=\"text-center mt-3\">\n                      <button \n                        className=\"btn btn-secondary\" \n                        onClick={() => setShowDesignSelector(false)}\n                      >\n                        Schließen\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n                        )}\n\n                  {/* Artikelformular Modal */}\n                  {showArticleForm && (\n                    <div className=\"position-fixed top-0 start-0 w-100 h-100\" style={{\n                      background: 'rgba(0,0,0,0.5)',\n                      zIndex: 3000,\n                      top: 56\n                    }}>\n                      <div className=\"container-fluid h-100 p-4\">\n                        <div className=\"row justify-content-center h-100\">\n                          <div className=\"col-12 col-xl-6\">\n                            <div className=\"card\" style={{ backgroundColor: colors.card, maxHeight: 'calc(100vh - 120px)' }}>\n                              <div className=\"card-header d-flex justify-content-between align-items-center\" style={{ backgroundColor: colors.secondary }}>\n                                <h5 className=\"mb-0\" style={{ color: colors.text }}>\n                                  {editingArticle ? 'Artikel bearbeiten' : 'Neuer Artikel'}\n                                </h5>\n                                <button\n                                  className=\"btn btn-link p-0\"\n                                  onClick={() => {\n                                    setShowArticleForm(false);\n                                    resetArticleForm();\n                                  }}\n                                  style={{ color: colors.text, textDecoration: 'none' }}\n                                >\n                                  <FaClose />\n                                </button>\n                              </div>\n                              <div className=\"card-body\" style={{ \n                                overflowY: 'auto', \n                                maxHeight: 'calc(100vh - 180px)',\n                                paddingBottom: '0',\n                                borderBottom: 'none'\n                              }}>\n                                <form>\n                                  {/* Grunddaten */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Grunddaten\n                                      </h6>\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Artikelname *\n                                      </label>\n                                      <input\n                                        ref={articleNameInputRef}\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={articleForm.name}\n                                        onChange={(e) => setArticleForm(prev => ({ ...prev, name: e.target.value }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                        required\n                                      />\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Kategorie\n                                      </label>\n                                      <div className=\"position-relative\">\n                                        <input\n                                          type=\"text\"\n                                          className=\"form-control\"\n                                          value={articleForm.category}\n                                          onChange={(e) => handleCategoryInputChange(e.target.value)}\n                                          onFocus={() => setShowCategoryDropdown(true)}\n                                          onBlur={handleCategoryInputBlur}\n                                          onKeyDown={handleCategoryKeyDown}\n                                          placeholder=\"Kategorie auswählen oder eingeben...\"\n                                          style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                        />\n                                        {showCategoryDropdown && (\n                                          <div className=\"position-absolute w-100\" style={{\n                                            top: '100%',\n                                            left: 0,\n                                            zIndex: 1000,\n                                            maxHeight: '200px',\n                                            overflowY: 'auto',\n                                            backgroundColor: colors.card,\n                                            border: `1px solid ${colors.cardBorder}`,\n                                            borderRadius: '0 0 0.375rem 0.375rem',\n                                            boxShadow: '0 4px 12px rgba(0,0,0,0.15)'\n                                          }}>\n                                            {getFilteredCategories().length > 0 ? (\n                                              getFilteredCategories().map((category, index) => (\n                                                <div\n                                                  key={category}\n                                                  className=\"px-3 py-2 cursor-pointer\"\n                                                  onClick={() => handleCategorySelect(category)}\n                                                  style={{\n                                                    color: colors.text,\n                                                    borderBottom: `1px solid ${colors.cardBorder}`,\n                                                    cursor: 'pointer',\n                                                    backgroundColor: selectedCategoryIndex === index ? colors.accent + '20' : 'transparent'\n                                                  }}\n                                                  onMouseEnter={(e) => {\n                                                    if (selectedCategoryIndex !== index) {\n                                                      e.currentTarget.style.backgroundColor = colors.secondary;\n                                                    }\n                                                    setSelectedCategoryIndex(index);\n                                                  }}\n                                                  onMouseLeave={(e) => {\n                                                    if (selectedCategoryIndex !== index) {\n                                                      e.currentTarget.style.backgroundColor = 'transparent';\n                                                    }\n                                                  }}\n                                                >\n                                                  {category}\n                                                </div>\n                                              ))\n                                            ) : (\n                                              <div className=\"px-3 py-2\" style={{ color: colors.text, fontStyle: 'italic' }}>\n                                                Keine Kategorie gefunden\n                                              </div>\n                                            )}\n                                            {categorySearchTerm && !CATEGORIES.includes(categorySearchTerm) && (\n                                              <div\n                                                className=\"px-3 py-2 cursor-pointer\"\n                                                onClick={() => handleCategorySelect(categorySearchTerm)}\n                                                style={{\n                                                  color: colors.accent,\n                                                  borderTop: `2px solid ${colors.accent}`,\n                                                  borderBottom: `1px solid ${colors.cardBorder}`,\n                                                  cursor: 'pointer',\n                                                  fontWeight: 'bold',\n                                                  backgroundColor: selectedCategoryIndex === getFilteredCategories().length ? colors.accent + '20' : 'transparent'\n                                                }}\n                                                onMouseEnter={(e) => {\n                                                  if (selectedCategoryIndex !== getFilteredCategories().length) {\n                                                    e.currentTarget.style.backgroundColor = colors.secondary;\n                                                  }\n                                                  setSelectedCategoryIndex(getFilteredCategories().length);\n                                                }}\n                                                onMouseLeave={(e) => {\n                                                  if (selectedCategoryIndex !== getFilteredCategories().length) {\n                                                    e.currentTarget.style.backgroundColor = 'transparent';\n                                                  }\n                                                }}\n                                              >\n                                                \"{categorySearchTerm}\" als neue Kategorie hinzufügen\n                                              </div>\n                                            )}\n                                          </div>\n                                        )}\n                                      </div>\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Lieferant\n                                      </label>\n                                      <div className=\"position-relative\">\n                                        <input\n                                          type=\"text\"\n                                          className=\"form-control\"\n                                          value={articleForm.supplierId ? getSupplierName(articleForm.supplierId) : ''}\n                                          onChange={(e) => handleSupplierInputChange(e.target.value)}\n                                          onFocus={() => setShowSupplierDropdown(true)}\n                                          onBlur={handleSupplierInputBlur}\n                                          onKeyDown={handleSupplierKeyDown}\n                                          placeholder=\"Lieferant auswählen oder eingeben...\"\n                                          style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                        />\n                                        {showSupplierDropdown && (\n                                          <div className=\"position-absolute w-100\" style={{\n                                            top: '100%',\n                                            left: 0,\n                                            zIndex: 1000,\n                                            maxHeight: '200px',\n                                            overflowY: 'auto',\n                                            backgroundColor: colors.card,\n                                            border: `1px solid ${colors.cardBorder}`,\n                                            borderRadius: '0 0 0.375rem 0.375rem',\n                                            boxShadow: '0 4px 12px rgba(0,0,0,0.15)'\n                                          }}>\n                                            {getFilteredSuppliers().length > 0 ? (\n                                              getFilteredSuppliers().map((supplier, index) => (\n                                                <div\n                                                  key={supplier.id}\n                                                  className=\"px-3 py-2 cursor-pointer\"\n                                                  onClick={() => handleSupplierSelect(supplier)}\n                                                  style={{\n                                                    color: colors.text,\n                                                    borderBottom: `1px solid ${colors.cardBorder}`,\n                                                    cursor: 'pointer',\n                                                    backgroundColor: selectedSupplierIndex === index ? colors.accent + '20' : 'transparent'\n                                                  }}\n                                                  onMouseEnter={(e) => {\n                                                    if (selectedSupplierIndex !== index) {\n                                                      e.currentTarget.style.backgroundColor = colors.secondary;\n                                                    }\n                                                    setSelectedSupplierIndex(index);\n                                                  }}\n                                                  onMouseLeave={(e) => {\n                                                    if (selectedSupplierIndex !== index) {\n                                                      e.currentTarget.style.backgroundColor = 'transparent';\n                                                    }\n                                                  }}\n                                                >\n                                                  <div style={{ fontWeight: 'bold' }}>{supplier.name}</div>\n                                                  <small style={{ color: colors.accent }}>{supplier.contactPerson}</small>\n                                                </div>\n                                              ))\n                                            ) : (\n                                              <div className=\"px-3 py-2\" style={{ color: colors.text, fontStyle: 'italic' }}>\n                                                Kein Lieferant gefunden\n                                              </div>\n                                            )}\n                                            {supplierSearchTerm && !suppliers.some(s => s.name.toLowerCase() === supplierSearchTerm.toLowerCase()) && (\n                                              <div\n                                                className=\"px-3 py-2 cursor-pointer\"\n                                                onClick={() => handleNewSupplier()}\n                                                style={{\n                                                  color: colors.accent,\n                                                  borderTop: `2px solid ${colors.accent}`,\n                                                  borderBottom: `1px solid ${colors.cardBorder}`,\n                                                  cursor: 'pointer',\n                                                  fontWeight: 'bold',\n                                                  backgroundColor: selectedSupplierIndex === getFilteredSuppliers().length ? colors.accent + '20' : 'transparent'\n                                                }}\n                                                onMouseEnter={(e) => {\n                                                  if (selectedSupplierIndex !== getFilteredSuppliers().length) {\n                                                    e.currentTarget.style.backgroundColor = colors.secondary;\n                                                  }\n                                                  setSelectedSupplierIndex(getFilteredSuppliers().length);\n                                                }}\n                                                onMouseLeave={(e) => {\n                                                  if (selectedSupplierIndex !== getFilteredSuppliers().length) {\n                                                    e.currentTarget.style.backgroundColor = 'transparent';\n                                                  }\n                                                }}\n                                              >\n                                                \"{supplierSearchTerm}\" als neuen Lieferanten anlegen\n                                              </div>\n                                            )}\n                                          </div>\n                                        )}\n                                      </div>\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Lieferanten-Artikelnummer\n                                      </label>\n                                      <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={articleForm.supplierArticleNumber}\n                                        onChange={(e) => setArticleForm(prev => ({ ...prev, supplierArticleNumber: e.target.value }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                  </div>\n\n                                  {/* Preise und Einheiten */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Preise und Einheiten\n                                      </h6>\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Gebindeeinheit\n                                      </label>\n                                      <div className=\"position-relative\">\n                                        <input\n                                          type=\"text\"\n                                          className=\"form-control\"\n                                          value={articleForm.bundleUnit}\n                                          onChange={(e) => handleBundleUnitInputChange(e.target.value)}\n                                          onFocus={() => setShowBundleUnitDropdown(true)}\n                                          onBlur={handleBundleUnitInputBlur}\n                                          onKeyDown={handleBundleUnitKeyDown}\n                                          placeholder=\"Einheit auswählen oder eingeben...\"\n                                          style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                        />\n                                        {showBundleUnitDropdown && (\n                                          <div className=\"position-absolute w-100\" style={{\n                                            top: '100%',\n                                            left: 0,\n                                            zIndex: 1000,\n                                            maxHeight: '200px',\n                                            overflowY: 'auto',\n                                            backgroundColor: colors.card,\n                                            border: `1px solid ${colors.cardBorder}`,\n                                            borderRadius: '0 0 0.375rem 0.375rem',\n                                            boxShadow: '0 4px 12px rgba(0,0,0,0.15)'\n                                          }}>\n                                            {getFilteredBundleUnits().length > 0 ? (\n                                              getFilteredBundleUnits().map((unit, index) => (\n                                                <div\n                                                  key={unit}\n                                                  className=\"px-3 py-2 cursor-pointer\"\n                                                  onClick={() => handleBundleUnitSelect(unit)}\n                                                  style={{\n                                                    color: colors.text,\n                                                    borderBottom: `1px solid ${colors.cardBorder}`,\n                                                    cursor: 'pointer',\n                                                    backgroundColor: selectedBundleUnitIndex === index ? colors.accent + '20' : 'transparent'\n                                                  }}\n                                                  onMouseEnter={(e) => {\n                                                    if (selectedBundleUnitIndex !== index) {\n                                                      e.currentTarget.style.backgroundColor = colors.secondary;\n                                                    }\n                                                    setSelectedBundleUnitIndex(index);\n                                                  }}\n                                                  onMouseLeave={(e) => {\n                                                    if (selectedBundleUnitIndex !== index) {\n                                                      e.currentTarget.style.backgroundColor = 'transparent';\n                                                    }\n                                                  }}\n                                                >\n                                                  {unit}\n                                                </div>\n                                              ))\n                                            ) : (\n                                              <div className=\"px-3 py-2\" style={{ color: colors.text, fontStyle: 'italic' }}>\n                                                Keine Einheit gefunden\n                                              </div>\n                                            )}\n                                            {bundleUnitSearchTerm && !UNITS.includes(bundleUnitSearchTerm) && (\n                                              <div\n                                                className=\"px-3 py-2 cursor-pointer\"\n                                                onClick={() => handleBundleUnitSelect(bundleUnitSearchTerm)}\n                                                style={{\n                                                  color: colors.accent,\n                                                  borderTop: `2px solid ${colors.accent}`,\n                                                  borderBottom: `1px solid ${colors.cardBorder}`,\n                                                  cursor: 'pointer',\n                                                  fontWeight: 'bold',\n                                                  backgroundColor: selectedBundleUnitIndex === getFilteredBundleUnits().length ? colors.accent + '20' : 'transparent'\n                                                }}\n                                                onMouseEnter={(e) => {\n                                                  if (selectedBundleUnitIndex !== getFilteredBundleUnits().length) {\n                                                    e.currentTarget.style.backgroundColor = colors.secondary;\n                                                  }\n                                                  setSelectedBundleUnitIndex(getFilteredBundleUnits().length);\n                                                }}\n                                                onMouseLeave={(e) => {\n                                                  if (selectedBundleUnitIndex !== getFilteredBundleUnits().length) {\n                                                    e.currentTarget.style.backgroundColor = 'transparent';\n                                                  }\n                                                }}\n                                              >\n                                                \"{bundleUnitSearchTerm}\" hinzufügen\n                                              </div>\n                                            )}\n                                          </div>\n                                        )}\n                                      </div>\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Gebindepreis *\n                                      </label>\n                                      <div className=\"input-group\">\n                                        <input\n                                          type=\"number\"\n                                          step=\"0.01\"\n                                          className=\"form-control\"\n                                          value={bundlePriceInput || articleForm.bundlePrice}\n                                          onChange={(e) => {\n                                            const value = parseFloat(e.target.value.replace(',', '.')) || 0;\n                                            setBundlePriceInput(e.target.value);\n                                            setArticleForm(prev => ({ ...prev, bundlePrice: value }));\n                                            // Sofortige Berechnung bei Pfeiltasten\n                                            setArticleForm(prev => ({ \n                                              ...prev, \n                                              pricePerUnit: calculatePricePerUnit(value, prev.content, prev.isGrossPrice)\n                                            }));\n                                          }}\n                                          onFocus={(e) => {\n                                            e.target.select();\n                                            setBundlePriceInput(articleForm.bundlePrice.toString());\n                                          }}\n                                          onBlur={(e) => {\n                                            const value = parseFloat(e.target.value.replace(',', '.')) || 0;\n                                            setBundlePriceInput('');\n                                            setArticleForm(prev => ({ \n                                              ...prev, \n                                              bundlePrice: value,\n                                              pricePerUnit: calculatePricePerUnit(value, prev.content, prev.isGrossPrice)\n                                            }));\n                                          }}\n                                          style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                          required\n                                        />\n\n                                        <span className=\"input-group-text\" style={{ backgroundColor: colors.secondary, borderColor: colors.cardBorder, color: colors.text }}>\n                                          <FaEuroSign />\n                                        </span>\n                                        <button\n                                          type=\"button\"\n                                          className=\"btn btn-outline-secondary\"\n                                          onClick={() => setShowPriceConverter(true)}\n                                          style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                          title=\"Preis umrechnen\"\n                                        >\n                                          <FaCalculator />\n                                        </button>\n                                      </div>\n                                    </div>\n                                    <div className=\"col-md-4 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Inhalt *\n                                      </label>\n                                                                                                                    <input\n                                        type=\"number\"\n                                        step=\"0.01\"\n                                        className=\"form-control\"\n                                        value={contentInput || articleForm.content}\n                                        onChange={(e) => {\n                                          const value = parseFloat(e.target.value.replace(',', '.')) || 0;\n                                          setContentInput(e.target.value);\n                                          setArticleForm(prev => ({ ...prev, content: value }));\n                                          // Sofortige Berechnung bei Pfeiltasten\n                                          setArticleForm(prev => ({ \n                                            ...prev, \n                                            pricePerUnit: calculatePricePerUnit(prev.bundlePrice, value, prev.isGrossPrice)\n                                          }));\n                                        }}\n                                        onFocus={(e) => {\n                                          e.target.select();\n                                          setContentInput(articleForm.content.toString());\n                                        }}\n                                        onBlur={(e) => {\n                                          const value = parseFloat(e.target.value.replace(',', '.')) || 0;\n                                          setContentInput('');\n                                          setArticleForm(prev => ({ \n                                            ...prev, \n                                            content: value,\n                                            pricePerUnit: calculatePricePerUnit(prev.bundlePrice, value, prev.isGrossPrice)\n                                          }));\n                                        }}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                        required\n                                      />\n                                    </div>\n                                    <div className=\"col-md-4 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Inhaltseinheit\n                                      </label>\n                                      <div className=\"position-relative\">\n                                        <input\n                                          type=\"text\"\n                                          className=\"form-control\"\n                                          value={articleForm.contentUnit}\n                                          onChange={(e) => handleContentUnitInputChange(e.target.value)}\n                                          onFocus={() => setShowContentUnitDropdown(true)}\n                                          onBlur={handleContentUnitInputBlur}\n                                          onKeyDown={handleContentUnitKeyDown}\n                                          placeholder=\"Einheit auswählen oder eingeben...\"\n                                          style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                        />\n                                        {showContentUnitDropdown && (\n                                          <div className=\"position-absolute w-100\" style={{\n                                            top: '100%',\n                                            left: 0,\n                                            zIndex: 1000,\n                                            maxHeight: '200px',\n                                            overflowY: 'auto',\n                                            backgroundColor: colors.card,\n                                            border: `1px solid ${colors.cardBorder}`,\n                                            borderRadius: '0 0 0.375rem 0.375rem',\n                                            boxShadow: '0 4px 12px rgba(0,0,0,0.15)'\n                                          }}>\n                                            {getFilteredContentUnits().length > 0 ? (\n                                              getFilteredContentUnits().map((unit, index) => (\n                                                <div\n                                                  key={unit}\n                                                  className=\"px-3 py-2 cursor-pointer\"\n                                                  onClick={() => handleContentUnitSelect(unit)}\n                                                  style={{\n                                                    color: colors.text,\n                                                    borderBottom: `1px solid ${colors.cardBorder}`,\n                                                    cursor: 'pointer',\n                                                    backgroundColor: selectedContentUnitIndex === index ? colors.accent + '20' : 'transparent'\n                                                  }}\n                                                  onMouseEnter={(e) => {\n                                                    if (selectedContentUnitIndex !== index) {\n                                                      e.currentTarget.style.backgroundColor = colors.secondary;\n                                                    }\n                                                    setSelectedContentUnitIndex(index);\n                                                  }}\n                                                  onMouseLeave={(e) => {\n                                                    if (selectedContentUnitIndex !== index) {\n                                                      e.currentTarget.style.backgroundColor = 'transparent';\n                                                    }\n                                                  }}\n                                                >\n                                                  {unit}\n                                                </div>\n                                              ))\n                                            ) : (\n                                              <div className=\"px-3 py-2\" style={{ color: colors.text, fontStyle: 'italic' }}>\n                                                Keine Einheit gefunden\n                                              </div>\n                                            )}\n                                            {contentUnitSearchTerm && !UNITS.includes(contentUnitSearchTerm) && (\n                                              <div\n                                                className=\"px-3 py-2 cursor-pointer\"\n                                                onClick={() => handleContentUnitSelect(contentUnitSearchTerm)}\n                                                style={{\n                                                  color: colors.accent,\n                                                  borderTop: `2px solid ${colors.accent}`,\n                                                  borderBottom: `1px solid ${colors.cardBorder}`,\n                                                  cursor: 'pointer',\n                                                  fontWeight: 'bold',\n                                                  backgroundColor: selectedContentUnitIndex === getFilteredContentUnits().length ? colors.accent + '20' : 'transparent'\n                                                }}\n                                                onMouseEnter={(e) => {\n                                                  if (selectedContentUnitIndex !== getFilteredContentUnits().length) {\n                                                    e.currentTarget.style.backgroundColor = colors.secondary;\n                                                  }\n                                                  setSelectedContentUnitIndex(getFilteredContentUnits().length);\n                                                }}\n                                                onMouseLeave={(e) => {\n                                                  if (selectedContentUnitIndex !== getFilteredContentUnits().length) {\n                                                    e.currentTarget.style.backgroundColor = 'transparent';\n                                                  }\n                                                }}\n                                              >\n                                                \"{contentUnitSearchTerm}\" hinzufügen\n                                              </div>\n                                            )}\n                                          </div>\n                                        )}\n                                      </div>\n                                    </div>\n                                    <div className=\"col-md-4 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Preis pro Einheit\n                                      </label>\n                                      <div className=\"input-group\">\n                                        <input\n                                          type=\"number\"\n                                          step=\"0.01\"\n                                          className=\"form-control\"\n                                          value={articleForm.pricePerUnit.toFixed(2)}\n                                          readOnly\n                                          style={{ \n                                            borderColor: colors.cardBorder, \n                                            color: colors.text,\n                                            backgroundColor: colors.secondary\n                                          }}\n                                        />\n                                        <span className=\"input-group-text\" style={{ backgroundColor: colors.secondary, borderColor: colors.cardBorder, color: colors.text }}>\n                                          €/{articleForm.contentUnit || 'Einheit'}\n                                        </span>\n                                      </div>\n                                    </div>\n                                  </div>\n\n                                  {/* Inhaltsstoffe und Allergene */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Inhaltsstoffe und Allergene\n                                      </h6>\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Inhaltsstoffe\n                                      </label>\n                                      <div className=\"position-relative ingredients-dropdown-container\">\n                                        <div\n                                          className=\"form-control\"\n                                          onClick={handleIngredientsDropdownToggle}\n                                          style={{ \n                                            borderColor: colors.cardBorder, \n                                            color: colors.text,\n                                            cursor: 'pointer',\n                                            minHeight: '38px',\n                                            display: 'flex',\n                                            alignItems: 'center'\n                                          }}\n                                        >\n                                          <span style={{ \n                                            fontSize: '0.9rem',\n                                            color: articleForm.ingredients.length > 0 ? colors.text : colors.text + '80'\n                                          }}>\n                                            {formatIngredientsDisplay(articleForm.ingredients)}\n                                          </span>\n                                          <span style={{ marginLeft: 'auto', color: colors.text + '60' }}>\n                                            {showIngredientsDropdown ? '▲' : '▼'}\n                                          </span>\n                                        </div>\n                                        {showIngredientsDropdown && (\n                                          <div className=\"position-absolute w-100\" style={{\n                                            top: '100%',\n                                            left: 0,\n                                            zIndex: 1000,\n                                            maxHeight: '300px',\n                                            overflowY: 'auto',\n                                            backgroundColor: colors.card,\n                                            border: `1px solid ${colors.cardBorder}`,\n                                            borderRadius: '0 0 0.375rem 0.375rem',\n                                            boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n                                            padding: '0.5rem'\n                                          }}>\n                                            {INGREDIENTS.map(ingredient => (\n                                              <div key={ingredient} className=\"form-check\">\n                                                <input\n                                                  className=\"form-check-input\"\n                                                  type=\"checkbox\"\n                                                  id={`ingredient-${ingredient}`}\n                                                  checked={articleForm.ingredients.includes(ingredient)}\n                                                  onChange={() => handleIngredientToggle(ingredient)}\n                                                  style={{ accentColor: colors.accent }}\n                                                />\n                                                <label className=\"form-check-label\" htmlFor={`ingredient-${ingredient}`} style={{ color: colors.text, fontSize: '0.9rem' }}>\n                                                  {ingredient}\n                                                </label>\n                                              </div>\n                                            ))}\n                                          </div>\n                                        )}\n                                      </div>\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Allergene\n                                      </label>\n                                      <div className=\"position-relative allergens-dropdown-container\">\n                                        <div\n                                          className=\"form-control\"\n                                          onClick={handleAllergensDropdownToggle}\n                                          style={{ \n                                            borderColor: colors.cardBorder, \n                                            color: colors.text,\n                                            cursor: 'pointer',\n                                            minHeight: '38px',\n                                            display: 'flex',\n                                            alignItems: 'center'\n                                          }}\n                                        >\n                                          <span style={{ \n                                            fontSize: '0.9rem',\n                                            color: articleForm.allergens.length > 0 ? colors.text : colors.text + '80'\n                                          }}>\n                                            {formatAllergensDisplay(articleForm.allergens)}\n                                          </span>\n                                          <span style={{ marginLeft: 'auto', color: colors.text + '60' }}>\n                                            {showAllergensDropdown ? '▲' : '▼'}\n                                          </span>\n                                        </div>\n                                        {showAllergensDropdown && (\n                                          <div className=\"position-absolute w-100\" style={{\n                                            top: '100%',\n                                            left: 0,\n                                            zIndex: 1000,\n                                            maxHeight: '300px',\n                                            overflowY: 'auto',\n                                            backgroundColor: colors.card,\n                                            border: `1px solid ${colors.cardBorder}`,\n                                            borderRadius: '0 0 0.375rem 0.375rem',\n                                            boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n                                            padding: '0.5rem'\n                                          }}>\n                                            {ALLERGENS.map(allergen => (\n                                              <div key={allergen} className=\"form-check\">\n                                                <input\n                                                  className=\"form-check-input\"\n                                                  type=\"checkbox\"\n                                                  id={`allergen-${allergen}`}\n                                                  checked={articleForm.allergens.includes(allergen)}\n                                                  onChange={() => handleAllergenToggle(allergen)}\n                                                  style={{ accentColor: colors.accent }}\n                                                />\n                                                <label className=\"form-check-label\" htmlFor={`allergen-${allergen}`} style={{ color: colors.text, fontSize: '0.9rem' }}>\n                                                  {allergen}\n                                                </label>\n                                              </div>\n                                            ))}\n                                          </div>\n                                        )}\n                                      </div>\n                                    </div>\n                                  </div>\n\n                                  {/* Nährwertangaben */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Nährwertangaben (pro 100g/100ml)\n                                      </h6>\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Kalorien (kcal)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        step=\"0.1\"\n                                        className=\"form-control\"\n                                        value={articleForm.nutrition.calories}\n                                        onChange={(e) => setArticleForm(prev => ({\n                                          ...prev,\n                                          nutrition: { ...prev.nutrition, calories: parseFloat(e.target.value) || 0 }\n                                        }))}\n                                        onBlur={(e) => {\n                                          const calories = parseFloat(e.target.value) || 0;\n                                          setArticleForm(prev => ({\n                                            ...prev,\n                                            nutrition: { \n                                              ...prev.nutrition, \n                                              calories: calories,\n                                              kilojoules: calculateKilojoules(calories)\n                                            }\n                                          }));\n                                        }}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Kilojoule (kJ)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        step=\"0.1\"\n                                        className=\"form-control\"\n                                        value={articleForm.nutrition.kilojoules}\n                                        readOnly\n                                        style={{ \n                                          borderColor: colors.cardBorder, \n                                          color: colors.text,\n                                          backgroundColor: colors.card + '40'\n                                        }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Protein (g)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        step=\"0.1\"\n                                        className=\"form-control\"\n                                        value={articleForm.nutrition.protein}\n                                        onChange={(e) => setArticleForm(prev => ({\n                                          ...prev,\n                                          nutrition: { ...prev.nutrition, protein: parseFloat(e.target.value) || 0 }\n                                        }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Fett (g)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        step=\"0.1\"\n                                        className=\"form-control\"\n                                        value={articleForm.nutrition.fat}\n                                        onChange={(e) => setArticleForm(prev => ({\n                                          ...prev,\n                                          nutrition: { ...prev.nutrition, fat: parseFloat(e.target.value) || 0 }\n                                        }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Kohlenhydrate (g)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        step=\"0.1\"\n                                        className=\"form-control\"\n                                        value={articleForm.nutrition.carbohydrates}\n                                        onChange={(e) => setArticleForm(prev => ({\n                                          ...prev,\n                                          nutrition: { ...prev.nutrition, carbohydrates: parseFloat(e.target.value) || 0 }\n                                        }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Ballaststoffe (g)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        step=\"0.1\"\n                                        className=\"form-control\"\n                                        value={articleForm.nutrition.fiber}\n                                        onChange={(e) => setArticleForm(prev => ({\n                                          ...prev,\n                                          nutrition: { ...prev.nutrition, fiber: parseFloat(e.target.value) || 0 }\n                                        }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Zucker (g)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        step=\"0.1\"\n                                        className=\"form-control\"\n                                        value={articleForm.nutrition.sugar}\n                                        onChange={(e) => setArticleForm(prev => ({\n                                          ...prev,\n                                          nutrition: { ...prev.nutrition, sugar: parseFloat(e.target.value) || 0 }\n                                        }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Salz (g)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        step=\"0.01\"\n                                        className=\"form-control\"\n                                        value={articleForm.nutrition.salt}\n                                        onChange={(e) => setArticleForm(prev => ({\n                                          ...prev,\n                                          nutrition: { ...prev.nutrition, salt: parseFloat(e.target.value) || 0 }\n                                        }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                  </div>\n                                </form>\n                              </div>\n                              <div className=\"card-footer d-flex justify-content-between\" style={{ \n                                backgroundColor: colors.secondary,\n                                borderTop: 'none',\n                                position: 'sticky',\n                                bottom: 0,\n                                zIndex: 10\n                              }}>\n                                <button\n                                  className=\"btn btn-secondary\"\n                                  onClick={() => {\n                                    setShowArticleForm(false);\n                                    resetArticleForm();\n                                  }}\n                                  style={{ borderColor: colors.cardBorder }}\n                                >\n                                  <FaArrowLeft className=\"me-2\" />\n                                  Abbrechen\n                                </button>\n                                <button\n                                  className=\"btn btn-primary\"\n                                  onClick={handleSaveArticle}\n                                  disabled={!articleForm.name || !articleForm.bundlePrice || !articleForm.content}\n                                  style={{\n                                    backgroundColor: colors.accent,\n                                    borderColor: colors.accent\n                                  }}\n                                >\n                                  <FaSave className=\"me-2\" />\n                                  {editingArticle ? 'Aktualisieren' : 'Speichern'}\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Preisumrechnungs-Dialog */}\n                  {showPriceConverter && (\n                    <div className=\"position-fixed top-0 start-0 w-100 h-100\" style={{\n                      background: 'rgba(0,0,0,0.5)',\n                      zIndex: 3000,\n                      top: 56\n                    }}>\n                      <div className=\"container-fluid h-100 p-4\">\n                        <div className=\"row justify-content-center h-100\">\n                          <div className=\"col-12 col-md-6 col-lg-2\">\n                            <div className=\"card\" style={{ backgroundColor: colors.card }}>\n                              <div className=\"card-header d-flex justify-content-between align-items-center\" style={{ backgroundColor: colors.secondary }}>\n                                <h5 className=\"mb-0\" style={{ color: colors.text }}>\n                                  Preis umrechnen\n                                </h5>\n                                <button\n                                  className=\"btn btn-link p-0\"\n                                  onClick={() => setShowPriceConverter(false)}\n                                  style={{ color: colors.text, textDecoration: 'none' }}\n                                >\n                                  <FaClose />\n                                </button>\n                              </div>\n                              <div className=\"card-body\">\n                                <div className=\"mb-4\">\n                                  <label className=\"form-label\" style={{ color: colors.text }}>\n                                    Aktueller Gebindepreis\n                                  </label>\n                                  <div className=\"input-group\">\n                                                                          <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={articleForm.bundlePrice.toFixed(2)}\n                                        readOnly\n                                        style={{ borderColor: colors.cardBorder, color: colors.text, backgroundColor: colors.secondary }}\n                                      />\n                                    <span className=\"input-group-text\" style={{ backgroundColor: colors.secondary, borderColor: colors.cardBorder, color: colors.text }}>\n                                      <FaEuroSign />\n                                    </span>\n                                  </div>\n                                </div>\n\n                                <div className=\"mb-4\">\n                                  <label className=\"form-label\" style={{ color: colors.text }}>\n                                    MwSt-Satz\n                                  </label>\n                                  <select\n                                    className=\"form-select\"\n                                    value={selectedVatRate}\n                                    onChange={(e) => setSelectedVatRate(parseFloat(e.target.value))}\n                                    style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                  >\n                                    <option value={7}>7% (ermäßigt)</option>\n                                    <option value={19}>19% (regulär)</option>\n                                  </select>\n                                </div>\n\n                                <div className=\"mb-4\">\n                                  <label className=\"form-label\" style={{ color: colors.text }}>\n                                    Bruttopreis\n                                  </label>\n                                  <div className=\"input-group mb-2\">\n                                    <input\n                                      type=\"number\"\n                                      step=\"0.01\"\n                                      className=\"form-control\"\n                                      value={calculateGrossPrice(articleForm.bundlePrice, selectedVatRate).toFixed(2)}\n                                      readOnly\n                                      style={{ borderColor: colors.cardBorder, color: colors.text, backgroundColor: colors.secondary }}\n                                    />\n                                    <span className=\"input-group-text\" style={{ backgroundColor: colors.secondary, borderColor: colors.cardBorder, color: colors.text }}>\n                                      <FaEuroSign />\n                                    </span>\n                                    <button\n                                      type=\"button\"\n                                      className=\"btn btn-primary\"\n                                      onClick={handleApplyGrossPrice}\n                                      style={{\n                                        backgroundColor: colors.accent,\n                                        borderColor: colors.accent\n                                      }}\n                                      title=\"Bruttopreis übernehmen\"\n                                    >\n                                      <FaCheck />\n                                    </button>\n                                  </div>\n                                </div>\n\n                                <div className=\"mb-4\">\n                                  <label className=\"form-label\" style={{ color: colors.text }}>\n                                    Nettopreis\n                                  </label>\n                                  <div className=\"input-group mb-2\">\n                                    <input\n                                      type=\"number\"\n                                      step=\"0.01\"\n                                      className=\"form-control\"\n                                      value={calculateNetPrice(articleForm.bundlePrice, selectedVatRate).toFixed(2)}\n                                      readOnly\n                                      style={{ borderColor: colors.cardBorder, color: colors.text, backgroundColor: colors.secondary }}\n                                    />\n                                    <span className=\"input-group-text\" style={{ backgroundColor: colors.secondary, borderColor: colors.cardBorder, color: colors.text }}>\n                                      <FaEuroSign />\n                                    </span>\n                                    <button\n                                      type=\"button\"\n                                      className=\"btn btn-primary\"\n                                      onClick={handleApplyNetPrice}\n                                      style={{\n                                        backgroundColor: colors.accent,\n                                        borderColor: colors.accent\n                                      }}\n                                      title=\"Nettopreis übernehmen\"\n                                    >\n                                      <FaCheck />\n                                    </button>\n                                  </div>\n                                </div>\n                              </div>\n                              <div className=\"card-footer d-flex justify-content-center\" style={{ \n                                backgroundColor: colors.secondary,\n                                borderTop: `1px solid ${colors.cardBorder}`\n                              }}>\n                                <button\n                                  className=\"btn btn-secondary\"\n                                  onClick={() => setShowPriceConverter(false)}\n                                  style={{ borderColor: colors.cardBorder }}\n                                >\n                                  Abbrechen\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Lieferantenformular Modal */}\n                  {showSupplierForm && (\n                    <div className=\"position-fixed top-0 start-0 w-100 h-100\" style={{\n                      background: 'rgba(0,0,0,0.5)',\n                      zIndex: 3000,\n                      top: 56\n                    }}>\n                      <div className=\"container-fluid h-100 p-4\">\n                        <div className=\"row justify-content-center h-100\">\n                          <div className=\"col-12 col-xl-6\">\n                            <div className=\"card\" style={{ backgroundColor: colors.card, maxHeight: 'calc(100vh - 120px)' }}>\n                              <div className=\"card-header d-flex justify-content-between align-items-center\" style={{ backgroundColor: colors.secondary }}>\n                                <h5 className=\"mb-0\" style={{ color: colors.text }}>\n                                  {editingSupplier ? 'Lieferant bearbeiten' : 'Neuen Lieferanten anlegen'}\n                                </h5>\n                                <button\n                                  className=\"btn btn-link p-0\"\n                                  onClick={() => setShowSupplierForm(false)}\n                                  style={{ color: colors.text, textDecoration: 'none' }}\n                                >\n                                  <FaClose />\n                                </button>\n                              </div>\n                              <div className=\"card-body\" style={{ \n                                overflowY: 'auto', \n                                maxHeight: 'calc(100vh - 180px)',\n                                paddingBottom: '0',\n                                borderBottom: 'none'\n                              }}>\n                                <form>\n                                  {/* Grunddaten */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Grunddaten\n                                      </h6>\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Firmenname *\n                                      </label>\n                                      <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={supplierForm.name}\n                                        onChange={(e) => setSupplierForm(prev => ({ ...prev, name: e.target.value }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                        required\n                                      />\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Ansprechpartner\n                                      </label>\n                                      <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={supplierForm.contactPerson}\n                                        onChange={(e) => setSupplierForm(prev => ({ ...prev, contactPerson: e.target.value }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        E-Mail\n                                      </label>\n                                      <input\n                                        type=\"email\"\n                                        className=\"form-control\"\n                                        value={supplierForm.email}\n                                        onChange={(e) => setSupplierForm(prev => ({ ...prev, email: e.target.value }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Website\n                                      </label>\n                                      <div className=\"input-group\">\n                                        <input\n                                          type=\"url\"\n                                          className=\"form-control\"\n                                          value={supplierForm.website}\n                                          onChange={(e) => setSupplierForm(prev => ({ ...prev, website: e.target.value }))}\n                                          style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                          placeholder=\"https://www.lieferant.de\"\n                                        />\n                                        <button\n                                          type=\"button\"\n                                          className=\"btn btn-outline-primary\"\n                                          onClick={() => openWebsite(supplierForm.website)}\n                                          disabled={!isValidUrl(supplierForm.website)}\n                                          style={{\n                                            borderColor: colors.cardBorder,\n                                            color: colors.accent\n                                          }}\n                                          title=\"Website in neuem Fenster öffnen\"\n                                        >\n                                          <FaGlobe />\n                                        </button>\n                                      </div>\n\n                                    </div>\n                                  </div>\n\n                                  {/* Telefonnummern */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Telefonnummern\n                                      </h6>\n                                    </div>\n                                    {supplierForm.phoneNumbers.map((phone, index) => (\n                                      <div key={index} className=\"col-12 mb-3\">\n                                        <div className=\"row\">\n                                          <div className=\"col-md-3\">\n                                            <select\n                                              className=\"form-select\"\n                                              value={phone.type}\n                                              onChange={(e) => updatePhoneNumber(index, 'type', e.target.value)}\n                                              style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                            >\n                                              <option value=\"Geschäft\">Geschäft</option>\n                                              <option value=\"Mobil\">Mobil</option>\n                                              <option value=\"Fax\">Fax</option>\n                                              <option value=\"Privat\">Privat</option>\n                                              <option value=\"Notfall\">Notfall</option>\n                                            </select>\n                                          </div>\n                                          <div className=\"col-md-7\">\n                                            <input\n                                              type=\"tel\"\n                                              className=\"form-control\"\n                                              value={phone.number}\n                                              onChange={(e) => updatePhoneNumber(index, 'number', e.target.value)}\n                                              placeholder=\"Telefonnummer\"\n                                              style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                            />\n                                          </div>\n                                          <div className=\"col-md-2\">\n                                            {supplierForm.phoneNumbers.length > 1 && (\n                                              <button\n                                                type=\"button\"\n                                                className=\"btn btn-outline-danger w-100\"\n                                                onClick={() => removePhoneNumber(index)}\n                                                style={{ borderColor: '#dc3545', color: '#dc3545' }}\n                                              >\n                                                <FaClose />\n                                              </button>\n                                            )}\n                                          </div>\n                                        </div>\n                                      </div>\n                                    ))}\n                                    <div className=\"col-12\">\n                                      <button\n                                        type=\"button\"\n                                        className=\"btn btn-outline-secondary\"\n                                        onClick={addPhoneNumber}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      >\n                                        <FaPlus className=\"me-2\" />\n                                        Telefonnummer hinzufügen\n                                      </button>\n                                    </div>\n                                  </div>\n\n                                  {/* Adresse */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Adresse\n                                      </h6>\n                                    </div>\n                                    <div className=\"col-12 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Straße & Hausnummer\n                                      </label>\n                                      <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={supplierForm.address.street}\n                                        onChange={(e) => setSupplierForm(prev => ({\n                                          ...prev,\n                                          address: { ...prev.address, street: e.target.value }\n                                        }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-4 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        PLZ\n                                      </label>\n                                      <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={supplierForm.address.zipCode}\n                                        onChange={(e) => setSupplierForm(prev => ({\n                                          ...prev,\n                                          address: { ...prev.address, zipCode: e.target.value }\n                                        }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-4 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Stadt\n                                      </label>\n                                      <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={supplierForm.address.city}\n                                        onChange={(e) => setSupplierForm(prev => ({\n                                          ...prev,\n                                          address: { ...prev.address, city: e.target.value }\n                                        }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-4 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Land\n                                      </label>\n                                      <input\n                                        type=\"text\"\n                                        className=\"form-control\"\n                                        value={supplierForm.address.country}\n                                        onChange={(e) => setSupplierForm(prev => ({\n                                          ...prev,\n                                          address: { ...prev.address, country: e.target.value }\n                                        }))}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                  </div>\n\n                                  {/* Notizen */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Notizen\n                                      </h6>\n                                    </div>\n                                    <div className=\"col-12\">\n                                      <textarea\n                                        className=\"form-control\"\n                                        rows={3}\n                                        value={supplierForm.notes}\n                                        onChange={(e) => setSupplierForm(prev => ({ ...prev, notes: e.target.value }))}\n                                        placeholder=\"Zusätzliche Informationen, Lieferzeiten, Mindestbestellmengen, etc.\"\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                  </div>\n                                </form>\n                              </div>\n                              <div className=\"card-footer d-flex justify-content-between\" style={{ \n                                backgroundColor: colors.secondary,\n                                borderTop: 'none',\n                                position: 'sticky',\n                                bottom: 0,\n                                zIndex: 10\n                              }}>\n                                <button\n                                  className=\"btn btn-secondary\"\n                                  onClick={() => setShowSupplierForm(false)}\n                                  style={{ borderColor: colors.cardBorder }}\n                                >\n                                  <FaArrowLeft className=\"me-2\" />\n                                  Abbrechen\n                                </button>\n                                <button\n                                  className=\"btn btn-primary\"\n                                  onClick={handleSaveSupplier}\n                                  disabled={!supplierForm.name}\n                                  style={{\n                                    backgroundColor: colors.accent,\n                                    borderColor: colors.accent\n                                  }}\n                                >\n                                  <FaSave className=\"me-2\" />\n                                  {editingSupplier ? 'Änderungen speichern' : 'Lieferant speichern'}\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Rezept-Formular Modal */}\n                  {showRecipeForm && (\n                    <div className=\"position-fixed top-0 start-0 w-100 h-100\" style={{\n                      background: 'rgba(0,0,0,0.5)',\n                      zIndex: 3000,\n                      top: 56\n                    }}>\n                      <div className=\"container-fluid h-100 p-4\">\n                        <div className=\"row justify-content-center h-100\">\n                          <div className=\"col-12 col-xl-6\">\n                            <div className=\"card\" style={{ backgroundColor: colors.card, maxHeight: 'calc(100vh - 120px)' }}>\n                              <div className=\"card-header d-flex justify-content-between align-items-center\" style={{ backgroundColor: colors.secondary }}>\n                                <h5 className=\"mb-0\" style={{ color: colors.text }}>\n                                  {editingRecipe ? 'Rezept bearbeiten' : 'Neues Rezept erstellen'}\n                                </h5>\n                                <button\n                                  className=\"btn btn-link p-0\"\n                                  onClick={() => setShowRecipeForm(false)}\n                                  style={{ color: colors.text, textDecoration: 'none' }}\n                                >\n                                  <FaClose />\n                                </button>\n                              </div>\n                              <div className=\"card-body\" style={{ \n                                overflowY: 'auto', \n                                maxHeight: 'calc(100vh - 180px)',\n                                paddingBottom: '0',\n                                borderBottom: 'none'\n                              }}>\n                                <form>\n                                  {/* Grunddaten */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Grunddaten\n                                      </h6>\n                                    </div>\n                                    <div className=\"col-md-7 mb-3\">\n                                      <div className=\"row\" style={{ height: '200px' }}>\n                                        <div className=\"col-12 mb-3\">\n                                          <label className=\"form-label\" style={{ color: colors.text }}>\n                                            Rezeptname *\n                                          </label>\n                                          <input\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            value={recipeForm.name}\n                                            onChange={(e) => setRecipeForm(prev => ({ ...prev, name: e.target.value }))}\n                                            style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                            required\n                                          />\n                                        </div>\n                                        <div className=\"col-12\" style={{ flex: 1 }}>\n                                          <label className=\"form-label\" style={{ color: colors.text }}>\n                                            Beschreibung\n                                          </label>\n                                          <textarea\n                                            className=\"form-control h-100\"\n                                            value={recipeForm.description}\n                                            onChange={(e) => setRecipeForm(prev => ({ ...prev, description: e.target.value }))}\n                                            placeholder=\"Kurze Beschreibung des Rezepts\"\n                                            style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text,\n                                              resize: 'none'\n                                            }}\n                                          />\n                                        </div>\n                                      </div>\n                                    </div>\n                                    <div className=\"col-md-5 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Rezeptbild\n                                      </label>\n                                      <div\n                                        className=\"border rounded d-flex align-items-center justify-content-center\"\n                                        style={{\n                                          borderColor: colors.cardBorder,\n                                          backgroundColor: colors.background,\n                                          height: '200px',\n                                          width: '100%',\n                                          cursor: 'pointer',\n                                          borderStyle: 'dashed',\n                                          overflow: 'hidden'\n                                        }}\n                                        onClick={() => document.getElementById('recipe-image-input')?.click()}\n                                        title=\"Klicken Sie, um ein Bild auszuwählen\"\n                                      >\n                                        {recipeForm.image ? (\n                                          <div className=\"position-relative w-100 h-100\">\n                                            <img\n                                              src={URL.createObjectURL(recipeForm.image)}\n                                              alt=\"Rezeptbild\"\n                                              style={{\n                                                width: '100%',\n                                                height: '100%',\n                                                objectFit: 'contain',\n                                                backgroundColor: colors.background\n                                              }}\n                                            />\n                                            <div\n                                              className=\"position-absolute top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center\"\n                                              style={{\n                                                backgroundColor: 'rgba(0,0,0,0.3)',\n                                                opacity: 0,\n                                                transition: 'opacity 0.2s'\n                                              }}\n                                              onMouseEnter={(e) => e.currentTarget.style.opacity = '1'}\n                                              onMouseLeave={(e) => e.currentTarget.style.opacity = '0'}\n                                            >\n                                              <div className=\"text-center text-white\">\n                                                <FaImage style={{ fontSize: '1.5rem', marginBottom: '0.25rem' }} />\n                                                <div style={{ fontSize: '0.7rem' }}>\n                                                  Bild ändern\n                                                </div>\n                                              </div>\n                                            </div>\n                                          </div>\n                                        ) : (\n                                          <div className=\"text-center\">\n                                            <FaImage style={{ fontSize: '2rem', color: colors.cardBorder, marginBottom: '0.5rem' }} />\n                                            <div style={{ fontSize: '0.8rem', color: colors.text }}>\n                                              Bild auswählen\n                                            </div>\n                                          </div>\n                                        )}\n                                      </div>\n                                      <input\n                                        id=\"recipe-image-input\"\n                                        type=\"file\"\n                                        accept=\"image/*\"\n                                        onChange={handleRecipeImageUpload}\n                                        style={{ display: 'none' }}\n                                      />\n                                    </div>\n                                  </div>\n\n                                  {/* Details */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Details\n                                      </h6>\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Portionen\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        className=\"form-control\"\n                                        value={recipeForm.portions}\n                                        onChange={(e) => {\n                                          const newPortions = parseInt(e.target.value) || 0;\n                                          setRecipeForm(prev => {\n                                            const updatedForm = { ...prev, portions: newPortions };\n                                            // Berechne den Aufschlag mit dem neuen Portionen-Wert\n                                            const materialCosts = calculateMaterialCosts();\n                                            const costsPerPortion = materialCosts / newPortions;\n                                            const netSellingPrice = calculateNetPrice(updatedForm.sellingPrice, updatedForm.vatRate);\n                                            const markup = costsPerPortion > 0 ? Math.round((netSellingPrice / costsPerPortion) * 100) : 0;\n                                            \n                                            return { ...updatedForm, markupPercentage: markup };\n                                          });\n                                        }}\n                                        min=\"1\"\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Zeit (Minuten)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        className=\"form-control\"\n                                        value={recipeForm.preparationTime}\n                                        onChange={(e) => setRecipeForm(prev => ({ ...prev, preparationTime: parseInt(e.target.value) || 0 }))}\n                                        min=\"1\"\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Schwierigkeit\n                                      </label>\n                                      <div \n                                        className=\"form-control d-flex align-items-center justify-content-center\"\n                                        style={{ \n                                          borderColor: colors.cardBorder, \n                                          color: colors.text,\n                                          height: 'calc(1.5em + 0.75rem + 2px)',\n                                          padding: '0'\n                                        }}\n                                      >\n                                        <div className=\"d-flex gap-1 align-items-center\">\n                                          {[1, 2, 3, 4, 5].map(star => (\n                                            <button\n                                              key={star}\n                                              type=\"button\"\n                                              className=\"btn btn-link p-0\"\n                                              onClick={() => setRecipeForm(prev => ({ ...prev, difficulty: star }))}\n                                              style={{ \n                                                color: star <= recipeForm.difficulty ? '#ffc107' : colors.cardBorder,\n                                                fontSize: '1.5rem',\n                                                textDecoration: 'none'\n                                              }}\n                                            >\n                                              ★\n                                            </button>\n                                          ))}\n                                        </div>\n                                      </div>\n                                    </div>\n                                    <div className=\"col-md-3 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Energie (kWh)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        className=\"form-control\"\n                                        value={recipeForm.energy}\n                                        onChange={(e) => setRecipeForm(prev => ({ ...prev, energy: parseFloat(e.target.value) || 0 }))}\n                                        step=\"0.1\"\n                                        min=\"0\"\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                  </div>\n\n                                  {/* Kalkulation */}\n                                  <div className=\"row mb-4\" style={{ minHeight: 'fit-content' }}>\n                                    <div className=\"col-12\">\n                                      <div className=\"d-flex mb-4\" style={{ borderBottom: `2px solid ${colors.accent}` }}>\n                                        {[\n                                          { key: 'kalkulation', label: 'Kalkulation' },\n                                          { key: 'inhaltsangaben', label: 'Inhaltsangaben' },\n                                          { key: 'naehrwerte', label: 'Nährwerte' }\n                                        ].map(tab => (\n                                          <div\n                                            key={tab.key}\n                                            className=\"flex-fill text-center\"\n                                            style={{\n                                              cursor: 'pointer',\n                                              fontWeight: activeTab === tab.key ? 'bold' : 'normal',\n                                              color: activeTab === tab.key ? colors.accent : colors.text,\n                                              borderBottom: activeTab === tab.key ? `2px solid ${colors.accent}` : 'none',\n                                              padding: '0.5rem 0'\n                                            }}\n                                            onClick={() => setActiveTab(tab.key as any)}\n                                          >\n                                            {tab.label}\n                                          </div>\n                                        ))}\n                                      </div>\n                                    </div>\n                                    \n                                    {/* Tab-Inhalte */}\n                                    {activeTab === 'kalkulation' && (\n                                      <>\n                                        {/* Obere Reihe */}\n                                    <div className=\"col-md-4 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Aufschlag (%)\n                                      </label>\n                                      <input\n                                        type=\"number\"\n                                        className=\"form-control\"\n                                        value={recipeForm.markupPercentage}\n                                        onChange={(e) => handleMarkupChange(parseFloat(e.target.value) || 0)}\n                                        onBlur={(e) => {\n                                          const roundedValue = Math.round(parseFloat(e.target.value) || 0);\n                                          setRecipeForm(prev => ({ ...prev, markupPercentage: roundedValue }));\n                                        }}\n                                        min=\"0\"\n                                        step=\"1\"\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      />\n                                    </div>\n                                    <div className=\"col-md-4 mb-3 d-flex flex-column\">\n                                      <div className=\"d-flex justify-content-between align-items-end mb-1\">\n                                        <label className=\"form-label mb-0\" style={{ color: colors.text, fontSize: '0.875rem' }}>\n                                          MwSt. (%)\n                                        </label>\n                                        <small style={{ color: colors.accent, fontSize: '0.75rem' }}>\n                                          {(() => {\n                                            const values = calculateAllValues();\n                                            return `${values.vatAmount.toFixed(2)} €`;\n                                          })()}\n                                        </small>\n                                      </div>\n                                      <div className=\"mt-auto\">\n                                        <select\n                                        className=\"form-control\"\n                                        value={recipeForm.vatRate}\n                                        onChange={(e) => {\n                                          const newVatRate = parseInt(e.target.value);\n                                          setRecipeForm(prev => {\n                                            const updatedForm = { ...prev, vatRate: newVatRate };\n                                            // Berechne den Aufschlag mit dem neuen MwSt-Satz\n                                            const materialCosts = calculateMaterialCosts();\n                                            const costsPerPortion = materialCosts / updatedForm.portions;\n                                            const netSellingPrice = calculateNetPrice(updatedForm.sellingPrice, newVatRate);\n                                            const markup = costsPerPortion > 0 ? Math.round((netSellingPrice / costsPerPortion) * 100) : 0;\n                                            \n                                            return { ...updatedForm, markupPercentage: markup };\n                                          });\n                                        }}\n                                        style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                      >\n                                        <option value={0}>0%</option>\n                                        <option value={7}>7%</option>\n                                        <option value={19}>19%</option>\n                                      </select>\n                                      </div>\n                                    </div>\n                                    <div className=\"col-md-4 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Verkaufspreis\n                                      </label>\n                                      <div className=\"input-group\">\n                                                                                <input\n                                          type=\"text\"\n                                          className=\"form-control\"\n                                          value={sellingPriceInput}\n                                          onChange={(e) => {\n                                            setSellingPriceInput(e.target.value);\n                                            const value = parseFloat(e.target.value.replace(',', '.'));\n                                            if (!isNaN(value)) {\n                                              setRecipeForm(prev => ({ ...prev, sellingPrice: value }));\n                                            }\n                                          }}\n                                          onBlur={() => {\n                                            setSellingPriceInput(recipeForm.sellingPrice.toFixed(2));\n                                            const values = calculateAllValues();\n                                            setRecipeForm(prev => ({ ...prev, markupPercentage: values.markup }));\n                                          }}\n                                          onFocus={(e) => {\n                                            setSellingPriceInput(recipeForm.sellingPrice.toString());\n                                            setTimeout(() => e.target.select(), 0);\n                                          }}\n                                          min=\"0\"\n                                          step=\"0.01\"\n                                          style={{ borderColor: colors.cardBorder, color: '#28a745', fontWeight: 'bold' }}\n                                        />\n                                        <span className=\"input-group-text\" style={{ backgroundColor: colors.secondary, borderColor: colors.cardBorder, color: colors.text }}>\n                                          €\n                                        </span>\n                                      </div>\n                                    </div>\n                                    {/* Untere Reihe */}\n                                    {(() => {\n                                      const values = calculateAllValues();\n                                      return (\n                                        <>\n                                          <div className=\"col-md-4 mb-3\">\n                                            <label className=\"form-label\" style={{ color: colors.text }}>\n                                              Materialkosten\n                                            </label>\n                                            <div className=\"form-control\" style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text, \n                                              backgroundColor: colors.secondary,\n                                              display: 'flex',\n                                              alignItems: 'center',\n                                              height: 'calc(1.5em + 0.75rem + 2px)'\n                                            }}>\n                                              {values.materialCosts.toFixed(2)} €\n                                            </div>\n                                          </div>\n                                          <div className=\"col-md-4 mb-3\">\n                                            <label className=\"form-label\" style={{ color: colors.text }}>\n                                              Kosten/Portion\n                                            </label>\n                                            <div className=\"form-control\" style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text, \n                                              backgroundColor: colors.secondary,\n                                              display: 'flex',\n                                              alignItems: 'center',\n                                              height: 'calc(1.5em + 0.75rem + 2px)'\n                                            }}>\n                                              {values.costsPerPortion.toFixed(2)} €\n                                            </div>\n                                          </div>\n                                          <div className=\"col-md-4 mb-3\">\n                                            <label className=\"form-label\" style={{ color: colors.text }}>\n                                              Rohertrag\n                                            </label>\n                                            <div className=\"form-control\" style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: '#28a745', \n                                              backgroundColor: colors.secondary,\n                                              display: 'flex',\n                                              alignItems: 'center',\n                                              height: 'calc(1.5em + 0.75rem + 2px)',\n                                              fontWeight: 'bold'\n                                            }}>\n                                              {values.grossProfit.toFixed(2)} €\n                                            </div>\n                                          </div>\n                                        </>\n                                      );\n                                    })()}\n                                  </>\n                                )}\n                              {(activeTab as string) === 'inhaltsangaben' && (\n                                  <>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Inhaltsstoffe\n                                      </label>\n                                      <textarea\n                                        className=\"form-control\"\n                                        value={getRecipeIngredients().join(', ')}\n                                        readOnly\n                                        rows={4}\n                                        style={{ \n                                          borderColor: colors.cardBorder, \n                                          color: colors.text,\n                                          backgroundColor: colors.paper || colors.card,\n                                          resize: 'none'\n                                        }}\n                                        placeholder=\"Keine Zutaten hinzugefügt\"\n                                      />\n                                    </div>\n                                    <div className=\"col-md-6 mb-3\">\n                                      <label className=\"form-label\" style={{ color: colors.text }}>\n                                        Allergene\n                                      </label>\n                                      <textarea\n                                        className=\"form-control\"\n                                        value={getRecipeAllergens().join(', ')}\n                                        readOnly\n                                        rows={4}\n                                        style={{ \n                                          borderColor: colors.cardBorder, \n                                          color: colors.text,\n                                          backgroundColor: colors.paper || colors.card,\n                                          resize: 'none'\n                                        }}\n                                        placeholder=\"Keine Allergene gefunden\"\n                                      />\n                                    </div>\n                                  </>\n                                )}\n                                {(activeTab as string) === 'naehrwerte' && (\n                                  <div className=\"row\">\n                                    <div className=\"col-12\">\n                                      <div className=\"row\">\n                                        <div className=\"col-md-3 mb-3\">\n                                          <label className=\"form-label\" style={{ color: colors.text }}>\n                                            Energie (kcal)\n                                          </label>\n                                          <input\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            value={calculateRecipeNutrition().calories}\n                                            readOnly\n                                            style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text,\n                                              backgroundColor: colors.paper || colors.card\n                                            }}\n                                          />\n                                        </div>\n                                        <div className=\"col-md-3 mb-3\">\n                                          <label className=\"form-label\" style={{ color: colors.text }}>\n                                            Energie (kJ)\n                                          </label>\n                                          <input\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            value={calculateRecipeNutrition().kilojoules}\n                                            readOnly\n                                            style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text,\n                                              backgroundColor: colors.paper || colors.card\n                                            }}\n                                          />\n                                        </div>\n                                        <div className=\"col-md-3 mb-3\">\n                                          <label className=\"form-label\" style={{ color: colors.text }}>\n                                            Fett (g)\n                                          </label>\n                                          <input\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            value={calculateRecipeNutrition().fat}\n                                            readOnly\n                                            style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text,\n                                              backgroundColor: colors.paper || colors.card\n                                            }}\n                                          />\n                                        </div>\n                                        <div className=\"col-md-3 mb-3\">\n                                          <label className=\"form-label\" style={{ color: colors.text }}>\n                                            Kohlenhydrate (g)\n                                          </label>\n                                          <input\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            value={calculateRecipeNutrition().carbohydrates}\n                                            readOnly\n                                            style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text,\n                                              backgroundColor: colors.paper || colors.card\n                                            }}\n                                          />\n                                        </div>\n                                      </div>\n                                      <div className=\"row\">\n                                        <div className=\"col-md-3 mb-3\">\n                                          <label className=\"form-label\" style={{ color: colors.text }}>\n                                            Eiweiß (g)\n                                          </label>\n                                          <input\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            value={calculateRecipeNutrition().protein}\n                                            readOnly\n                                            style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text,\n                                              backgroundColor: colors.paper || colors.card\n                                            }}\n                                          />\n                                        </div>\n                                        <div className=\"col-md-3 mb-3\">\n                                          <label className=\"form-label\" style={{ color: colors.text }}>\n                                            Ballaststoffe (g)\n                                          </label>\n                                          <input\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            value={calculateRecipeNutrition().fiber}\n                                            readOnly\n                                            style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text,\n                                              backgroundColor: colors.paper || colors.card\n                                            }}\n                                          />\n                                        </div>\n                                        <div className=\"col-md-3 mb-3\">\n                                          <label className=\"form-label\" style={{ color: colors.text }}>\n                                            Zucker (g)\n                                          </label>\n                                          <input\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            value={calculateRecipeNutrition().sugar}\n                                            readOnly\n                                            style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text,\n                                              backgroundColor: colors.paper || colors.card\n                                            }}\n                                          />\n                                        </div>\n                                        <div className=\"col-md-3 mb-3\">\n                                          <label className=\"form-label\" style={{ color: colors.text }}>\n                                            Salz (g)\n                                          </label>\n                                          <input\n                                            type=\"text\"\n                                            className=\"form-control\"\n                                            value={calculateRecipeNutrition().salt}\n                                            readOnly\n                                            style={{ \n                                              borderColor: colors.cardBorder, \n                                              color: colors.text,\n                                              backgroundColor: colors.paper || colors.card\n                                            }}\n                                          />\n                                        </div>\n                                      </div>\n                                    </div>\n                                  </div>\n                                )}\n                              </div>\n\n                              {/* Zutaten */}\n                              <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Zutaten\n                                      </h6>\n                                    </div>\n                                    <div className=\"col-12\">\n                                      <div className=\"table-responsive\">\n                                        <table className=\"table table-hover\" style={{ \n                                          backgroundColor: colors.background, \n                                          borderColor: colors.cardBorder, \n                                          tableLayout: 'fixed',\n                                          '--bs-table-hover-bg': colors.background,\n                                          '--bs-table-hover-color': colors.text\n                                        } as React.CSSProperties}>\n                                          <tbody>\n                                            {recipeForm.ingredients.map((ingredient, index) => (\n                                              <tr key={ingredient.id} style={{ \n                                                borderColor: colors.cardBorder, \n                                                backgroundColor: selectedIngredientIndex === index ? colors.accent + '20' : colors.background \n                                              }}>\n                                                <td style={{ borderColor: colors.cardBorder, padding: '8px', width: '45%' }}>\n                                                  <div className=\"position-relative\">\n                                                                                                        <input\n                                                      type=\"text\"\n                                                      className=\"form-control form-control-sm\"\n                                                      value={ingredient.name}\n                                                      onChange={(e) => handleIngredientInputChange(e.target.value, index)}\n                                                      onFocus={() => handleIngredientFocus(index)}\n                                                      onBlur={handleIngredientInputBlur}\n                                                      onKeyDown={(e) => handleIngredientKeyDown(e, index)}\n                                                      placeholder=\"Artikel auswählen oder neuen erstellen\"\n                                                      data-ingredient-index={index}\n                                                      style={{ \n                                                        borderColor: colors.cardBorder, \n                                                        color: colors.text\n                                                      }}\n                                                    />\n                                                    {showIngredientDropdown && (\n                                                      <div className=\"position-fixed\" style={{\n                                                        top: dropdownPosition.top,\n                                                        left: dropdownPosition.left,\n                                                        zIndex: 99999,\n                                                        maxHeight: '200px',\n                                                        overflowY: 'auto',\n                                                        backgroundColor: colors.card,\n                                                        border: `1px solid ${colors.cardBorder}`,\n                                                        borderRadius: '0.375rem',\n                                                        boxShadow: '0 4px 12px rgba(0,0,0,0.15)',\n                                                        minWidth: '300px'\n                                                      }}>\n                                                        {getFilteredIngredients().map((article, itemIndex) => (\n                                                          <div\n                                                            key={article.id}\n                                                            className=\"px-3 py-2 cursor-pointer dropdown-item\"\n                                                            onClick={() => handleIngredientSelect(article, index)}\n                                                            style={{\n                                                              color: colors.text,\n                                                              borderBottom: `1px solid ${colors.cardBorder}`,\n                                                              cursor: 'pointer',\n                                                              backgroundColor: dropdownSelectionIndex === itemIndex ? colors.accent + '20' : 'transparent'\n                                                            }}\n                                                            onMouseEnter={(e) => {\n                                                              if (dropdownSelectionIndex !== itemIndex) {\n                                                                e.currentTarget.style.backgroundColor = colors.secondary;\n                                                              }\n                                                              setDropdownSelectionIndex(itemIndex);\n                                                            }}\n                                                            onMouseLeave={(e) => {\n                                                              if (dropdownSelectionIndex !== itemIndex) {\n                                                                e.currentTarget.style.backgroundColor = 'transparent';\n                                                              }\n                                                            }}\n                                                          >\n                                                            <div className=\"fw-bold\">{article.name}</div>\n                                                            <small style={{ color: colors.accent }}>\n                                                              {formatPrice(article.pricePerUnit)} / {article.contentUnit}\n                                                            </small>\n                                                          </div>\n                                                        ))}\n                                                        {ingredientSearchTerm && !articles.some(a => a.name === ingredientSearchTerm) && (\n                                                          <div\n                                                            className=\"px-3 py-2 cursor-pointer dropdown-item\"\n                                                            onClick={() => handleCreateNewArticle(ingredientSearchTerm, index)}\n                                                            style={{\n                                                              color: colors.accent,\n                                                              borderTop: `2px solid ${colors.accent}`,\n                                                              borderBottom: `1px solid ${colors.cardBorder}`,\n                                                              cursor: 'pointer',\n                                                              fontWeight: 'bold',\n                                                              backgroundColor: dropdownSelectionIndex === getFilteredIngredients().length ? colors.accent + '20' : 'transparent'\n                                                            }}\n                                                            onMouseEnter={(e) => {\n                                                              if (dropdownSelectionIndex !== getFilteredIngredients().length) {\n                                                                e.currentTarget.style.backgroundColor = colors.secondary;\n                                                              }\n                                                              setDropdownSelectionIndex(getFilteredIngredients().length);\n                                                            }}\n                                                            onMouseLeave={(e) => {\n                                                              if (dropdownSelectionIndex !== getFilteredIngredients().length) {\n                                                                e.currentTarget.style.backgroundColor = 'transparent';\n                                                              }\n                                                            }}\n                                                          >\n                                                            <FaPlus className=\"me-2\" />\n                                                            \"{ingredientSearchTerm}\" als neuen Artikel erstellen\n                                                          </div>\n                                                        )}\n                                                      </div>\n                                                    )}\n                                                  </div>\n                                                </td>\n                                                <td style={{ borderColor: colors.cardBorder, padding: '8px', verticalAlign: 'middle', width: '20%' }}>\n                                                  <div className=\"d-flex align-items-center gap-2\">\n                                                    <input\n                                                      type=\"number\"\n                                                      className=\"form-control form-control-sm\"\n                                                      value={ingredient.amount}\n                                                      onChange={(e) => {\n                                                        const newAmount = parseFloat(e.target.value) || 0;\n                                                        const newPrice = calculateIngredientPrice({ ...ingredient, amount: newAmount });\n                                                        setRecipeForm(prev => ({\n                                                          ...prev,\n                                                          ingredients: prev.ingredients.map((ing, i) => \n                                                            i === index ? { ...ing, amount: newAmount, price: newPrice } : ing\n                                                          )\n                                                        }));\n                                                        // Neuberechnung basierend auf aktuellem Verkaufspreis\n                                                        setTimeout(() => {\n                                                          const values = calculateAllValues();\n                                                          setRecipeForm(prev => ({ ...prev, markupPercentage: values.markup }));\n                                                        }, 0);\n                                                      }}\n                                                      min=\"0\"\n                                                      step=\"0.1\"\n                                                      style={{ \n                                                        borderColor: colors.cardBorder, \n                                                        color: colors.text, \n                                                        width: '25%',\n                                                        minWidth: '60px'\n                                                      }}\n                                                    />\n                                                    <span style={{ color: colors.text, fontWeight: 'bold', fontSize: '0.9rem' }}>\n                                                      {ingredient.unit || '?'}\n                                                    </span>\n                                                  </div>\n                                                </td>\n                                                <td style={{ borderColor: colors.cardBorder, padding: '8px', verticalAlign: 'middle', width: '20%', textAlign: 'right' }}>\n                                                  <span style={{ color: colors.text, fontWeight: 'bold' }}>\n                                                    {calculateIngredientPrice(ingredient).toFixed(2).replace('.', ',')} €\n                                                  </span>\n                                                </td>\n                                                <td style={{ borderColor: colors.cardBorder, padding: '8px', verticalAlign: 'middle', width: '15%', textAlign: 'right' }}>\n                                                  <div className=\"d-flex gap-1 justify-content-end\">\n                                                    <button\n                                                      type=\"button\"\n                                                      className=\"btn btn-link p-0\"\n                                                      title=\"Artikel bearbeiten\"\n                                                      style={{\n                                                        color: colors.accent,\n                                                        textDecoration: 'none',\n                                                        fontSize: '12px'\n                                                      }}\n                                                      onClick={() => handleEditIngredient(index)}\n                                                    >\n                                                      <FaPencilAlt />\n                                                    </button>\n                                                    {recipeForm.ingredients.length > 1 && (\n                                                      <button\n                                                        type=\"button\"\n                                                        className=\"btn btn-link p-0\"\n                                                        title=\"Löschen\"\n                                                        style={{\n                                                          color: '#dc3545',\n                                                          textDecoration: 'none',\n                                                          fontSize: '12px'\n                                                        }}\n                                                        onClick={() => removeIngredient(index)}\n                                                      >\n                                                        <FaClose />\n                                                      </button>\n                                                    )}\n                                                  </div>\n                                                </td>\n                                              </tr>\n                                            ))}\n                                          </tbody>\n                                        </table>\n                                      </div>\n                                    </div>\n                                  </div>\n\n                                  {/* Zubereitungsschritte */}\n                                  <div className=\"row mb-4\">\n                                    <div className=\"col-12\">\n                                      <h6 style={{ color: colors.text, borderBottom: `2px solid ${colors.accent}`, paddingBottom: '0.5rem' }}>\n                                        Zubereitungsschritte\n                                      </h6>\n                                    </div>\n                                    {recipeForm.preparationSteps.map((step, index) => (\n                                      <div key={step.id} className=\"col-12 mb-3\">\n                                        <div className=\"row\">\n                                          <div className=\"col-md-2\">\n                                            <label className=\"form-label\" style={{ color: colors.text }}>\n                                              Schritt {index + 1}\n                                            </label>\n                                          </div>\n                                          <div className=\"col-md-9\">\n                                            <textarea\n                                              className=\"form-control\"\n                                              value={step.description}\n                                              onChange={(e) => handlePreparationStepChange(index, e.target.value)}\n                                              rows={2}\n                                              placeholder=\"Beschreibung des Zubereitungsschritts\"\n                                              style={{ borderColor: colors.cardBorder, color: colors.text }}\n                                            />\n                                          </div>\n                                          <div className=\"col-md-1 d-flex align-items-start\">\n                                            {recipeForm.preparationSteps.length > 1 && (\n                                              <button\n                                                type=\"button\"\n                                                className=\"btn btn-link p-0\"\n                                                title=\"Schritt löschen\"\n                                                onClick={() => removePreparationStep(index)}\n                                                style={{\n                                                  color: '#dc3545',\n                                                  textDecoration: 'none',\n                                                  fontSize: '14px'\n                                                }}\n                                              >\n                                                <FaClose />\n                                              </button>\n                                            )}\n                                          </div>\n                                        </div>\n                                      </div>\n                                    ))}\n                                  </div>\n                                </form>\n                              </div>\n                              <div className=\"card-footer d-flex justify-content-between\" style={{ \n                                backgroundColor: colors.secondary,\n                                borderTop: 'none',\n                                position: 'sticky',\n                                bottom: 0,\n                                zIndex: 10\n                              }}>\n                                <button\n                                  className=\"btn btn-secondary\"\n                                  onClick={() => setShowRecipeForm(false)}\n                                  style={{ borderColor: colors.cardBorder }}\n                                >\n                                  <FaArrowLeft className=\"me-2\" />\n                                  Abbrechen\n                                </button>\n                                <button\n                                  className=\"btn btn-primary\"\n                                  onClick={handleSaveRecipe}\n                                  disabled={!recipeForm.name}\n                                  style={{\n                                    backgroundColor: colors.accent,\n                                    borderColor: colors.accent\n                                  }}\n                                >\n                                  <FaSave className=\"me-2\" />\n                                  {editingRecipe ? 'Änderungen speichern' : 'Rezept speichern'}\n                                </button>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* Enhanced Sidebar */}\n      <div\n        className=\"position-fixed top-0 start-0 h-100 shadow transition-all\"\n        style={{ \n          width: sidebarOpen ? 224 : 60, \n          zIndex: 1020, \n          top: 56,\n          transition: 'width 0.3s ease',\n          backgroundColor: colors.sidebar,\n          borderRight: `1px solid ${colors.cardBorder}`,\n          display: isMobile ? (sidebarOpen ? 'block' : 'none') : 'block'\n        }}\n      >\n        <div className=\"d-flex justify-content-between align-items-center p-3 border-bottom\" style={{ borderColor: colors.cardBorder }}>\n          {sidebarOpen && <span className=\"fw-bold\" style={{ color: colors.text, fontSize: '1.1rem' }}>Navigation</span>}\n          <button \n            onClick={toggleSidebar} \n            style={{ \n              color: colors.text,\n              background: 'none',\n              border: 'none',\n              fontSize: '20px',\n              cursor: 'pointer',\n              padding: '8px',\n              borderRadius: '4px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              minWidth: '40px',\n              minHeight: '40px'\n            }}\n          >\n            {sidebarOpen ? <FaTimes /> : <FaBars />}\n          </button>\n        </div>\n        \n        <ul className=\"nav flex-column p-2\">\n          <li className=\"nav-item mb-2\">\n            <button \n              className=\"sidebar-button\" \n              onClick={() => { setCurrentPage('dashboard'); if (isMobile) setSidebarOpen(false); }}\n              title=\"Dashboard\"\n              style={{ \n                color: colors.text,\n                borderRadius: '8px',\n                backgroundColor: currentPage === 'dashboard' ? colors.accent + '20' : 'transparent',\n                justifyContent: sidebarOpen ? 'flex-start' : 'center',\n                minHeight: '50px',\n                border: 'none',\n                outline: 'none',\n                padding: sidebarOpen ? '12px' : '2px',\n                width: '100%'\n              }}\n            >\n              <FaTachometerAlt className=\"sidebar-icon\" style={{ \n                marginRight: sidebarOpen ? '12px' : '0',\n                display: 'block',\n                flexShrink: 0,\n                fontSize: '18px',\n                fontWeight: 'bold',\n                color: colors.text,\n                minWidth: '18px',\n                textAlign: 'center',\n                width: sidebarOpen ? 'auto' : '100%'\n              }} />\n              {sidebarOpen && <span>Dashboard</span>}\n            </button>\n          </li>\n          <li className=\"nav-item mb-2\">\n            <button \n              className=\"sidebar-button\" \n              onClick={() => { setCurrentPage('kalkulation'); if (isMobile) setSidebarOpen(false); }}\n              title=\"Kalkulation\"\n              style={{ \n                color: colors.text,\n                borderRadius: '8px',\n                backgroundColor: (currentPage === 'kalkulation' || currentPage === 'rezepte' || currentPage === 'artikel' || currentPage === 'lieferanten') ? colors.accent + '20' : 'transparent',\n                justifyContent: sidebarOpen ? 'flex-start' : 'center',\n                minHeight: '50px',\n                border: 'none',\n                outline: 'none',\n                padding: sidebarOpen ? '12px' : '2px',\n                width: '100%'\n              }}\n            >\n              <FaCalculator className=\"sidebar-icon\" style={{ \n                marginRight: sidebarOpen ? '12px' : '0',\n                display: 'block',\n                flexShrink: 0,\n                fontSize: '18px',\n                fontWeight: 'bold',\n                color: colors.text,\n                minWidth: '18px',\n                textAlign: 'center',\n                width: sidebarOpen ? 'auto' : '100%'\n              }} />\n              {sidebarOpen && <span>Kalkulation</span>}\n            </button>\n            <ul className=\"nav flex-column mt-2\" style={{ \n              marginLeft: sidebarOpen ? '1.25rem' : '0',\n              paddingLeft: sidebarOpen ? '0' : '0'\n            }}>\n              <li>\n                <button \n                  className=\"sidebar-sub-button\" \n                  onClick={() => { setCurrentPage('rezepte'); if (isMobile) setSidebarOpen(false); }}\n                  style={{ \n                    color: colors.text,\n                    fontSize: '0.9rem',\n                    borderRadius: '6px',\n                    backgroundColor: currentPage === 'rezepte' ? colors.accent + '40' : 'transparent',\n                    paddingLeft: sidebarOpen ? '1rem' : '0',\n                    padding: sidebarOpen ? '8px 12px' : '3px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: sidebarOpen ? 'flex-start' : 'center',\n                    minHeight: '32px',\n                    width: '100%',\n                    border: currentPage === 'rezepte' ? `2px solid ${colors.accent}` : 'none',\n                    fontWeight: currentPage === 'rezepte' ? 'bold' : 'normal'\n                  }}\n                  title=\"Rezepte\"\n                >\n                  <FaUtensils style={{ \n                    fontSize: '14px',\n                    marginRight: sidebarOpen ? '8px' : '0',\n                    width: sidebarOpen ? 'auto' : '100%',\n                    textAlign: 'center'\n                  }} />\n                  {sidebarOpen && <span>Rezepte</span>}\n                </button>\n              </li>\n              <li>\n                <button \n                  className=\"sidebar-sub-button\" \n                  onClick={() => { setCurrentPage('artikel'); if (isMobile) setSidebarOpen(false); }}\n                  style={{ \n                    color: colors.text,\n                    fontSize: '0.9rem',\n                    borderRadius: '6px',\n                    backgroundColor: currentPage === 'artikel' ? colors.accent + '40' : 'transparent',\n                    paddingLeft: sidebarOpen ? '1rem' : '0',\n                    padding: sidebarOpen ? '8px 12px' : '3px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: sidebarOpen ? 'flex-start' : 'center',\n                    minHeight: '32px',\n                    width: '100%',\n                    border: currentPage === 'artikel' ? `2px solid ${colors.accent}` : 'none',\n                    fontWeight: currentPage === 'artikel' ? 'bold' : 'normal'\n                  }}\n                  title=\"Artikel\"\n                >\n                  <FaBoxes style={{ \n                    fontSize: '14px',\n                    marginRight: sidebarOpen ? '8px' : '0',\n                    width: sidebarOpen ? 'auto' : '100%',\n                    textAlign: 'center'\n                  }} />\n                  {sidebarOpen && <span>Artikel</span>}\n                </button>\n              </li>\n              <li>\n                <button \n                  className=\"sidebar-sub-button\" \n                  onClick={() => { setCurrentPage('lieferanten'); if (isMobile) setSidebarOpen(false); }}\n                  style={{ \n                    color: colors.text,\n                    fontSize: '0.9rem',\n                    borderRadius: '6px',\n                    backgroundColor: currentPage === 'lieferanten' ? colors.accent + '40' : 'transparent',\n                    paddingLeft: sidebarOpen ? '1rem' : '0',\n                    padding: sidebarOpen ? '8px 12px' : '3px',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: sidebarOpen ? 'flex-start' : 'center',\n                    minHeight: '32px',\n                    width: '100%',\n                    border: currentPage === 'lieferanten' ? `2px solid ${colors.accent}` : 'none',\n                    fontWeight: currentPage === 'lieferanten' ? 'bold' : 'normal'\n                  }}\n                  title=\"Lieferanten\"\n                >\n                  <FaUsers style={{ \n                    fontSize: '14px',\n                    marginRight: sidebarOpen ? '8px' : '0',\n                    width: sidebarOpen ? 'auto' : '100%',\n                    textAlign: 'center'\n                  }} />\n                  {sidebarOpen && <span>Lieferanten</span>}\n                </button>\n              </li>\n            </ul>\n          </li>\n          <li className=\"nav-item mb-2\">\n            <button \n              className=\"sidebar-button\" \n              onClick={() => { setCurrentPage('einkauf'); if (isMobile) setSidebarOpen(false); }}\n              title=\"Einkauf\"\n              style={{ \n                color: colors.text,\n                borderRadius: '8px',\n                backgroundColor: currentPage === 'einkauf' ? colors.accent + '20' : 'transparent',\n                justifyContent: sidebarOpen ? 'flex-start' : 'center',\n                minHeight: '50px',\n                border: 'none',\n                outline: 'none',\n                padding: sidebarOpen ? '12px' : '2px',\n                width: '100%'\n              }}\n            >\n              <FaShoppingCart className=\"sidebar-icon\" style={{ \n                marginRight: sidebarOpen ? '12px' : '0',\n                display: 'block',\n                flexShrink: 0,\n                fontSize: '18px',\n                fontWeight: 'bold',\n                color: colors.text,\n                minWidth: '18px',\n                textAlign: 'center',\n                width: sidebarOpen ? 'auto' : '100%'\n              }} />\n              {sidebarOpen && <span>Einkauf</span>}\n            </button>\n          </li>\n          <li className=\"nav-item mb-2\">\n            <button \n              className=\"sidebar-button\" \n              onClick={() => { setCurrentPage('inventur'); if (isMobile) setSidebarOpen(false); }}\n              title=\"Inventur\"\n              style={{ \n                color: colors.text,\n                borderRadius: '8px',\n                backgroundColor: currentPage === 'inventur' ? colors.accent + '20' : 'transparent',\n                justifyContent: sidebarOpen ? 'flex-start' : 'center',\n                minHeight: '50px',\n                border: 'none',\n                outline: 'none',\n                padding: sidebarOpen ? '12px' : '2px',\n                width: '100%'\n              }}\n            >\n              <FaBoxes className=\"sidebar-icon\" style={{ \n                marginRight: sidebarOpen ? '12px' : '0',\n                display: 'block',\n                flexShrink: 0,\n                fontSize: '18px',\n                fontWeight: 'bold',\n                color: colors.text,\n                minWidth: '18px',\n                textAlign: 'center',\n                width: sidebarOpen ? 'auto' : '100%'\n              }} />\n              {sidebarOpen && <span>Inventur</span>}\n            </button>\n          </li>\n        </ul>\n\n        {/* Sidebar Footer */}\n        {sidebarOpen && (\n          <div className=\"position-absolute bottom-0 start-0 w-100 p-3 border-top\" style={{ borderColor: colors.cardBorder }}>\n            <button \n              style={{ \n                color: colors.text,\n                background: 'none',\n                border: 'none',\n                width: '100%',\n                textAlign: 'left',\n                display: 'flex',\n                alignItems: 'center',\n                padding: '8px 12px',\n                borderRadius: '6px',\n                cursor: 'pointer',\n                fontSize: '0.9rem'\n              }}\n            >\n              <FaCog style={{ fontSize: '18px', marginRight: '12px' }} />\n              Einstellungen\n            </button>\n          </div>\n        )}\n      </div>\n\n      {/* Overlay for Mobile Sidebar */}\n      {sidebarOpen && isMobile && (\n        <div\n          className=\"position-fixed top-0 start-0 w-100 h-100\"\n          style={{ background: 'rgba(0,0,0,0.3)', zIndex: 1000, top: 56 }}\n          onClick={() => setSidebarOpen(false)}\n        />\n      )}\n\n      {/* Main Content */}\n      <div style={{ \n        marginLeft: isMobile ? 0 : (sidebarOpen ? 224 : 60), \n        marginTop: 56,\n        transition: 'margin-left 0.3s ease'\n      }}>\n        {renderPage()}\n      </div>\n\n      {/* Import/Export Modal */}\n      {showImportExportModal && (\n        <div className=\"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center\" \n             style={{ \n               backgroundColor: 'rgba(0,0,0,0.5)', \n               zIndex: 2000 \n             }}>\n          <div className=\"card col-xl-6\" style={{\n            backgroundColor: colors.card,\n            borderColor: colors.cardBorder,\n            boxShadow: '0 8px 32px rgba(0,0,0,0.3)',\n            maxHeight: '90vh',\n            overflow: 'hidden'\n          }}>\n            <div className=\"card-header d-flex justify-content-between align-items-center\" style={{\n              backgroundColor: colors.secondary,\n              borderBottomColor: colors.cardBorder,\n              padding: '1rem 1.5rem'\n            }}>\n              <h5 className=\"mb-0\" style={{ color: colors.text }}>\n                📊 Import/Export - Artikeldaten\n              </h5>\n              <button\n                className=\"btn-close\"\n                onClick={() => {\n                  setShowImportExportModal(false);\n                  resetImportExport();\n                }}\n                style={{ color: colors.text }}\n              />\n            </div>\n            <div className=\"card-body\" style={{ \n              overflowY: 'auto',\n              maxHeight: 'calc(100vh - 180px)',\n              paddingBottom: '0',\n              borderBottom: 'none'\n            }}>\n              {/* Import-Bereich */}\n              <div>\n                                  {/* Datei-Upload */}\n                  <div className=\"mb-4\">\n                    <label className=\"form-label\" style={{ color: colors.text }}>\n                      Datei auswählen (CSV oder JSON)\n                    </label>\n                    <input\n                      type=\"file\"\n                      className=\"form-control\"\n                      accept=\".csv,.json\"\n                      onChange={handleFileUpload}\n                      style={{ borderColor: colors.cardBorder, color: colors.text }}\n                    />\n                    {/* Import-Fehler anzeigen */}\n                    {importErrors.length > 0 && (\n                      <div className=\"mt-2\">\n                        {importErrors.map((error, index) => (\n                          <div key={index} style={{ \n                            color: '#dc3545', \n                            fontSize: '0.85rem',\n                            marginTop: '0.25rem'\n                          }}>\n                            ⚠️ {error}\n                          </div>\n                        ))}\n                      </div>\n                    )}\n                  </div>\n\n                {/* Feldzuordnung */}\n                {importHeaders && importHeaders.length > 0 && (\n                  <div className=\"mb-4\">\n                    {/* Debug-Ausgabe */}\n                    <div style={{ \n                      fontSize: '0.8rem', \n                      color: colors.text + '80', \n                      marginBottom: '0.5rem',\n                      fontStyle: 'italic'\n                    }}>\n                      Verfügbare Import-Spalten: {importHeaders.join(', ')}\n                      {importHeaders.length > 0 && (\n                        <span style={{ marginLeft: '1rem', color: colors.accent }}>\n                          (Trennzeichen: {importHeaders.length > 1 ? 'automatisch erkannt' : 'unbekannt'})\n                        </span>\n                      )}\n                      {detectedEncoding && (\n                        <div style={{ marginTop: '0.25rem', color: colors.accent }}>\n                          Zeichenkodierung: {detectedEncoding}\n                        </div>\n                      )}\n                    </div>\n                    <div style={{ \n                      maxHeight: '400px', \n                      overflowY: 'auto',\n                      border: `1px solid ${colors.cardBorder}`,\n                      borderRadius: '0.375rem',\n                      backgroundColor: colors.secondary + '20'\n                    }}>\n                      <div className=\"p-3\" style={{ \n                        backgroundColor: colors.secondary,\n                        borderBottom: `1px solid ${colors.cardBorder}`,\n                        fontWeight: 'bold',\n                        color: colors.text\n                      }}>\n                        Feldzuordnung\n                      </div>\n                      <div className=\"p-3\">\n                        <div className=\"row\">\n                          {appFields.map(field => (\n                            <div key={field.key} className=\"col-lg-6 col-md-12 mb-3\">\n                              <div style={{ \n                                padding: '0.75rem',\n                                borderRadius: '0.375rem',\n                                backgroundColor: fieldMappings[Object.keys(fieldMappings).find(key => fieldMappings[key] === field.key) || ''] ? colors.accent + '20' : 'transparent',\n                                border: fieldMappings[Object.keys(fieldMappings).find(key => fieldMappings[key] === field.key) || ''] ? `1px solid ${colors.accent}` : `1px solid ${colors.cardBorder}`\n                              }}>\n                                <label className=\"form-label\" style={{ \n                                  color: colors.text,\n                                  fontWeight: '500',\n                                  marginBottom: '0.5rem',\n                                  fontSize: '0.95rem'\n                                }}>\n                                  {field.label}\n                                </label>\n                                <select\n                                  className=\"form-select\"\n                                  value={Object.keys(fieldMappings).find(key => fieldMappings[key] === field.key) || ''}\n                                  onChange={(e) => {\n                                    const selectedHeader = e.target.value;\n                                    const newMappings = { ...fieldMappings };\n                                    \n                                    // Entferne vorherige Zuordnung für dieses App-Feld\n                                    Object.keys(newMappings).forEach(key => {\n                                      if (newMappings[key] === field.key) {\n                                        delete newMappings[key];\n                                      }\n                                    });\n                                    \n                                    // Füge neue Zuordnung hinzu\n                                    if (selectedHeader) {\n                                      newMappings[selectedHeader] = field.key;\n                                    }\n                                    \n                                    setFieldMappings(newMappings);\n                                    generatePreview(importData, newMappings);\n                                  }}\n                                  style={{ \n                                    borderColor: colors.cardBorder, \n                                    color: colors.text,\n                                    fontSize: '0.9rem'\n                                  }}\n                                >\n                                  <option value=\"\">Nicht zuordnen</option>\n                                  {importHeaders && importHeaders.length > 0 ? (\n                                    importHeaders.map(header => (\n                                      <option key={header} value={header}>\n                                        {header}\n                                      </option>\n                                    ))\n                                  ) : (\n                                    <option value=\"\" disabled>Keine Spalten verfügbar</option>\n                                  )}\n                                </select>\n                              </div>\n                            </div>\n                          ))}\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Vorschau */}\n                {importPreview.length > 0 && (\n                  <div className=\"mb-4\">\n                    <h6 style={{ color: colors.text, marginBottom: '1rem' }}>\n                      👁️ Vorschau (erste 5 Datensätze)\n                    </h6>\n                    <div style={{ \n                      maxHeight: '300px', \n                      overflowY: 'auto',\n                      border: `1px solid ${colors.cardBorder}`,\n                      borderRadius: '0.375rem'\n                    }}>\n                      <table className=\"table table-sm mb-0\">\n                        <thead style={{ backgroundColor: colors.secondary }}>\n                          <tr>\n                            {Object.keys(importPreview[0] || {}).map(key => (\n                              <th key={key} style={{ color: colors.text, fontSize: '0.8rem' }}>\n                                {appFields.find(f => f.key === key)?.label || key}\n                              </th>\n                            ))}\n                          </tr>\n                        </thead>\n                        <tbody>\n                          {importPreview.map((row, index) => (\n                            <tr key={index}>\n                              {Object.entries(row).map(([key, value], i) => (\n                                <td key={i} style={{ color: colors.text, fontSize: '0.8rem' }}>\n                                  {key === 'priceCalculationNote' ? (\n                                    <span style={{ \n                                      color: String(value).includes('wird berechnet') ? colors.accent : \n                                             String(value).includes('Abweichung') ? '#dc3545' : \n                                             String(value).includes('konsistent') ? '#28a745' : colors.text,\n                                      fontStyle: 'italic',\n                                      fontSize: '0.75rem'\n                                    }}>\n                                      {String(value)}\n                                    </span>\n                                  ) : key === 'duplicateWarning' ? (\n                                    <span style={{ \n                                      color: '#dc3545',\n                                      fontWeight: 'bold',\n                                      fontSize: '0.75rem'\n                                    }}>\n                                      {String(value)}\n                                    </span>\n                                  ) : key === 'supplierWarning' ? (\n                                    <span style={{ \n                                      color: colors.accent,\n                                      fontWeight: 'bold',\n                                      fontSize: '0.75rem'\n                                    }}>\n                                      {String(value)}\n                                    </span>\n                                  ) : key === 'calculatedPricePerUnit' || key === 'calculatedBundlePrice' || key === 'calculatedContent' ? (\n                                    <span style={{ \n                                      color: colors.accent,\n                                      fontWeight: 'bold'\n                                    }}>\n                                      {typeof value === 'number' ? value.toFixed(2) : String(value)}\n                                    </span>\n                                  ) : (\n                                    String(value)\n                                  )}\n                                </td>\n                              ))}\n                            </tr>\n                          ))}\n                        </tbody>\n                      </table>\n                    </div>\n                  </div>\n                )}\n\n                {/* Import-Button */}\n                {importData.length > 0 && (\n                  <div className=\"d-flex justify-content-between align-items-center\">\n                    <div style={{ color: colors.text }}>\n                      📊 {importData.length} Datensätze zum Import bereit\n                    </div>\n                    <button\n                      className=\"btn btn-primary\"\n                      onClick={handleImport}\n                      style={{\n                        backgroundColor: colors.accent,\n                        borderColor: colors.accent,\n                        color: 'white'\n                      }}\n                    >\n                      📥 Import starten\n                    </button>\n                  </div>\n                )}\n\n                {/* Import-Ergebnis */}\n                {importResult && (\n                  <div className=\"mt-3 p-3\" style={{\n                    backgroundColor: importResult.skipped > 0 ? '#fff3cd' : '#d1edff',\n                    border: `1px solid ${importResult.skipped > 0 ? '#ffeaa7' : '#bee5eb'}`,\n                    borderRadius: '0.375rem',\n                    color: importResult.skipped > 0 ? '#856404' : '#0c5460'\n                  }}>\n                    <div className=\"d-flex align-items-center\">\n                      <span style={{ fontSize: '1.2rem', marginRight: '0.5rem' }}>\n                        {importResult.skipped > 0 ? '⚠️' : '✅'}\n                      </span>\n                      <div>\n                        <strong>Import abgeschlossen</strong>\n                        <br />\n                        {importResult.imported} neue Artikel importiert\n                        {importResult.skipped > 0 && (\n                          <span style={{ color: '#dc3545' }}>\n                            , {importResult.skipped} Duplikate übersprungen\n                          </span>\n                        )}\n                        {importResult.suppliersCreated > 0 && (\n                          <span style={{ color: colors.accent }}>\n                            , {importResult.suppliersCreated} neue Lieferanten erstellt\n                          </span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                )}\n\n                {/* Export-Bereich */}\n                <div className=\"text-center mt-4 pt-4\" style={{ borderTop: `1px solid ${colors.cardBorder}` }}>\n                  <div style={{ color: colors.text, marginBottom: '1.5rem' }}>\n                    <h6>💾 Export aller Artikeldaten</h6>\n                    <p className=\"mb-2\">Klicken Sie auf \"Export\" um alle Artikel als CSV-Datei zu exportieren.</p>\n                    <p className=\"small text-muted\">Die Datei wird mit den deutschen Feldnamen erstellt.</p>\n                  </div>\n                  <button\n                    className=\"btn btn-success\"\n                    onClick={handleExport}\n                    style={{\n                      backgroundColor: '#28a745',\n                      borderColor: '#28a745',\n                      color: 'white'\n                    }}\n                  >\n                    📤 Export starten\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div className=\"card-footer d-flex justify-content-end gap-2\" style={{\n              backgroundColor: colors.secondary,\n              borderTop: 'none',\n              padding: '1rem',\n              position: 'sticky',\n              bottom: 0,\n              zIndex: 10\n            }}>\n              <button\n                className=\"btn btn-secondary\"\n                onClick={() => {\n                  setShowImportExportModal(false);\n                  resetImportExport();\n                }}\n                style={{\n                  backgroundColor: colors.cardBorder,\n                  borderColor: colors.cardBorder,\n                  color: colors.text\n                }}\n              >\n                Abbrechen\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Eigenen Sicherheits-Dialog */}\n      {showDeleteDialog && (\n        <div className=\"position-fixed top-0 start-0 w-100 h-100 d-flex align-items-center justify-content-center\" \n             style={{ \n               backgroundColor: 'rgba(0,0,0,0.5)', \n               zIndex: 2000 \n             }}>\n          <div className=\"card\" style={{\n            backgroundColor: colors.card,\n            borderColor: colors.cardBorder,\n            boxShadow: '0 8px 32px rgba(0,0,0,0.3)',\n            maxWidth: '500px',\n            width: '90%'\n          }}>\n            <div className=\"card-header text-center\" style={{\n              backgroundColor: colors.secondary,\n              borderBottomColor: colors.cardBorder,\n              padding: '1.5rem'\n            }}>\n              <h5 className=\"mb-0\" style={{ color: colors.text }}>\n                ⚠️ Sicherheitsabfrage ⚠️\n              </h5>\n            </div>\n            <div className=\"card-body text-center\" style={{ padding: '2rem' }}>\n              <div style={{ fontSize: '1.1rem', color: colors.text, marginBottom: '1rem' }}>\n                {deleteDialogData?.type === 'bulk' && (\n                  <>\n                    Möchten Sie wirklich <strong>{deleteDialogData.count} Artikel</strong> löschen?\n                  </>\n                )}\n              </div>\n              <div style={{ \n                color: colors.text + 'CC', \n                fontSize: '0.95rem',\n                marginBottom: '1.5rem',\n                lineHeight: '1.5'\n              }}>\n                Diese Aktion kann nicht rückgängig gemacht werden!\n              </div>\n            </div>\n            <div className=\"card-footer d-flex justify-content-center gap-3\" style={{\n              backgroundColor: colors.secondary,\n              borderTopColor: colors.cardBorder,\n              padding: '1rem'\n            }}>\n              <button\n                className=\"btn btn-secondary\"\n                onClick={handleCancelDelete}\n                style={{\n                  backgroundColor: colors.cardBorder,\n                  borderColor: colors.cardBorder,\n                  color: colors.text,\n                  minWidth: '120px'\n                }}\n              >\n                Abbrechen\n              </button>\n              <button\n                className=\"btn btn-danger\"\n                onClick={handleConfirmDelete}\n                style={{\n                  backgroundColor: '#dc3545',\n                  borderColor: '#dc3545',\n                  color: 'white',\n                  minWidth: '120px'\n                }}\n              >\n                Löschen\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}